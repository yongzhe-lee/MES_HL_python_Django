{"version":3,"sources":["raw-js/kendo.ripple.js"],"names":["global","factory","exports","module","require","define","amd","globalThis","self","kendoripple","js","this","window","kendo","util","ripple","once","element","eventName","fn","listener","removeEventListener","remove","addEventListener","activate","containerSelector","options","e","container","target","doc","document","ownerDocument","selector","closest","matches","Element","prototype","el","sel","msMatchesSelector","node","parentElement","test","type","classList","contains","add","_a","createElement","className","blob","appendChild","createRipple","state_1","animated","released","eventType","focusin","keydown","mousedown","pointerdown","touchdown","animationstart","currentTarget","release","getComputedStyle","getPropertyValue","rect","getBoundingClientRect","left","top","clientX","clientY","width","height","dx","dy","size","Math","sqrt","style","offsetWidth","Error","cssText","setTimeout","finishAnimation","state","deactivate","parentNode","removeChild","transition","opacity","deepExtend","register","root","elements","arr","handlers","map","item","defaultOptions","events","activator","body","forEach","evt","concat","apply","$","undefined$1","ui","Widget","extend","RippleContainer","init","that","call","wrapper","addClass","registerListeners","name","removeListeners","callback","destroy","plugin","jQuery"],"mappings":";;;;;;;;CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,oBAAAC,OAAAA,OAAAD,QAAAD,EAAAG,QAAA,kBACA,mBAAAC,QAAAA,OAAAC,IAAAD,OAAA,CAAA,kBAAAJ,KACAD,EAAA,oBAAAO,WAAAA,WAAAP,GAAAQ,MAAAC,YAAAT,EAAAS,aAAA,CAAA,EAAAT,EAAAS,YAAAC,GAAAT,IACA,CAJA,CAIAU,MAAA,YACA,WAEAC,OAAAC,MAAAC,KAAAF,OAAAC,MAAAC,MAAA,CAAA,EACAF,OAAAC,MAAAC,KAAAC,OAAAH,OAAAC,MAAAC,KAAAC,QAAA,CAAA,EAEA,IAuBAC,EAAA,SAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAA,WACAD,IACAF,EAAAI,oBAAAH,EAAAE,GAAA,EACA,EACAE,EAAA,WAAA,OAAAL,EAAAM,iBAAAL,EAAAE,GAAA,EAAA,EAEA,OADAE,IACA,CAAAA,OAAAA,EACA,EACAE,EAAA,SAAAC,EAAAC,GAAA,OAAA,SAAAC,GACA,IAEAC,EAFAC,EAAAF,EAAAE,OACAC,EAAAD,EAAAE,UAAAF,EAAAG,cAQA,IALAJ,EADAF,EAAAE,UACAF,EAAAE,UAAAC,GArCA,SAAAZ,EAAAgB,GACA,GAAAhB,EAAAiB,QACA,OAAAjB,EAAAiB,QAAAD,GAMA,IAJA,IAAAE,EAAAC,QAAAC,UAAAF,QACA,SAAAG,EAAAC,GAAA,OAAAD,EAAAH,QAAAI,EAAA,EACA,SAAAD,EAAAC,GAAA,OAAAD,EAAAE,kBAAAD,EAAA,EACAE,EAAAxB,EACAwB,GAAA,CACA,GAAAN,EAAAM,EAAAR,GACA,OAAAQ,EAEAA,EAAAA,EAAAC,aACA,CACA,CA0BAR,CAAAL,EAAAJ,OAMA,SAAAkB,KAAAhB,EAAAiB,OAAAhB,EAAAiB,UAAAC,SAAA,oBAIA,GAAAjB,EAAAgB,UAAAC,SAAA,eAAAjB,EAAAgB,UAAAC,SAAA,WAoDAnB,EAAAE,OAAAgB,UAAAvB,OAAA,kBACA,iBAAAK,EAAAiB,MACAjB,EAAAE,OAAAgB,UAAAE,IAAA,sBAtDA,CAEAnB,EAAAiB,UAAAE,IAAA,mBACA,IAAAC,EAtCA,SAAAlB,GACA,IAAAf,EAAAe,EAAAmB,cAAA,OACAlC,EAAAmC,UAAA,WACA,IAAAC,EAAArB,EAAAmB,cAAA,OAGA,OAFAE,EAAAD,UAAA,gBACAnC,EAAAqC,YAAAD,GACA,CAAApC,EAAAoC,EACA,CA+BAE,CAAAvB,GAAAf,EAAAiC,EAAA,GAAAG,EAAAH,EAAA,GACAM,EAAA,CACAC,UAAA,EACAC,UAAA,EACAL,KAAAA,EACAvB,UAAAA,EACAb,OAAAA,GAEA0C,EAAA,CACAC,QAAA,WACAC,QAAA,QACAC,UAAA,UACAC,YAAA,YACAC,UAAA,UACAC,eAAA,gBACApC,EAAAiB,MACA5B,EAAAW,EAAAqC,cAAAP,GAAA,WAAA,OAAAQ,EAAAX,EAAA,IACA1B,EAAAwB,YAAArC,GAEAH,OAAAsD,iBAAAnD,GAAAoD,iBAAA,WACA,IAAAC,EAAAxC,EAAAyC,wBACAC,EAAA,EACAC,EAAA,EACA,sBAAA5B,KAAAhB,EAAAiB,OACA0B,EAAA3C,EAAA6C,QAAAJ,EAAAE,KACAC,EAAA5C,EAAA8C,QAAAL,EAAAG,MAGAD,EAAAF,EAAAM,MAAA,EACAH,EAAAH,EAAAO,OAAA,GAGA,IAGAC,EAAAN,GAHAA,EAAAF,EAAAM,MAAA,EAAAN,EAAAM,MAAA,GAIAG,EAAAN,GAHAA,EAAAH,EAAAO,OAAA,EAAAP,EAAAO,OAAA,GAKAG,EAAA,EAAAC,KAAAC,KAAAJ,EAAAA,EAAAC,EAAAA,GAIA,GAFA1B,EAAA8B,MAAAP,MAAAvB,EAAA8B,MAAAN,OAAAG,EAAA,KAEA3B,EAAA+B,YAAA,EACA,MAAA,IAAAC,MAAA,kBAEAhC,EAAA8B,MAAAG,QAAA,oBAAAN,EAAA,wBAAAA,EAAA,0EAAAR,EAAA,qBAAAC,EAAA,YACAc,YAAA,WAAA,OAAAC,EAAAhC,EAAA,GAPA,IAQA,CAOA,CAAA,EACAgC,EAAA,SAAAC,GACAA,EAAAhC,UAAA,EACAiC,EAAAD,EACA,EACAtB,EAAA,SAAAsB,GACAA,EAAA/B,UAAA,EACAgC,EAAAD,EACA,EACAC,EAAA,SAAAD,GAIA,GAAAA,EAAA/B,UAAA+B,EAAAhC,SAAA,CAGA,IAAAJ,EAAAoC,EAAApC,KAAApC,EAAAwE,EAAAxE,OAAAa,EAAA2D,EAAA3D,UACAA,GACAZ,EAAAY,EAAA,QAAA,WAAA,OAAAA,EAAAiB,UAAAvB,OAAA,kBAAA,IAEA6B,IACAnC,EAAAmC,EAAA,iBAAA,WACApC,GAAAA,EAAA0E,YACA1E,EAAA0E,WAAAC,YAAA3E,EAEA,IACAoC,EAAA8B,MAAAU,WAAA,uBACAxC,EAAA8B,MAAAW,QAAA,IAZA,CAcA,EAgCA/E,MAAAgF,WAAAhF,MAAAC,KAAAC,OAAA,CACA+E,SA7BA,SAAAC,EAAAC,GACA,IAAAC,EACAC,GADAD,EACAD,EAAAG,KAAA,SAAAC,GACA,IAAAC,EAAA,CACAC,OAAA,CAAA,YAAA,aACAtG,QAAA,GAEAiC,EAAAmE,EAAAnE,SAAAe,EAAAoD,EAAA1E,QAAAA,OAAA,IAAAsB,EAAAqD,EAAArD,EACAuD,EAAA/E,EAAAS,EAAAP,GACA4E,EAAA5E,EAAA4E,QAAAD,EAAAC,OACA1E,EAAAF,EAAA1B,OAAA+B,SAAAyE,KAAAT,EAEA,OADAO,EAAAG,SAAA,SAAAC,GAAA,OAAA9E,EAAAL,iBAAAmF,EAAAH,GAAA,EAAA,IACA,CAAAD,OAAAA,EAAA5E,QAAAA,EAAA6E,UAAAA,EACA,IAZA,GAAAI,OAAAC,MAAA,GAAAX,IAaA,OAAA,WACA,GAAAF,EAAA,CAQAG,EAAAO,SALA,SAAAzD,GACA,IAAAsD,EAAAtD,EAAAsD,OAAA5E,EAAAsB,EAAAtB,QAAA6E,EAAAvD,EAAAuD,UACA3E,EAAAF,EAAA1B,OAAA+B,SAAAyE,KAAAT,EACAO,EAAAG,SAAA,SAAAC,GAAA,OAAA9E,EAAAP,oBAAAqF,EAAAH,GAAA,EAAA,GACA,IAEAR,EAAA,IAPA,CAQA,CACA,GAMA,CAjLA,GA2PA,OAjEA,SAAAc,EAAAC,GACA,IAAAjG,EAAAD,OAAAC,MACAkG,EAAAlG,EAAAkG,GACAC,EAAAD,EAAAC,OACAC,EAAAJ,EAAAI,OACAlG,EAAAF,EAAAC,KAAAC,OAEAmG,EAAAF,EAAAC,OAAA,CACAE,KAAA,SAAAlG,EAAAS,GACA,IAAA0F,EAAAzG,KAEAqG,EAAA7F,GAAAgG,KAAAE,KAAAD,EAAAnG,IAEAA,EAAAmG,EAAAE,QAAAF,EAAAnG,SAEAsG,SAAA,sBAEAH,EAAA1F,QAAAuF,EAAA,CAAA,EAAAG,EAAA1F,QAAAA,GAEA0F,EAAAI,mBACA,EAEA9F,QAAA,CACA+F,KAAA,kBACAzB,SAAA,CACA,CAAA/D,SAAA,qBACA,CAAAA,SAAA,4BAAAP,QAAA,CAAA1B,QAAA,IACA,CAAAiC,SAAA,qCACA,CACAA,SAAA,wBACAP,QAAA,CACA4E,OAAA,CAAA,UAAA,eAAA,aAMAoB,gBAAA,WAAA,EAEAF,kBAAA,WACA,IAAAJ,EAAAzG,KACAoF,EAAAqB,EAAAnG,QAAA,GACA+E,EAAAoB,EAAA1F,QAAAsE,SAEAoB,EAAAM,kBAEA,IAAAC,EAAA5G,EAAA+E,SAAAC,EAAAC,GAEAoB,EAAAM,gBAAAC,CACA,EAEAC,QAAA,WAGAZ,EAAA7F,GAAAyG,QAAAP,KAFA1G,WAIA+G,iBACA,IAGAX,EAAAc,OAAAX,EAEA,CA9DA,CA8DAtG,OAAAC,MAAAiH,QACAjH,KAIA","file":"kendo.ripple.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.core.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.core'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendoripple = global.kendoripple || {}, global.kendoripple.js = factory()));\n})(this, (function () {\n    (function () {\n\n    window.kendo.util = window.kendo.util || {};\n    window.kendo.util.ripple = window.kendo.util.ripple || {};\n\n    var closest = function (element, selector) {\n        if (element.closest) {\n            return element.closest(selector);\n        }\n        var matches = Element.prototype.matches ?\n            function (el, sel) { return el.matches(sel); }\n            : function (el, sel) { return el.msMatchesSelector(sel); };\n        var node = element;\n        while (node) {\n            if (matches(node, selector)) {\n                return node;\n            }\n            node = node.parentElement;\n        }\n    };\n    var createRipple = function (doc) {\n        var ripple = doc.createElement('div');\n        ripple.className = 'k-ripple';\n        var blob = doc.createElement('div');\n        blob.className = 'k-ripple-blob';\n        ripple.appendChild(blob);\n        return [ripple, blob];\n    };\n    var once = function (element, eventName, fn) {\n        var listener = function () {\n            fn();\n            element.removeEventListener(eventName, listener, false);\n        };\n        var remove = function () { return element.addEventListener(eventName, listener, false); };\n        remove();\n        return { remove: remove };\n    };\n    var activate = function (containerSelector, options) { return function (e) {\n        var target = e.target;\n        var doc = target.document || target.ownerDocument;\n        var container;\n        if (options.container) {\n            container = options.container(target);\n        }\n        else {\n            container = closest(target, containerSelector);\n        }\n        if (!container) {\n            return;\n        }\n        // focus event of ripple container triggers double-focus\n        var doubleFocus = /focus/i.test(e.type) && container.classList.contains(\"k-ripple-target\");\n        if (doubleFocus) {\n            return;\n        }\n        if (!target.classList.contains('k-checkbox') && !target.classList.contains('k-radio')) {\n            // suppress focus when animating ripples\n            container.classList.add(\"k-ripple-target\");\n            var _a = createRipple(doc), ripple = _a[0], blob = _a[1];\n            var state_1 = {\n                animated: false,\n                released: false,\n                blob: blob,\n                container: container,\n                ripple: ripple\n            };\n            var eventType = {\n                'focusin': 'focusout',\n                'keydown': 'keyup',\n                'mousedown': 'mouseup',\n                'pointerdown': 'pointerup',\n                'touchdown': 'touchup',\n                'animationstart': 'animationend'\n            }[e.type];\n            once(e.currentTarget, eventType, function () { return release(state_1); });\n            container.appendChild(ripple);\n            // recalc to allow the effect to animate\n            window.getComputedStyle(ripple).getPropertyValue('opacity');\n            var rect = container.getBoundingClientRect();\n            var left = 0;\n            var top = 0;\n            if ((/mouse|pointer|touch/).test(e.type)) {\n                left = e.clientX - rect.left;\n                top = e.clientY - rect.top;\n            }\n            else {\n                left = rect.width / 2;\n                top = rect.height / 2;\n            }\n            // coordinates of the farthest corner\n            var xMax = left < rect.width / 2 ? rect.width : 0;\n            var yMax = top < rect.height / 2 ? rect.height : 0;\n            // distance to the farthest corner\n            var dx = left - xMax;\n            var dy = top - yMax;\n            // blob size is twice the blob radius\n            var size = 2 * Math.sqrt(dx * dx + dy * dy);\n            var duration = 500;\n            blob.style.width = blob.style.height = size + \"px\";\n            // force reflow for Safari 11 to align ripple blob\n            if (blob.offsetWidth < 0) {\n                throw new Error(\"Inconceivable!\");\n            }\n            blob.style.cssText = \"\\n        width: \" + size + \"px;\\n        height: \" + size + \"px;\\n        transform: translate(-50%, -50%) scale(1);\\n        left: \" + left + \"px;\\n        top: \" + top + \"px;\\n    \";\n            setTimeout(function () { return finishAnimation(state_1); }, duration);\n        }\n        else {\n            e.target.classList.remove('k-ripple-focus');\n            if (e.type !== 'animationend') {\n                e.target.classList.add('k-ripple-focus');\n            }\n        }\n    }; };\n    var finishAnimation = function (state) {\n        state.animated = true;\n        deactivate(state);\n    };\n    var release = function (state) {\n        state.released = true;\n        deactivate(state);\n    };\n    var deactivate = function (state) {\n        // deactivation happens when both\n        // - the activation event has been released (release)\n        // - the ripple has finished animating (finishAnimation)\n        if (!state.released || !state.animated) {\n            return;\n        }\n        var blob = state.blob, ripple = state.ripple, container = state.container;\n        if (container) {\n            once(container, 'blur', function () { return container.classList.remove(\"k-ripple-target\"); });\n        }\n        if (blob) {\n            once(blob, 'transitionend', function () {\n                if (ripple && ripple.parentNode) {\n                    ripple.parentNode.removeChild(ripple);\n                }\n            });\n            blob.style.transition = 'opacity 200ms linear';\n            blob.style.opacity = '0';\n        }\n    };\n    /**\n     * @hidden\n     */\n    var register = function (root, elements) {\n        var flatten = function (arr) { return [].concat.apply([], arr); };\n        var handlers = flatten(elements.map(function (item) {\n            var defaultOptions = {\n                events: ['mousedown', 'touchdown'],\n                global: false\n            };\n            var selector = item.selector, _a = item.options, options = _a === void 0 ? defaultOptions : _a;\n            var activator = activate(selector, options);\n            var events = options.events || defaultOptions.events;\n            var container = options.global ? document.body : root;\n            events.forEach(function (evt) { return container.addEventListener(evt, activator, false); });\n            return { events: events, options: options, activator: activator };\n        }));\n        return function () {\n            if (!root) {\n                return;\n            }\n            var removeListener = function (_a) {\n                var events = _a.events, options = _a.options, activator = _a.activator;\n                var container = options.global ? document.body : root;\n                events.forEach(function (evt) { return container.removeEventListener(evt, activator, false); });\n            };\n            handlers.forEach(removeListener);\n            root = null;\n        };\n    };\n\n    kendo.deepExtend(kendo.util.ripple, {\n        register: register\n    });\n\n    })();\n\n    var __meta__ = {\n        id: \"ripplecontainer\",\n        name: \"RippleContainer\",\n        category: \"web\",\n        depends: [ \"core\" ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            Widget = ui.Widget,\n            extend = $.extend,\n            ripple = kendo.util.ripple;\n\n        var RippleContainer = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element);\n\n                element = that.wrapper = that.element;\n\n                element.addClass(\"k-ripple-container\");\n\n                that.options = extend({}, that.options, options);\n\n                that.registerListeners();\n            },\n\n            options: {\n                name: \"RippleContainer\",\n                elements: [\n                    { selector: \".k-button:not(li)\" },\n                    { selector: \".k-list-ul > .k-list-item\", options: { global: true } },\n                    { selector: \".k-checkbox-label, .k-radio-label\" },\n                    {\n                        selector: \".k-checkbox, .k-radio\",\n                        options: {\n                            events: [ \"focusin\", \"animationend\", \"click\"]\n                        }\n                    }\n                ]\n            },\n\n            removeListeners: function() {},\n\n            registerListeners: function() {\n                var that = this;\n                var root = that.element[0];\n                var elements = that.options.elements;\n\n                that.removeListeners();\n\n                var callback = ripple.register(root, elements);\n\n                that.removeListeners = callback;\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that.removeListeners();\n            }\n        });\n\n        ui.plugin(RippleContainer);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}