/**
 * Kendo UI v2024.2.514 (http://www.telerik.com/kendo-ui)
 * Copyright 2024 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("kendo.core.js"),require("kendo.color.js"),require("kendo.drawing.js"),require("kendo.dataviz.core.js"),require("kendo.breadcrumb.js"),require("kendo.data.js"),require("kendo.dataviz.themes.js"),require("kendo.userevents.js"),require("kendo.icons.js")):"function"==typeof define&&define.amd?define(["kendo.core.min","kendo.color.min","kendo.drawing.min","kendo.dataviz.core.min","kendo.breadcrumb.min","kendo.data.min","kendo.dataviz.themes.min","kendo.userevents.min","kendo.icons.min"],e):((t="undefined"!=typeof globalThis?globalThis:t||self).kendodataviz=t.kendodataviz||{},t.kendodataviz.chart=t.kendodataviz.chart||{},t.kendodataviz.chart.js=e())}(this,(function(){!function(t){window.kendo.dataviz=window.kendo.dataviz||{};var e=kendo.dataviz,i=e.Class,n=e.isNumber,s=e.constants,r=s.MAX_VALUE,o=s.MIN_VALUE,a=s.VALUE,h=s.DATE,l=s.CENTER,c=s.TOP,u=s.BOTTOM,d=s.LEFT,p=s.WHITE,f=s.CIRCLE,g=s.X,v=s.Y,x=s.RIGHT,m=s.BLACK,y=s.COORD_PRECISION,_=s.END,b=s.START,w=s.DEFAULT_PRECISION,A=s.ARC,S=e.defined,k=e.getter,C=e.isArray,I=e.ChartElement,P=e.Point,T=e.Box,E=e.alignPathToPixel,R=e.setDefaultOptions,V=e.isString,L=e.inArray,M=e.isFunction,O=e.valueOrDefault,B=e.isObject,F=e.parseDate,D=e.deepExtend,H=e.last,z=e.eventElement,N=e.TextBox,G=e.getTemplate,W=e.ShapeElement,q=e.getSpacing,X=e.CurveProcessor,Y=e.append,U=e.styleValue,Z=e.CategoryAxis,j=e.BoxElement,$=e.Title,K=e.round,Q=e.limitValue,J=e.cycleIndex,tt=e.grep,et=e.elementStyles,it=e.autoTextColor,nt=e.rad,st=e.bindEvents,rt=e.services,ot=e.unbindEvents,at=kendo.support,ht=kendo.drawing,lt=ht.Path,ct=ht.Animation,ut=ht.AnimationFactory,dt=ht.Group,pt=ht.Circle,ft=ht.MultiPath,gt=kendo.Color,vt=kendo.geometry,xt=vt.Point,mt=vt.Circle,yt=vt.transform,_t=i.extend({init:function(t){this._axis=t,this.options=t.options},value:function(t){var e=this._axis;return e.getCategory?e.getCategory(t):e.getValue(t)},slot:function(t,e,i){return void 0===i&&(i=!0),this._axis.slot(t,e,i)},range:function(){return this._axis.range()},valueRange:function(){return this._axis.valueRange()}});function bt(t,e){for(var i=0;i<e.length;i++)if(e[i].options.name===t)return e[i].prepareUserOptions(),new _t(e[i])}var wt=kendo.Class.extend({init:function(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t},findAxisByName:function(t){return bt(t,this._pane.axes)}}),At=i.extend({init:function(t){this._plotArea=t,this.visual=t.visual,this.backgroundVisual=t._bgVisual}});function St(t){for(var e=t.length,i=0,s=0;s<e;s++){var r=t[s];n(r)&&i++}return i}var kt={min:function(t){for(var e=t.length,i=r,s=0;s<e;s++){var o=t[s];n(o)&&(i=Math.min(i,o))}return i===r?t[0]:i},max:function(t){for(var e=t.length,i=o,s=0;s<e;s++){var r=t[s];n(r)&&(i=Math.max(i,r))}return i===o?t[0]:i},sum:function(t){for(var e=t.length,i=0,s=0;s<e;s++){var r=t[s];n(r)&&(i+=r)}return i},sumOrNull:function(t){var e=null;return St(t)&&(e=kt.sum(t)),e},count:function(t){for(var e=t.length,i=0,n=0;n<e;n++){var s=t[n];null!==s&&S(s)&&i++}return i},avg:function(t){var e=St(t),i=t[0];return e>0&&(i=kt.sum(t)/e),i},first:function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];if(null!==n&&S(n))return n}return t[0]}};function Ct(t,e){return null===e?e:k(t,!0)(e)}var It=i.extend({init:function(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}},register:function(t,e,i){var n=this;void 0===e&&(e=[a]),void 0===i&&(i={});for(var s=0;s<t.length;s++){var r=t[s];n._valueFields[r]=e,n._otherFields[r]=i,n._nullValue[r]=n._makeValue(e,null),n._undefinedValue[r]=n._makeValue(e,void 0)}},canonicalFields:function(t){return this.valueFields(t).concat(this.otherFields(t))},valueFields:function(t){return this._valueFields[t.type]||[a]},otherFields:function(t){return this._otherFields[t.type]||[a]},bindPoint:function(t,e,i){var n,s,r=t.data,o=S(i)?i:r[e],a={valueFields:{value:o}},h=this.valueFields(t),l=this._otherFields[t.type];if(null===o)s=this._nullValue[t.type];else if(S(o)){if(Array.isArray(o)){var c=o.slice(h.length);s=this._bindFromArray(o,h),n=this._bindFromArray(c,l)}else if("object"==typeof o){var u=this.sourceFields(t,h),d=this.sourceFields(t,l);s=this._bindFromObject(o,h,u),n=this._bindFromObject(o,l,d)}}else s=this._undefinedValue[t.type];return S(s)&&(1===h.length?a.valueFields.value=s[h[0]]:a.valueFields=s),a.fields=n||{},a},_makeValue:function(t,e){for(var i={},n=t.length,s=0;s<n;s++){i[t[s]]=e}return i},_bindFromArray:function(t,e){var i={};if(e)for(var n=Math.min(e.length,t.length),s=0;s<n;s++)i[e[s]]=t[s];return i},_bindFromObject:function(t,e,i){void 0===i&&(i=e);var n={};if(e)for(var s=e.length,r=0;r<s;r++){var o=e[r],a=i[r];null!==a&&(n[o]=Ct(a,t))}return n},sourceFields:function(t,e){var i=[];if(e)for(var n=e.length,s=0;s<n;s++){var r=e[s],o=r===a?"field":r+"Field";i.push(null!==t[o]?t[o]||r:null)}return i}});It.current=new It;var Pt=/percent(?:\w*)\((\d+)\)/,Tt=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),Et=i.extend({init:function(t,e,i){this.initGlobalRanges(t,e,i)},initGlobalRanges:function(t,e,i){var n=e.data,s=Tt.exec(t);if(s){this.valueGetter=this.createValueGetter(e,i);var r=this.getAverage(n),o=this.getStandardDeviation(n,r,!1),a=s[1]?parseFloat(s[1]):1,h={low:r.value-o*a,high:r.value+o*a};this.globalRange=function(){return h}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,i);var l=this.getStandardError(n,this.getAverage(n));this.globalRange=function(t){return{low:t-l,high:t+l}}}},createValueGetter:function(t,e){var i,r=t.data,o=It.current,a=o.valueFields(t),h=S(r[0])?r[0]:{};if(C(h)){var l=e?a.indexOf(e):0;i=k("["+l+"]")}else if(n(h))i=k();else if(typeof h===s.OBJECT){var c=o.sourceFields(t,a);i=k(c[a.indexOf(e)])}return i},getErrorRange:function(t,e){var i,s,r;if(!S(e))return null;if(this.globalRange)return this.globalRange(t);if(C(e))i=t-e[0],s=t+e[1];else if(n(r=parseFloat(e)))i=t-r,s=t+r;else{if(!(r=Pt.exec(e)))throw new Error("Invalid ErrorBar value: "+e);var o=t*(parseFloat(r[1])/100);i=t-Math.abs(o),s=t+Math.abs(o)}return{low:i,high:s}},getStandardError:function(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)},getStandardDeviation:function(t,e,i){for(var s=t.length,r=i?e.count-1:e.count,o=0,a=0;a<s;a++){var h=this.valueGetter(t[a]);n(h)&&(o+=Math.pow(h-e.value,2))}return Math.sqrt(o/r)},getAverage:function(t){for(var e=t.length,i=0,s=0,r=0;r<e;r++){var o=this.valueGetter(t[r]);n(o)&&(i+=o,s++)}return{value:i/s,count:s}}}),Rt=at.browser||{},Vt=600,Lt="fadeIn",Mt=.8,Ot=Rt.msie?.001:0,Bt="errorLow",Ft="errorHigh",Dt="xErrorLow",Ht="xErrorHigh",zt="yErrorLow",Nt="yErrorHigh",Gt="zero",Wt="interpolate",qt="gap",Xt="above",Yt="below",Ut="smooth",Zt="step",jt="area",$t="bar",Kt="boxPlot",Qt="bubble",Jt="bullet",te="candlestick",ee="column",ie="donut",ne="funnel",se="pyramid",re="heatmap",oe="horizontalWaterfall",ae="line",he="ohlc",le="pie",ce="polarArea",ue="polarLine",de="polarScatter",pe="radarArea",fe="radarColumn",ge="radarLine",ve="rangeArea",xe="rangeBar",me="rangeColumn",ye="scatter",_e="scatterLine",be="verticalArea",we="verticalBoxPlot",Ae="verticalBullet",Se="verticalLine",ke="verticalRangeArea",Ce="waterfall",Ie=[$t,ee,he,te,Kt,we,Jt,me,xe,Ce,oe],Pe="exponentialTrendline",Te="linearTrendline",Ee="logarithmicTrendline",Re="movingAverageTrendline",Ve="polynomialTrendline",Le="powerTrendline",Me=[Pe,Te,Ee,Re,Ve,Le],Oe="legendItemClick",Be="legendItemHover",Fe="legendItemLeave",De="seriesClick",He="seriesHover",ze="seriesOver",Ne="seriesLeave",Ge="plotAreaClick",We="plotAreaHover",qe="plotAreaLeave",Xe="drag",Ye="dragEnd",Ue="dragStart",Ze="zoomStart",je="zoom",$e="zoomEnd",Ke="selectStart",Qe="select",Je="selectEnd",ti="render",ei="showTooltip",ii="hideTooltip",ni="paneRender",si="graphics-symbol",ri="k-chart-point",oi="Point",ai="checkbox",hi="k-chart-legend-item",li="Legend item",ci="log",ui="category",di="insideEnd",pi="insideBase",fi="outsideEnd",gi="wheel",vi=150,xi="drilldown",mi="drilldown",yi=2,_i={INITIAL_ANIMATION_DURATION:Vt,FADEIN:Lt,LEGEND_ITEM_CLICK:Oe,LEGEND_ITEM_HOVER:Be,LEGEND_ITEM_LEAVE:Fe,SERIES_CLICK:De,SERIES_HOVER:He,SERIES_OVER:ze,SERIES_LEAVE:Ne,GLASS:"glass",BORDER_BRIGHTNESS:Mt,TOOLTIP_OFFSET:5,START_SCALE:Ot,ERROR_LOW_FIELD:Bt,ERROR_HIGH_FIELD:Ft,X_ERROR_LOW_FIELD:Dt,X_ERROR_HIGH_FIELD:Ht,Y_ERROR_LOW_FIELD:zt,Y_ERROR_HIGH_FIELD:Nt,LINE_MARKER_SIZE:8,INTERPOLATE:Wt,ZERO:Gt,SMOOTH:Ut,STEP:Zt,CATEGORY:ui,FUNNEL:ne,PYRAMID:se,BAR:$t,CANDLESTICK:te,PIE:le,COLUMN:ee,AREA:jt,VERTICAL_BULLET:Ae,BOX_PLOT:Kt,OHLC:he,WATERFALL:Ce,LINE:ae,BULLET:Jt,VERTICAL_LINE:Se,VERTICAL_AREA:be,RANGE_AREA:ve,VERTICAL_RANGE_AREA:ke,RANGE_COLUMN:me,VERTICAL_BOX_PLOT:we,RANGE_BAR:xe,HORIZONTAL_WATERFALL:oe,SCATTER:ye,SCATTER_LINE:_e,BUBBLE:Qt,RADAR_AREA:pe,RADAR_LINE:ge,RADAR_COLUMN:fe,POLAR_LINE:ue,POLAR_AREA:ce,POLAR_SCATTER:de,RENDER:ti,PLOT_AREA_CLICK:Ge,PLOT_AREA_HOVER:We,PLOT_AREA_LEAVE:qe,LOGARITHMIC:ci,DRAG:Xe,DRAG_START:Ue,DRAG_END:Ye,ZOOM_START:Ze,ZOOM:je,ZOOM_END:$e,SELECT_START:Ke,SELECT:Qe,SELECT_END:Je,PANE_RENDER:ni,GAP:qt,DONUT:ie,INSIDE_END:di,INSIDE_BASE:pi,OUTSIDE_END:fi,MOUSEWHEEL:gi,MOUSEWHEEL_DELAY:vi,MOUSEWHEEL_ZOOM_RATE:.3,SHOW_TOOLTIP:ei,HIDE_TOOLTIP:ii,EQUALLY_SPACED_SERIES:Ie,ABOVE:Xt,BELOW:Yt,HEATMAP:re,DRILLDOWN:xi,DRILLDOWN_FIELD:mi,MIN_MOVING_AVERAGE_PERIOD:yi,TRENDLINE_SERIES:Me,TRENDLINE_EXPONENTIAL:Pe,TRENDLINE_LINEAR:Te,TRENDLINE_LOGARITHMIC:Ee,TRENDLINE_MOVING_AVERAGE:Re,TRENDLINE_POLYNOMIAL:Ve,TRENDLINE_POWER:Le,CHART_POINT_ROLE:si,CHART_POINT_CLASSNAME:ri,CHART_POINT_ROLE_DESCRIPTION:oi,LEGEND_ITEM_ROLE:ai,LEGEND_ITEM_CLASSNAME:hi,LEGEND_ITEM_ARIA_ROLE_DESCRIPTION:li},bi=I.extend({init:function(t,e,i,n,s,r){I.fn.init.call(this,r),this.low=t,this.high=e,this.isVertical=i,this.chart=n,this.series=s},reflow:function(t){var e,i=this.options.endCaps,n=this.isVertical,s=this.getAxis().getSlot(this.low,this.high),r=t.center(),o=this.getCapsWidth(t,n),a=n?r.x:r.y,h=a-o,l=a+o;n?(e=[new P(r.x,s.y1),new P(r.x,s.y2)],i&&e.push(new P(h,s.y1),new P(l,s.y1),new P(h,s.y2),new P(l,s.y2)),this.box=new T(h,s.y1,l,s.y2)):(e=[new P(s.x1,r.y),new P(s.x2,r.y)],i&&e.push(new P(s.x1,h),new P(s.x1,l),new P(s.x2,h),new P(s.x2,l)),this.box=new T(s.x1,h,s.x2,l)),this.linePoints=e},getCapsWidth:function(t,e){var i=e?t.width():t.height();return Math.min(Math.floor(i/2),4)||4},createVisual:function(){var t=this,e=this.options,i=e.visual;i?this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;return delete t.visual,e}}):this.createDefaultVisual()},createDefaultVisual:function(){var t=this.options,e=this.linePoints,i={stroke:{color:t.color,width:t.line.width,dashType:t.line.dashType}};I.fn.createVisual.call(this);for(var n=0;n<e.length;n+=2){var s=new lt(i).moveTo(e[n].x,e[n].y).lineTo(e[n+1].x,e[n+1].y);E(s),this.visual.append(s)}}});R(bi,{animation:{type:Lt,delay:Vt},endCaps:!0,line:{width:2},zIndex:1});var wi=bi.extend({getAxis:function(){return this.chart.seriesValueAxis(this.series)}});function Ai(t){for(var e=0;e<t.length;e++)if(S(t[e].zIndex))return!0}function Si(t,e){null!==e&&t.push(e)}function ki(t){return St(t)===t.length}function Ci(t,e,i){var n=e.visible;if(S(n))return n;var s=t.pointVisibility;return s?s[i]:void 0}function Ii(t){for(var e=t.data,i=[],s=0,r=0,o=0;o<e.length;o++){var a=It.current.bindPoint(t,o),h=a.valueFields.value;V(h)&&(h=parseFloat(h)),n(h)?(a.visible=!1!==Ci(t,a.fields,o),a.value=Math.abs(h),i.push(a),a.visible&&(s+=a.value),0!==h&&r++):i.push(null)}return{total:s,points:i,count:r}}function Pi(t){for(var e=t.length,i=0,n=0;n<e;n++)i=Math.max(i,t[n].data.length);return i}function Ti(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function Ei(t,i,n,s){void 0===n&&(n={}),void 0===s&&(s=!1);var r=n.defaults=n.defaults||{},o=n.depth=n.depth||0,a=!1;if(n.excluded=n.excluded||[],o>5)return null;for(var h in t)if(!L(h,n.excluded)&&e.hasOwnProperty(t,h)){var l=t[h];M(l)?(a=!0,s||(t[h]=O(l(i),r[h]))):B(l)&&(s||(n.defaults=r[h]),n.depth++,a=Ei(l,i,n,s)||a,n.depth--)}return a}function Ri(t,e){for(var i=[],n=[].concat(e),s=0;s<t.length;s++){var r=t[s];L(r.type,n)&&i.push(r)}return i}var Vi=new WeakMap;function Li(t,e,i){if(null===e||"object"!=typeof e)return F(i,t);var n=Vi.get(e);return n||(n=F(i,t),Vi.set(e,n)),n}function Mi(t){var e=t.overlay;return e&&e.gradient&&"none"!==e.gradient}function Oi(t){return S(t)&&null!==t}function Bi(t,e){var i=t.type,n=e instanceof Date;return!i&&n||Ti(i,h)}function Fi(t){return 1===t.length?t[0]:t}var Di=/area/i;function Hi(t,i){var n=It.current.bindPoint(t,null,i).valueFields;for(var s in n)if(e.convertableToNumber(n[s]))return!0}function zi(t){var e,i,n=t.start,s=t.dir,r=t.min,o=t.max,a=t.getter,h=t.hasItem,l=t.series,c=n;do{h(c+=s)&&(e=Hi(l,(i=a(c)).item))}while(r<=c&&c<=o&&!e);if(e)return i}function Ni(t,e,i,n,s){var r=e.min,o=e.max,a=r>0&&r<i,h=o+1<i;if(a||h){var l,c,u,d=function(t){return t.missingValues?t.missingValues:Di.test(t.type)||t.stack?Gt:Wt}(t);if(d!==Wt)a&&(l=n(r-1)),h&&(c=n(o+1));else a&&(l=Hi(t,(u=n(r-1)).item)?u:zi({start:r,dir:-1,min:0,max:i-1,getter:n,hasItem:s,series:t})),h&&(c=Hi(t,(u=n(o+1)).item)?u:zi({start:o,dir:1,min:0,max:i-1,getter:n,hasItem:s,series:t}));l&&(t._outOfRangeMinPoint=l),c&&(t._outOfRangeMaxPoint=c)}}var Gi=I.extend({init:function(t,e){I.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this.categoryAxis=t.seriesCategoryAxis(e.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=D({},n,{vertical:!this.options.invertAxes},t)}return i},plotValue:function(t){if(!t)return 0;if(this.options.isStacked100&&n(t.value)){for(var e=t.categoryIx,i=this.categoryPoints[e],s=[],r=0,o=0;o<i.length;o++){var a=i[o];if(a){var h=t.series.stack,l=a.series.stack;if(h&&l&&h.group!==l.group)continue;n(a.value)&&(r+=Math.abs(a.value),s.push(Math.abs(a.value)))}}if(r>0)return t.value/r}return t.value},plotRange:function(t,i){var n=this;void 0===i&&(i=0);var r=this.categoryPoints[t.categoryIx];if(this.options.isStacked){var o=this.plotValue(t),a=o>=0,h=i,l=!1,c=S(t.series.stack)?t.series.stack:this.options.defaultStack,u=function(t){return!0===t||typeof t===s.OBJECT&&!t.group};if(c)for(var d=0;d<r.length;d++){var p=r[d];if(t===p)break;var f=S(p.series.stack)?p.series.stack:n.options.defaultStack;if(f&&((typeof c!==s.STRING||c===f)&&(!u(c)||u(f))&&(!c.group||c.group===f.group))){var g=n.plotValue(p);(g>=0&&a||g<0&&!a)&&(0!==i&&0===g||(h+=g,o+=g,l=!0,n.options.isStacked100&&(o=Math.min(o,1))))}}return l&&(h-=i),[h,o]}var v=t.series,x=this.seriesValueAxis(v),m=this.categoryAxisCrossingValue(x);return[m,e.convertableToNumber(t.value)?t.value:m]},stackLimits:function(t,e){for(var i=r,n=o,s=0;s<this.categoryPoints.length;s++){var a=this.categoryPoints[s];if(a)for(var h=0;h<a.length;h++){var l=a[h];if(l&&(l.series.stack===e||l.series.axis===t)){var c=this.plotRange(l,0)[1];S(c)&&isFinite(c)&&(n=Math.max(n,c),i=Math.min(i,c))}}}return{min:i,max:n}},updateStackRange:function(){var t=this,i=this.options,n=i.isStacked,s=i.series,a={};if(n)for(var h=0;h<s.length;h++){var l=s[h],c=l.axis,u=c+l.stack,d=a[u];if(!d){d=t.stackLimits(c,l.stack);var p=t.errorTotals;p&&(p.negative.length&&(d.min=Math.min(d.min,e.sparseArrayLimits(p.negative).min)),p.positive.length&&(d.max=Math.max(d.max,e.sparseArrayLimits(p.positive).max))),d.min!==r||d.max!==o?a[u]=d:d=null}d&&(t.valueAxisRanges[c]=d)}},addErrorBar:function(t,e,i){var s,r=t.value,o=t.series,h=t.seriesIx,l=t.options.errorBars,c=e.fields[Bt],u=e.fields[Ft];n(c)&&n(u)?s={low:c,high:u}:l&&S(l.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[h]=this.seriesErrorRanges[h]||new Et(l.value,o,a),s=this.seriesErrorRanges[h].getErrorRange(r,l.value)),s&&(t.low=s.low,t.high=s.high,this.addPointErrorBar(t,i))},addPointErrorBar:function(t,e){var i=!this.options.invertAxes,n=t.options.errorBars,s=t.series,r=t.low,o=t.high;if(this.options.isStacked){var a=this.stackedErrorRange(t,e);r=a.low,o=a.high}else{var h={categoryIx:e,series:s};this.updateRange({value:r},h),this.updateRange({value:o},h)}var l=new wi(r,o,i,this,s,n);t.errorBars=[l],t.append(l)},stackedErrorRange:function(t,e){var i=this.plotRange(t,0)[1]-t.value,n=t.low+i,s=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},n<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,n)),s>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,s)),{low:n,high:s}},addValue:function(e,i){var n=i.categoryIx,s=i.series,r=i.seriesIx,o=this.categoryPoints[n];o||(this.categoryPoints[n]=o=[]);var a=this.seriesPoints[r];a||(this.seriesPoints[r]=a=[]);var h=this.createPoint(e,i);h&&(t.extend(h,i),h.owner=this,h.noteText=e.fields.noteText,S(h.dataItem)||(h.dataItem=s.data[n]),this.addErrorBar(h,e,n)),this.points.push(h),a.push(h),o.push(h),this.updateRange(e.valueFields,i)},evalPointOptions:function(t,e,i){var n=i.categoryIx,s=i.category,r=i.series,o=i.seriesIx,a={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]},h=this._evalSeries[o];S(h)||(this._evalSeries[o]=h=Ei(t,{},a,!0));var l=t;return h&&Ei(l=D({},l),{value:e,category:s,index:n,series:r,dataItem:r.data[n]},a),l},updateRange:function(t,e){var i=e.series.axis,n=t.value,s=this.valueAxisRanges[i];isFinite(n)&&null!==n&&((s=this.valueAxisRanges[i]=s||{min:r,max:o}).min=Math.min(s.min,n),s.max=Math.max(s.max,n))},seriesValueAxis:function(t){var e=this.plotArea,i=t.axis,n=i?e.namedValueAxes[i]:e.valueAxis;if(!n)throw new Error("Unable to locate value axis with name "+i);return n},reflow:function(t){var e=this,i=this.categorySlots=[],n=this.points,s=this.categoryAxis,r=0;this.traverseDataPoints((function(t,o){var a=o.categoryIx,h=o.series,l=e.seriesValueAxis(h),c=n[r++],u=i[a];if(u||(i[a]=u=e.categorySlot(s,a,l)),c){var d=e.plotRange(c,l.startValue()),p=e.valueSlot(l,d);if(p){var f=e.pointSlot(u,p);c.aboveAxis=e.aboveAxis(c,l),c.stackValue=d[1],e.options.isStacked100&&(c.percentage=e.plotValue(c)),e.reflowPoint(c,f)}else c.visible=!1}})),this.reflowCategories(i),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t},valueSlot:function(t,e){return t.getSlot(e[0],e[1],!this.options.clip)},limitPoints:function(){for(var t=this.categoryPoints,e=t[0].concat(H(t)),i=0;i<e.length;i++)e[i]&&this.limitPoint(e[i])},limitPoint:function(t){var e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)},aboveAxis:function(t,e){var i=this.categoryAxisCrossingValue(e),n=t.value;return e.options.reverse?n<i:n>=i},categoryAxisCrossingValue:function(t){var e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0},reflowPoint:function(t,e){t.reflow(e)},reflowCategories:function(){},pointSlot:function(t,e){var i=this.options.invertAxes,n=i?e:t,s=i?t:e;return new T(n.x1,s.y1,n.x2,s.y2)},categorySlot:function(t,e){return t.getSlot(e)},traverseDataPoints:function(t){for(var e=this,i=this.options.series,n=Pi(i),s=i.length,r=0;r<s;r++)e._outOfRangeCallback(i[r],"_outOfRangeMinPoint",r,t);for(var o=0;o<n;o++)for(var a=0;a<s;a++){var h=i[a],l=e.categoryAxis.categoryAt(o);t(e.plotArea.bindPoint(h,o),{category:l,categoryIx:o,categoriesCount:n,series:h,seriesIx:a})}for(var c=0;c<s;c++)e._outOfRangeCallback(i[c],"_outOfRangeMaxPoint",c,t)},_outOfRangeCallback:function(t,e,i,n){var s=t[e];if(s){var r=s.categoryIx;n(this.plotArea.bindPoint(t,r,s.item),{category:s.category,categoryIx:r,series:t,seriesIx:i,dataItem:s.item})}},formatPointValue:function(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)},pointValue:function(t){return t.valueFields.value}});R(Gi,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});var Wi={click:function(t,e){return t.trigger(De,this.eventArgs(e))},hover:function(t,e){return t.trigger(He,this.eventArgs(e))},over:function(t,e){return t.trigger(ze,this.eventArgs(e))},out:function(t,e){return t.trigger(Ne,this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:z(t),originalEvent:t,point:this}}},qi={createNote:function(){var t=this.options.notes,i=this.noteText||t.label.text;!1!==t.visible&&S(i)&&null!==i&&(this.note=new e.Note({value:this.value,text:i,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};function Xi(){var t,e,i="";for(t=0;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(i+="-"),i+=(12===t?4:16===t?3&e|8:e).toString(16);return i}var Yi=I.extend({init:function(t,e){I.fn.init.call(this),this.value=t,this.options=e,this.aboveAxis=O(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=Xi()},render:function(){var t=this.options.markers;this._rendered||(this._rendered=!0,t.visible&&t.size&&(this.marker=this.createMarker(),this.append(this.marker)),this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},createLabel:function(){var t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))},createLabelElement:function(t){return new N(this.getLabelText(t),D({align:l,vAlign:l,margin:{left:5,right:5},zIndex:O(t.zIndex,this.series.zIndex)},t),this.pointData())},getLabelText:function(t){var e=G(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value},getAriaLabelText:function(){var t=this.options.labels,i=e.getAriaTemplate(t);return i?i(this.pointData()):this.getLabelText(t)},markerBorder:function(){var t=this.options.markers,e=t.background,i=D({color:this.color},t.border);return S(i.color)||(i.color=new gt(e).brightness(Mt).toHex()),i},createVisual:function(){},createMarker:function(){var t=this.options.markers;return new W({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:t.opacity,zIndex:O(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual,accessibilityOptions:D({ariaLabel:this.getAriaLabelText(this.options.labels)},this.options.accessibility)},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},markerBox:function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},reflow:function(t){var e=this.options,i=this.aboveAxis,n=e.vertical;this.render(),this.box=t;var s=t.clone();if(n?i?s.y1-=s.height():s.y2+=s.height():i?s.x1+=s.width():s.x2-=s.width(),this._childBox=s,this.marker&&this.marker.reflow(s),this.reflowLabel(s),this.errorBars)for(var r=0;r<this.errorBars.length;r++)this.errorBars[r].reflow(s);if(this.note){var o=this.markerBox();if(!e.markers.visible||!e.markers.size){var a=o.center();o=new T(a.x,a.y,a.x,a.y)}this.note.reflow(o)}},reflowLabel:function(t){var e=this.options,i=this.label,n=e.labels.position;i&&(n=(n=n===Xt?c:n)===Yt?u:n,i.reflow(t),i.box.alignTo(this.markerBox(),n),i.reflow(i.box))},createHighlight:function(){var t=this.options.highlight.markers,e=this.markerBorder().color,i=this.options.markers,n=i.size+(i.border.width||0)+(t.border.width||0),s=new W({type:i.type,width:n,height:n,rotation:i.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:O(t.border.opacity,1)},opacity:O(t.opacity,1)});return s.reflow(this._childBox),s.getElement()},highlightVisual:function(){return(this.marker||{}).visual},highlightVisualArgs:function(){var t,e,i=this.marker;if(i)e=i.paddingBox.toRect(),t=i.visual;else{var n=this.options.markers.size,s=n/2,r=this.box.center();e=new vt.Rect([r.x-s,r.y-s],[n,n])}return{options:this.options,rect:e,visual:t}},createFocusHighlight:function(){var t=this.options.markers,e=this.options.accessibility.highlight,i=t.size+(t.border.width||0),n=new W({type:t.type,width:i,height:i,rotation:t.rotation,background:e.color,border:e.border,opacity:e.opacity,padding:e.border.width/2,zIndex:e.zIndex});return n.reflow(this._childBox),n.getElement()},tooltipAnchor:function(){var t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){var i,n,s=t.x2+5,r=d;return this.aboveAxis?(i=t.y1,n=u):(i=t.y2,n=c),{point:new P(s,i),align:{horizontal:r,vertical:n}}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){return this.markerBox().overlaps(t)},unclipElements:function(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}},focusVisual:function(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",this._id),this.toggleFocusHighlight(!0))},clearFocusFromVisual:function(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",""),this.toggleFocusHighlight(!1))},getIndex:function(){return S(this.categoryIx)?this.categoryIx:this.pointIx}});Yi.prototype.defaults={vertical:!0,markers:{visible:!0,background:p,size:8,type:f,border:{width:2},opacity:1},labels:{visible:!1,position:Xt,margin:q(3),padding:q(4),animation:{type:Lt,delay:Vt}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:s.HIGHLIGHT_ZINDEX},errorBars:{line:{width:1}},accessibility:{tabIndex:0,role:si,className:ri,ariaRoleDescription:oi}},D(Yi.prototype,Wi),D(Yi.prototype,qi);var Ui=I.extend({init:function(t,e,i){I.fn.init.call(this),this.linePoints=t,this.series=e,this.seriesIx=i},points:function(){return this.toGeometryPoints(this.linePoints)},toGeometryPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&!1!==t[i].visible&&e.push(t[i]._childBox.toRect().center());return e},createVisual:function(){var t=this,e=this.series.visual;e?(this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){return t.segmentVisual(),t.visual}}),this.visual&&!S(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()},segmentVisual:function(){var t=this.options,e=this.series,i=e.color,n=e._defaults;M(i)&&n&&(i=n.color);var s=lt.fromPoints(this.points(),{stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&s.close(),this.visual=s},aliasFor:function(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)}});R(Ui,{closed:!1});var Zi={calculateStepPoints:function(t){for(var e=this.parent.plotArea.seriesCategoryAxis(this.series).options,i=e.justified,n=e.vertical,s=e.reverse,r=n?g:v,o=n?v:g,a=s?2:1,h=a,l=ji(t[0],r,a,o,h),c=[l],u=1;u<t.length;u++){var d=ji(t[u],r,a,o,h);if(l[r]!==d[r]){var p=new xt;p[r]=l[r],p[o]=d[o],c.push(p,d)}l=d}return i?l!==H(c)&&c.push(l):c.push(ji(H(t),r,a,o,s?1:2)),c}};function ji(t,e,i,n,s){var r=t.box,o=new xt;return o[e]=r[e+i],o[n]=r[n+s],o}var $i=Ui.extend({points:function(){return this.calculateStepPoints(this.linePoints)}});D($i.prototype,Zi);var Ki=Ui.extend({segmentVisual:function(){var t=this.series,e=t._defaults,i=t.color;M(i)&&e&&(i=e.color);var n=new X(this.options.closed).process(this.points()),s=new lt({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});s.segments.push.apply(s.segments,n),this.visual=s}}),Qi={renderSegments:function(){var t,e=this,i=this.options,n=this.seriesPoints,s=i.series,r=n.length;this._segments=[];for(var o=0;o<r;o++){for(var a=s[o],h=e.sortPoints(n[o]),l=h.length,c=[],u=0;u<l;u++){var d=h[u];d?c.push(d):e.seriesMissingValues(a)!==Wt&&(c.length>1&&(t=e.createSegment(c,a,o,t),e._addSegment(t)),c=[])}c.length>1&&(t=e.createSegment(c,a,o,t),e._addSegment(t))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t),t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?Gt:e||Wt},getNearestPoint:function(t,e,i){for(var n,s=new P(t,e),o=this.seriesPoints[i],a=r,h=0;h<o.length;h++){var l=o[h];if(l&&S(l.value)&&null!==l.value&&!1!==l.visible){var c=l.box.center().distanceTo(s);c<a&&(n=l,a=c)}}return n}},Ji=ct.extend({setup:function(){this._setEnd(this.options.box.x1)},step:function(t){var i=this.options.box;this._setEnd(e.interpolateValue(i.x1,i.x2,t))},_setEnd:function(t){var e=this.element,i=e.segments,n=i[1].anchor(),s=i[2].anchor();e.suspend(),n.setX(t),e.resume(),s.setX(t)}});R(Ji,{duration:Vt}),ut.current.register("clip",Ji);var tn={createAnimation:function(){var t=this.getRoot();if(t&&!1!==(t.options||{}).transitions){var e=t.size(),i=lt.fromRect(e.toRect());this.visual.clip(i),this.animation=new Ji(i,{box:e}),Ai(this.options.series)&&this._setChildrenAnimation(i)}},_setChildrenAnimation:function(t){for(var e=this.animationPoints(),i=0;i<e.length;i++){var n=e[i];n&&n.visual&&S(n.visual.options.zIndex)&&n.visual.clip(t)}}},en=Gi.extend({render:function(){Gi.fn.render.call(this),this.updateStackRange(),this.renderSegments()},pointType:function(){return Yi},createPoint:function(t,e){var i=e.series,n=e.seriesIx,s=this.seriesMissingValues(i),r=t.valueFields.value;if(!S(r)||null===r){if(s!==Gt)return null;r=0}var o=this.pointOptions(i,n);o=this.evalPointOptions(o,r,e);var a=t.fields.color||i.color;M(i.color)&&(a=o.color);var h=new Yi(r,o);return h.color=a,this.append(h),h},plotRange:function(t){var e=this.plotValue(t);if(this.options.isStacked)for(var i=t.categoryIx,n=this.categoryPoints[i],s=0;s<n.length;s++){var r=n[s];if(t===r)break;e+=this.plotValue(r),this.options.isStacked100&&(e=Math.min(e,1))}return[e,e]},createSegment:function(t,e,i){var n=e.style;return new(n===Zt?$i:n===Ut?Ki:Ui)(t,e,i)},animationPoints:function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e.concat(this._segments)},supportsPointInactiveOpacity:function(){return!1}});D(en.prototype,Qi,tn);var nn=Ui.extend({init:function(t,e,i,n,s){Ui.fn.init.call(this,t,e,i),this.prevSegment=n,this.stackPoints=s},createVisual:function(){var t=this.series,e=t._defaults,i=t.line||{},n=t.color;M(n)&&e&&(n=e.color),this.visual=new dt({zIndex:t.zIndex}),this.createFill({fill:{color:n,opacity:t.opacity},stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:D({color:n,opacity:t.opacity,lineCap:"butt"},i)})},strokeSegments:function(){var t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t},createStrokeSegments:function(){return this.segmentsFromPoints(this.points())},stackSegments:function(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)},createStackSegments:function(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()},segmentsFromPoints:function(t){return t.map((function(t){return new vt.Segment(t)}))},createStroke:function(t){var e=new lt(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)},hasStackSegment:function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},createFill:function(t){var e=this.strokeSegments(),i=e.slice(0),n=this.hasStackSegment();if(n){var s=this.stackSegments();Y(i,s)}var r=new lt(t);r.segments.push.apply(r.segments,i),!n&&e.length>1&&this.fillToAxes(r),this.visual.append(r)},fillToAxes:function(t){var e=this.parent,i=e.options.invertAxes,n=e.seriesValueAxis(this.series),s=e.categoryAxisCrossingValue(n),r=n.getSlot(s,s,!0),o=this.strokeSegments(),a=o[0].anchor(),h=H(o).anchor(),l=i?r.x1:r.y1;i?t.lineTo(l,h.y).lineTo(l,a.y):t.lineTo(h.x,l).lineTo(a.x,l)}}),sn=nn.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},createStackSegments:function(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()}});D(sn.prototype,Zi);var rn=nn.extend({createStrokeSegments:function(){var t=new X(this.options.closed),e=this.points();return t.process(e)},createStackSegments:function(){for(var t=this.strokeSegments(),e=[],i=t.length-1;i>=0;i--){var n=t[i];e.push(new vt.Segment(n.anchor(),n.controlOut(),n.controlIn()))}return e}}),on=en.extend({createSegment:function(t,e,i,n){var s,r,o=this.options.isStacked,a=(e.line||{}).style;o&&i>0&&n&&("gap"!==this.seriesMissingValues(e)?(r=n.linePoints,s=n):r=this._gapStackPoints(t,i,a));return new(a===Zt?sn:a===Ut?rn:nn)(t,e,i,s,r)},reflow:function(t){en.fn.reflow.call(this,t);var e=this._stackPoints;if(e)for(var i=0;i<e.length;i++){var n=e[i],s=this.categoryAxis.getSlot(n.categoryIx);n.reflow(s)}},_gapStackPoints:function(t,e,i){var n=this,s=this.seriesPoints,r=t[0].categoryIx,o=t.length;r<0&&(r=0,o--);var a=r+o,h=this.seriesOptions[0]._outOfRangeMinPoint?1:0,l=[];this._stackPoints=this._stackPoints||[];for(var c=r;c<a;c++){var u=c+h,d=e,p=void 0;do{p=s[--d][u]}while(d>0&&!p);if(p)i!==Zt&&c>r&&!s[d][u-1]&&l.push(n._previousSegmentPoint(c,u,u-1,d)),l.push(p),i!==Zt&&c+1<a&&!s[d][u+1]&&l.push(n._previousSegmentPoint(c,u,u+1,d));else{var f=n._createGapStackPoint(c);n._stackPoints.push(f),l.push(f)}}return l},_previousSegmentPoint:function(t,e,i,n){for(var s,r=this.seriesPoints,o=n;o>0&&!s;)s=r[--o][i];return s?s=r[o][e]:(s=this._createGapStackPoint(t),this._stackPoints.push(s)),s},_createGapStackPoint:function(t){var e=this.pointOptions({},0),i=new Yi(0,e);return i.categoryIx=t,i.series={},i},seriesMissingValues:function(t){return t.missingValues||Gt},supportsPointInactiveOpacity:function(){return!1}}),an=i.extend({init:function(){this.axisRanges={}},update:function(t){var e=this.axisRanges;for(var i in t){var n=t[i],s=e[i];e[i]=s=s||{min:r,max:o},s.min=Math.min(s.min,n.min),s.max=Math.max(s.max,n.max)}},reset:function(t){this.axisRanges[t]=void 0},query:function(t){return this.axisRanges[t]}}),hn=I.extend({init:function(t,e,i){I.fn.init.call(this,e),this.textBox=new N(t,this.options,i),this.append(this.textBox)},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(t){var e=this.options,i=e.vertical,n=e.aboveAxis,s=this.children[0],r=s.options,o=s.box,a=s.options.padding,h=t;r.align=i?l:d,r.vAlign=i?c:l,e.position===di?i?(r.vAlign=c,!n&&o.height()<t.height()&&(r.vAlign=u)):r.align=n?x:d:e.position===l?(r.vAlign=l,r.align=l):e.position===pi?i?r.vAlign=n?u:c:r.align=n?d:x:e.position===fi&&(i?h=n?new T(t.x1,t.y1-o.height(),t.x2,t.y1):new T(t.x1,t.y2,t.x2,t.y2+o.height()):(r.align=l,h=n?new T(t.x2,t.y1,t.x2+o.width(),t.y2):new T(t.x1-o.width(),t.y1,t.x1,t.y2))),e.rotation||(i?a.left=a.right=(h.width()-s.contentBox.width())/2:a.top=a.bottom=(h.height()-s.contentBox.height())/2),s.reflow(h)},alignToClipBox:function(t){var e=this.options.vertical?v:g,i=e+"1",n=e+"2",s=this.children[0],r=this.parent.box;if(r[i]<t[i]||t[n]<r[n]){var o=s.paddingBox.clone();o[i]=Math.max(r[i],t[i]),o[n]=Math.min(r[n],t[n]),this.reflow(o)}}});function ln(t,e){e&&(t.options.className=e.className,t.options.role=e.role,t.options.ariaLabel=e.ariaLabel,t.options.ariaRoleDescription=e.ariaRoleDescription,t.options.ariaChecked=e.ariaChecked)}R(hn,{position:fi,margin:q(3),padding:q(4),color:m,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:Lt,delay:Vt},zIndex:2});var cn={addAccessibilityAttributesToVisual:function(){this._id=this._id||Xi();var t=D({ariaLabel:this.getAriaLabelText()},this.options.accessibility);ln(this.visual,t)},getAriaLabelText:function(){var t=this.options.labels,i=e.getAriaTemplate(t);return i?i(this.pointData()):this.getLabelText(t)},focusVisual:function(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0)},clearFocusFromVisual:function(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1)}},un=I.extend({init:function(t,e){I.fn.init.call(this),this.options=e,this.color=e.color||p,this.aboveAxis=O(this.options.aboveAxis,!0),this.value=t},render:function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},createLabel:function(){var t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))},createLabelElement:function(t){return new hn(this.getLabelText(t),D({vertical:this.options.vertical},t),this.pointData())},getLabelText:function(t){var e=G(t);return e?e(this.pointData()):this.formatValue(t.format)},formatValue:function(t){return this.owner.formatPointValue(this,t)},reflow:function(t){this.render();var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)},createVisual:function(){var t=this,e=this.box,i=this.options,n=i.visual;if(!1!==this.visible)if(I.fn.createVisual.call(this),this.addAccessibilityAttributesToVisual(),n){var s=this.rectVisual=n({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:e.toRect(),createVisual:function(){var e=new dt;return t.createRect(e),e},options:i});s&&this.visual.append(s)}else e.width()>0&&e.height()>0&&this.createRect(this.visual)},createRect:function(t){var e=this.options,i=e.border,n=S(i.opacity)?i.opacity:e.opacity,s=this.box.toRect();s.size.width=Math.round(s.size.width);var r=this.rectVisual=lt.fromRect(s,{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:n,dashType:i.dashType}}),o=this.box.width(),a=this.box.height();if((e.vertical?o:a)>6&&(E(r),(o<1||a<1)&&(r.options.stroke.lineJoin="round")),t.append(r),Mi(e)){var h=this.createGradientOverlay(r,{baseColor:this.color},D({end:e.vertical?void 0:[0,1]},e.overlay));t.append(h)}},createHighlight:function(t){var e=lt.fromRect(this.box.toRect(),t);return E(e)},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},createFocusHighlight:function(t){var e=this.options.accessibility.highlight.border.width,i=lt.fromRect(this.box.pad(e/2).toRect(),t);return E(i)},getBorderColor:function(){var t=this.color,e=this.options.border,i=e._brightness||Mt,n=e.color;return S(n)||(n=new gt(t).brightness(i).toHex()),n},tooltipAnchor:function(){var t,e,i=this,n=i.options,s=i.box,r=i.aboveAxis,o=this.owner.pane.clipBox()||s,a=d,h=c;if(n.vertical)t=Math.min(s.x2,o.x2)+5,r?e=Math.max(s.y1,o.y1):(e=Math.min(s.y2,o.y2),h=u);else{var l=Math.max(s.x1,o.x1),p=Math.min(s.x2,o.x2);n.isStacked?(h=u,r?(a=x,t=p):t=l,e=Math.max(s.y1,o.y1)-5):(r?t=p+5:(t=l-5,a=x),e=Math.max(s.y1,o.y1))}return{point:new P(t,e),align:{horizontal:a,vertical:h}}},overlapsBox:function(t){return this.box.overlaps(t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}},getIndex:function(){return this.categoryIx}});function dn(t,e){t.forEach(e)}function pn(t,e){for(var i=t.length,n=i-1;n>=0;n--)e(t[n],n-i-1)}D(un.prototype,Wi),D(un.prototype,qi),D(un.prototype,cn),un.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}},accessibility:{role:si,className:ri,ariaRoleDescription:oi}};var fn=I.extend({init:function(t){I.fn.init.call(this,t),this.forEach=t.rtl?pn:dn},reflow:function(t){var e=this.options,i=e.vertical,n=e.gap,s=e.spacing,r=this.children,o=r.length,a=i?v:g,h=o+n+s*(o-1),l=(i?t.height():t.width())/h,c=t[a+1]+l*(n/2);this.forEach(r,(function(e,i){var n=(e.box||t).clone();n[a+1]=c,n[a+2]=c+l,e.reflow(n),i<o-1&&(c+=l*s),c+=l}))}});R(fn,{vertical:!1,gap:0,spacing:0});var gn=I.extend({reflow:function(t){for(var e=this.options.vertical?g:v,i=this.children,n=i.length,s=this.box=new T,r=0;r<n;r++){var o=i[r];if(!1!==o.visible){var a=o.box.clone();a.snapTo(t,e),0===r&&(s=this.box=a.clone()),o.reflow(a),s.wrap(a)}}}});R(gn,{vertical:!0});var vn=Gi.extend({render:function(){Gi.fn.render.call(this),this.updateStackRange()},pointType:function(){return un},clusterType:function(){return fn},stackType:function(){return gn},stackLimits:function(t,e){return Gi.fn.stackLimits.call(this,t,e)},createPoint:function(t,e){var i=e.categoryIx,n=e.series,s=e.seriesIx,r=this.options,o=this.children,a=S(n.stack)?n.stack:r.defaultStack,h=this.pointValue(t),l=this.pointOptions(n,s),c=l.labels;a&&c.position===fi&&(c.position=di),l.isStacked=a;var u=t.fields.color||n.color;h<0&&l.negativeColor&&(u=l.negativeColor),l=this.evalPointOptions(l,h,e),M(n.color)&&(u=l.color);var d=new(this.pointType())(h,l);d.color=u;var p=o[i];p||(p=new(this.clusterType())({vertical:r.invertAxes,gap:r.gap,spacing:r.spacing,rtl:!r.invertAxes&&(this.chartService||{}).rtl}),this.append(p));r.isStacked?this.getStackWrap(a,p).append(d):p.append(d);return d},getStackWrap:function(t,e){var i,n=typeof t===s.OBJECT?t.group||!0:t,r=e.children;if(typeof n===s.STRING||!0===n)for(var o=0;o<r.length;o++)if(r[o]._stackGroup===n){i=r[o];break}i||((i=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=n,e.append(i));return i},categorySlot:function(t,e,i){var n=this.options,s=t.getSlot(e),r=i.startValue();if(n.isStacked){var o=i.getSlot(r,r,!0),a=n.invertAxes?g:v;s[a+1]=s[a+2]=o[a+1]}return s},reflowCategories:function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},createAnimation:function(){this._setAnimationOptions(),Gi.fn.createAnimation.call(this),Ai(this.options.series)&&this._setChildrenAnimation()},_setChildrenAnimation:function(){for(var t=this.points,e=0;e<t.length;e++){var i=t[e],n=i.visual;n&&S(n.options.zIndex)&&(i.options.animation=this.options.animation,i.createAnimation())}},_setAnimationOptions:function(){var t,e=this.options,i=e.animation||{};if(e.isStacked){var n=this.seriesValueAxis(e.series[0]);t=n.getSlot(n.startValue())}else t=this.categoryAxis.getSlot(0);i.origin=new xt(t.x1,t.y1),i.vertical=!e.invertAxes}});R(vn,{animation:{type:$t}});var xn=I.extend({init:function(t,e){I.fn.init.call(this,e),this.value=t},getLabelText:function(t){return this.formatValue(t.format)},reflow:function(t){var e=this,i=e.options,n=e.value,s=e.owner.seriesValueAxis(i),r=s.getSlot(n.open,n.close),o=s.getSlot(n.low,n.high);r.x1=o.x1=t.x1,r.x2=o.x2=t.x2,this.realBody=r;var a=o.center().x,h=[];h.push([[a,o.y1],[a,r.y1]]),h.push([[a,r.y2],[a,o.y2]]),this.lines=h,this.box=o.clone().wrap(r),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},reflowNote:function(){this.note&&this.note.reflow(this.box)},createVisual:function(){I.fn.createVisual.call(this),this.addAccessibilityAttributesToVisual(),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},mainVisual:function(t){var e=new dt;return this.createBody(e,t),this.createLines(e,t),e},createBody:function(t,e){var i=lt.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:O(e.border.opacity,e.opacity)}),E(i),t.append(i),Mi(e)&&t.append(this.createGradientOverlay(i,{baseColor:this.color},D({end:e.vertical?void 0:[0,1]},e.overlay)))},createLines:function(t,e){this.drawLines(t,e,this.lines,e.line)},drawLines:function(t,e,i,n){if(i)for(var s={stroke:{color:n.color||this.color,opacity:O(n.opacity,e.opacity),width:n.width,dashType:n.dashType,lineCap:"butt"}},r=0;r<i.length;r++){var o=lt.fromPoints(i[r],s);E(o),t.append(o)}},getBorderColor:function(){var t=this.options.border,e=t.color;return S(e)||(e=new gt(this.color).brightness(t._brightness).toHex()),e},createOverlay:function(){var t=lt.fromRect(this.box.toRect(),{fill:{color:p,opacity:0},stroke:null});this.visual.append(t)},createHighlight:function(){var t=this.options.highlight,e=this.color;this.color=t.color||this.color;var i=this.mainVisual(D({},this.options,{line:{color:this.getBorderColor()}},t));return this.color=e,i},highlightVisual:function(){return this._mainVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},tooltipAnchor:function(){var t=this.box,e=this.owner.pane.clipBox()||t;return{point:new P(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:d,vertical:c}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){return this.box.overlaps(t)},pointData:function(){return{dataItem:this.dataItem,value:this.value,meanPoints:this.meanPoints,medianPoints:this.medianPoints,whiskerPoints:this.whiskerPoints,stackValue:this.stackValue,series:this.series}},getIndex:function(){return this.categoryIx}});xn.prototype.createFocusHighlight=un.prototype.createFocusHighlight,R(xn,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},labels:{format:""},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},accessibility:{role:si,className:ri,ariaRoleDescription:oi}}),D(xn.prototype,Wi),D(xn.prototype,qi),D(xn.prototype,cn);var mn=Gi.extend({reflowCategories:function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},addValue:function(t,e){var i,n=e.categoryIx,s=e.category,r=e.series,o=e.seriesIx,a=this.children,h=this.options,l=t.valueFields,c=ki(this.splitValue(l)),u=r.data[n],d=this.categoryPoints[n];d||(this.categoryPoints[n]=d=[]),c&&(i=this.createPoint(t,e));var p=a[n];p||(p=new fn({vertical:h.invertAxes,gap:h.gap,spacing:h.spacing,rtl:!h.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),i&&(this.updateRange(l,e),p.append(i),i.categoryIx=n,i.category=s,i.series=r,i.seriesIx=o,i.owner=this,i.dataItem=u,i.noteText=t.fields.noteText),this.points.push(i),d.push(i)},pointType:function(){return xn},createPoint:function(t,e){var i=e.series,n=this.pointType(),s=t.valueFields,r=D({},i),o=t.fields.color||i.color;r=this.evalPointOptions(r,s,e),i.type!==te&&i.type!==he||s.open>s.close&&(o=t.fields.downColor||i.downColor||i.color),M(i.color)&&(o=r.color),r.vertical=!this.options.invertAxes;var a=new n(s,r);return a.color=o,a},splitValue:function(t){return[t.low,t.open,t.close,t.high]},updateRange:function(t,e){var i=e.series.axis,n=this.splitValue(t),s=this.valueAxisRanges[i]||{min:r,max:o};this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([s.min])),max:Math.max.apply(Math,n.concat([s.max]))}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.open,i.high,i.low,i.close,t.category)},animationPoints:function(){return this.points}});D(mn.prototype,tn);var yn=xn.extend({init:function(t,e){xn.fn.init.call(this,t,e),this.createNote()},reflow:function(t){var e,i,n=this,s=n.options,r=n.value,o=n.owner.seriesValueAxis(s);this.boxSlot=i=o.getSlot(r.q1,r.q3),this.realBody=i,this.reflowBoxSlot(t),this.whiskerSlot=e=o.getSlot(r.lower,r.upper),this.reflowWhiskerSlot(t);var a=o.getSlot(r.median);if(r.mean){var h=o.getSlot(r.mean);this.meanPoints=this.calcMeanPoints(t,h)}this.whiskerPoints=this.calcWhiskerPoints(i,e),this.medianPoints=this.calcMedianPoints(t,a),this.box=e.clone().wrap(i),this.reflowNote()},reflowBoxSlot:function(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2},reflowWhiskerSlot:function(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2},calcMeanPoints:function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},calcWhiskerPoints:function(t,e){var i=e.center().x;return[[[i-5,e.y1],[i+5,e.y1],[i,e.y1],[i,t.y1]],[[i-5,e.y2],[i+5,e.y2],[i,e.y2],[i,t.y2]]]},calcMedianPoints:function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},renderOutliers:function(t){for(var e=this.value,i=e.outliers||[],n=3*Math.abs(e.q3-e.q1),s=[],r=t.markers||{},o=0;o<i.length;o++){var a=i[o];r=a<e.q3+n&&a>e.q1-n?t.outliers:t.extremes;var h=D({},r.border);S(h.color)||(S(this.color)?h.color=this.color:h.color=new gt(r.background).brightness(Mt).toHex());var l=new W({type:r.type,width:r.size,height:r.size,rotation:r.rotation,background:r.background,border:h,opacity:r.opacity});l.value=a,s.push(l)}return this.reflowOutliers(s),s},reflowOutliers:function(t){for(var e=this,i=this.owner.seriesValueAxis(this.options),n=this.box.center(),s=0;s<t.length;s++){var r=t[s].value,o=i.getSlot(r);e.options.vertical?o.move(n.x):o.move(void 0,n.y),e.box=e.box.wrap(o),t[s].reflow(o)}},mainVisual:function(t){for(var e=xn.fn.mainVisual.call(this,t),i=this.renderOutliers(t),n=0;n<i.length;n++){var s=i[n].getElement();s&&e.append(s)}return e},createLines:function(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)},getBorderColor:function(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:xn.fn.getBorderColor.call(this)}});R(yn,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:s.CROSS,background:p,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:f,background:p,border:{width:2,opacity:1},opacity:0}}),D(yn.prototype,Wi);var _n=yn.extend({reflowBoxSlot:function(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2},reflowWhiskerSlot:function(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2},calcMeanPoints:function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},calcWhiskerPoints:function(t,e){var i=e.center().y;return[[[e.x1,i-5],[e.x1,i+5],[e.x1,i],[t.x1,i]],[[e.x2,i-5],[e.x2,i+5],[e.x2,i],[t.x2,i]]]},calcMedianPoints:function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}}),bn=mn.extend({addValue:function(t,e){var i,n=e.categoryIx,s=e.category,r=e.series,o=e.seriesIx,a=this.children,h=this.options,l=t.valueFields,c=ki(this.splitValue(l)),u=r.data[n],d=this.categoryPoints[n];d||(this.categoryPoints[n]=d=[]),c&&(i=this.createPoint(t,e));var p=a[n];p||(p=new fn({vertical:h.invertAxes,gap:h.gap,spacing:h.spacing,rtl:!h.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),i&&(this.updateRange(l,e),p.append(i),i.categoryIx=n,i.category=s,i.series=r,i.seriesIx=o,i.owner=this,i.dataItem=u),this.points.push(i),d.push(i)},pointType:function(){return this.options.invertAxes?_n:yn},splitValue:function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},updateRange:function(t,e){var i=e.series.axis,n=this.splitValue(t).concat(this.filterOutliers(t.outliers));S(t.mean)&&(n=n.concat(t.mean));var s=this.valueAxisRanges[i]||{min:r,max:o};this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([s.min])),max:Math.max.apply(Math,n.concat([s.max]))}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},filterOutliers:function(t){for(var e=(t||[]).length,i=[],n=0;n<e;n++){var s=t[n];S(s)&&null!==s&&i.push(s)}return i},supportsPointInactiveOpacity:function(){return!1}}),wn=bi.extend({getAxis:function(){var t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x}}),An=I.extend({init:function(t,e){I.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()},_initFields:function(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]},render:function(){this.traverseDataPoints(this.addValue.bind(this))},addErrorBar:function(t,e,i){var s,r=t.value[e],o=e+"Value",a=e+"ErrorLow",h=e+"ErrorHigh",l=i.seriesIx,c=i.series,u=t.options.errorBars,d=i[a],p=i[h];n(r)&&(n(d)&&n(p)&&(s={low:d,high:p}),u&&S(u[o])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new Et(u[o],c,e),s=this.seriesErrorRanges[e][l].getErrorRange(r,u[o])),s&&this.addPointErrorBar(s,t,e))},addPointErrorBar:function(t,e,i){var n=t.low,s=t.high,r=e.series,o=e.options.errorBars,a=i===v,h={};e[i+"Low"]=n,e[i+"High"]=s,e.errorBars=e.errorBars||[];var l=new wn(n,s,a,this,r,o);e.errorBars.push(l),e.append(l),h[i]=n,this.updateRange(h,r),h[i]=s,this.updateRange(h,r)},addValue:function(e,i){var n,s=e.x,r=e.y,o=i.seriesIx,a=this.options.series[o],h=this.seriesMissingValues(a),l=this.seriesPoints[o],c=e;Oi(s)&&Oi(r)||(c=this.createMissingValue(c,h)),c&&((n=this.createPoint(c,i))&&(t.extend(n,i),this.addErrorBar(n,g,i),this.addErrorBar(n,v,i)),this.updateRange(c,i.series)),this.points.push(n),l.push(n)},seriesMissingValues:function(t){return t.missingValues},createMissingValue:function(){},updateRange:function(t,e){var i=this.chartService.intl,n=e.xAxis,s=e.yAxis,a=t.x,h=t.y,l=this.xAxisRanges[n],c=this.yAxisRanges[s];Oi(a)&&(l=this.xAxisRanges[n]=l||{min:r,max:o},V(a)&&(a=F(i,a)),l.min=Math.min(l.min,a),l.max=Math.max(l.max,a)),Oi(h)&&(c=this.yAxisRanges[s]=c||{min:r,max:o},V(h)&&(h=F(i,h)),c.min=Math.min(c.min,h),c.max=Math.max(c.max,h))},evalPointOptions:function(t,e,i){var n=i.series,s=i.seriesIx,r={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]},o=this._evalSeries[s];S(o)||(this._evalSeries[s]=o=Ei(t,{},r,!0));var a=t;return o&&Ei(a=D({},t),{value:e,series:n,dataItem:i.dataItem},r),a},pointType:function(){return Yi},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=D({},n,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},createPoint:function(t,e){var i=e.series,n=this.pointOptions(i,e.seriesIx),s=e.color||i.color;n=this.evalPointOptions(n,t,e),M(i.color)&&(s=n.color);var r=new Yi(t,n);return r.color=s,this.append(r),r},seriesAxes:function(t){var e=t.xAxis,i=t.yAxis,n=this.plotArea,s=e?n.namedXAxes[e]:n.axisX,r=i?n.namedYAxes[i]:n.axisY;if(!s)throw new Error("Unable to locate X axis with name "+e);if(!r)throw new Error("Unable to locate Y axis with name "+i);return{x:s,y:r}},reflow:function(t){var e=this,i=this.points,n=!this.options.clip,s=0;this.traverseDataPoints((function(t,r){var o=i[s++],a=e.seriesAxes(r.series),h=a.x.getSlot(t.x,t.x,n),l=a.y.getSlot(t.y,t.y,n);if(o)if(h&&l){var c=e.pointSlot(h,l);o.reflow(c)}else o.visible=!1})),this.box=t},pointSlot:function(t,e){return new T(t.x1,e.y1,t.x2,e.y2)},traverseDataPoints:function(t){for(var e=this.options.series,i=this.seriesPoints,n=0;n<e.length;n++){var s=e[n];i[n]||(i[n]=[]);for(var r=0;r<s.data.length;r++){var o=this.plotArea.bindPoint(s,r),a=o.valueFields,h=o.fields;t(a,D({pointIx:r,series:s,seriesIx:n,dataItem:s.data[r],owner:this},h))}}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y)},animationPoints:function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e}});R(An,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),D(An.prototype,tn);var Sn=Yi.extend({init:function(t,e){Yi.fn.init.call(this,t,e),this.category=t.category},createHighlight:function(){var t=this.options.highlight,e=t.border,i=this.options.markers,n=this.box.center(),s=(i.size+i.border.width+e.width)/2,r=new dt,o=new pt(new mt([n.x,n.y+s/5+e.width/2],s+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})}),a=new pt(new mt([n.x,n.y],s),{stroke:{color:e.color||new gt(i.background).brightness(Mt).toHex(),width:e.width,opacity:e.opacity},fill:{color:i.background,opacity:t.opacity}});return r.append(o,a),r},createFocusHighlight:function(t){var e=this.options.accessibility.highlight,i=this.options.markers,n=this.box.center(),s=(i.size+i.border.width)/2+e.border.width/2;return new pt(new mt([n.x,n.y],s),t)}});Sn.prototype.defaults=D({},Sn.prototype.defaults,{labels:{position:l},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),Sn.prototype.defaults.highlight.zIndex=void 0;var kn=An.extend({_initFields:function(){this._maxSize=o,An.fn._initFields.call(this)},addValue:function(t,e){null!==t.size&&(t.size>0||t.size<0&&e.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(t.size)),An.fn.addValue.call(this,t,e)):(this.points.push(null),this.seriesPoints[e.seriesIx].push(null))},reflow:function(t){this.updateBubblesSize(t),An.fn.reflow.call(this,t)},pointType:function(){return Sn},createPoint:function(t,e){var i=e.series,n=i.data.length,s=e.pointIx*(Vt/n),r={delay:s,duration:Vt-s,type:Qt},o=e.color||i.color;t.size<0&&i.negativeValues.visible&&(o=O(i.negativeValues.color,o));var a=D({labels:{animation:{delay:s,duration:Vt-s}}},this.pointOptions(i,e.seriesIx),{markers:{type:f,border:i.border,opacity:i.opacity,animation:r}});a=this.evalPointOptions(a,t,e),M(i.color)&&(o=a.color),a.markers.background=o;var h=new Sn(t,a);return h.color=o,this.append(h),h},updateBubblesSize:function(t){for(var e=this.options.series,i=Math.min(t.width(),t.height()),n=0;n<e.length;n++)for(var s=e[n],r=this.seriesPoints[n],o=(s.minSize||Math.max(.02*i,10))/2,a=(s.maxSize||.2*i)/2,h=Math.PI*o*o,l=(Math.PI*a*a-h)/this._maxSize,c=0;c<r.length;c++){var u=r[c];if(u){var d=Math.abs(u.value.size)*l,p=Math.sqrt((h+d)/Math.PI),f=O(u.options.zIndex,0)+(1-p/a);D(u.options,{zIndex:f,markers:{size:2*p,zIndex:f},labels:{zIndex:f+1}})}}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.size,t.category)},createAnimation:function(){},createVisual:function(){}});R(kn,{tooltip:{format:"{3}"},labels:{format:"{3}"}});var Cn=W.extend({});D(Cn.prototype,Wi);var In=I.extend({init:function(t,e){I.fn.init.call(this,e),this.aboveAxis=this.options.aboveAxis,this.color=e.color||p,this.value=t},render:function(){var t=this.options;this._rendered||(this._rendered=!0,S(this.value.target)&&(this.target=new Cn({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:c,align:x}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())},createLabel:function(){var t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))},createLabelElement:function(t){return new hn(this.getLabelText(t),t,this.pointData())},getLabelText:function(t){var e=G(t);return e?e(this.pointData()):this.formatValue(t.format)},reflow:function(t){this.render();var e=this,i=e.options,n=e.target,s=e.owner,r=i.invertAxes,o=s.seriesValueAxis(this.options),a=s.categorySlot(s.categoryAxis,i.categoryIx,o),h=o.getSlot(this.value.target),l=r?h:a,c=r?a:h;if(n){var u=new T(l.x1,c.y1,l.x2,c.y2);n.options.height=r?u.height():i.target.line.width,n.options.width=r?i.target.line.width:u.width(),n.reflow(u)}var d=this.label;d&&(d.options.aboveAxis=this.aboveAxis,d.reflow(t)),this.note&&this.note.reflow(t),this.box=t},createVisual:function(){I.fn.createVisual.call(this),this.addAccessibilityAttributesToVisual();var t=this.options,e=lt.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:t.opacity},stroke:null});t.border.width>0&&e.options.set("stroke",{color:t.border.color||this.color,width:t.border.width,dashType:t.border.dashType,opacity:O(t.border.opacity,t.opacity)}),this.bodyVisual=e,E(e),this.visual.append(e)},createAnimation:function(){this.bodyVisual&&(this.animation=ct.create(this.bodyVisual,this.options.animation))},createHighlight:function(t){return lt.fromRect(this.box.toRect(),t)},highlightVisual:function(){return this.bodyVisual},highlightVisualArgs:function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},formatValue:function(t){return this.owner.formatPointValue(this,t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}},overlapsBox:function(t){return this.box.overlaps(t)},getIndex:function(){return this.categoryIx}});In.prototype.tooltipAnchor=un.prototype.tooltipAnchor,In.prototype.createFocusHighlight=un.prototype.createFocusHighlight,R(In,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}},accessibility:{role:si,className:ri,ariaRoleDescription:oi}}),D(In.prototype,Wi),D(In.prototype,qi),D(In.prototype,cn);var Pn=Gi.extend({init:function(t,e){!function(t){for(var e=t.series,i=0;i<e.length;i++){var n=e[i],s=n.data;!s||C(s[0])||B(s[0])||(n.data=[s])}}(e),Gi.fn.init.call(this,t,e)},reflowCategories:function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},plotRange:function(t){var e=t.series,i=this.seriesValueAxis(e),n=this.categoryAxisCrossingValue(i);return[n,t.value.current||n]},createPoint:function(t,e){var i=e.categoryIx,n=e.series,s=this.options,r=this.children,o=t.valueFields,a=D({vertical:!s.invertAxes,overlay:n.overlay,categoryIx:i,invertAxes:s.invertAxes},n),h=t.fields.color||n.color;a=this.evalPointOptions(a,o,e),M(n.color)&&(h=a.color);var l=new In(o,a);l.color=h;var c=r[i];return c||(c=new fn({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl}),this.append(c)),c.append(l),l},updateRange:function(t,e){var i=t.current,n=t.target,s=e.series.axis,a=this.valueAxisRanges[s];S(i)&&!isNaN(i)&&S(n&&!isNaN(n))&&((a=this.valueAxisRanges[s]=a||{min:r,max:o}).min=Math.min(a.min,i,n),a.max=Math.max(a.max,i,n))},formatPointValue:function(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)},pointValue:function(t){return t.valueFields.current},aboveAxis:function(t){return t.value.current>0},createAnimation:function(){var t=this.points;this._setAnimationOptions();for(var e=0;e<t.length;e++){var i=t[e];i.options.animation=this.options.animation,i.createAnimation()}}});Pn.prototype._setAnimationOptions=vn.prototype._setAnimationOptions,R(Pn,{animation:{type:$t}});var Tn=i.extend({init:function(t,e){this.chartService=t,this.options=D({},this.options,e)},getStyle:function(t,e){var i=t.background,n=t.border.color;if(e){var s=e.color||e.options.color;i=O(i,s),n=O(n,s)}var r=q(t.padding||{},"auto");return{backgroundColor:i,borderColor:n,font:t.font,color:t.color,opacity:t.opacity,borderWidth:U(t.border.width),paddingTop:U(r.top),paddingBottom:U(r.bottom),paddingLeft:U(r.left),paddingRight:U(r.right)}},show:function(t,e,i){t.format=e.format;var n=this.getStyle(e,i);t.style=n;var s=new gt(n.backgroundColor);S(e.color)||s.isDark()||(t.className="k-chart-tooltip-inverse"),this.chartService.notify(ei,t),this.visible=!0},hide:function(){this.chartService&&this.chartService.notify(ii),this.visible=!1},destroy:function(){delete this.chartService}});R(Tn,{border:{width:1},opacity:1});var En=Tn.extend({init:function(t,e,i){Tn.fn.init.call(this,t,i),this.crosshair=e,this.formatService=t.format,this.initAxisName()},initAxisName:function(){var t,e=this.crosshair.axis;t=e.plotArea.categoryAxis?e.getCategory?"categoryAxis":"valueAxis":e.options.vertical?"yAxis":"xAxis",this.axisName=t},showAt:function(t){var e=this.crosshair.axis,i=this.options,n=e[i.stickyMode?"getCategory":"getValue"](t),s=n;i.format?s=this.formatService.auto(i.format,n):e.options.type===h&&(s=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],n)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:s,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},hide:function(){this.chartService.notify(ii,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},getAnchor:function(){var t,e,i,n=this.crosshair,s=this.options,r=s.position,o=s.padding,a=!n.axis.options.vertical,h=n.line.bbox();return a?(t=l,r===u?(e=c,i=h.bottomLeft().translate(0,o)):(e=u,i=h.topLeft().translate(0,-o))):(e=l,r===d?(t=x,i=h.topLeft().translate(-o,0)):(t=d,i=h.topRight().translate(o,0))),{point:i,align:{horizontal:t,vertical:e}}}});R(En,{padding:10});var Rn=I.extend({init:function(t,e,i){I.fn.init.call(this,i),this.axis=e,this.stickyMode=e instanceof Z;var n=this.options.tooltip;n.visible&&(this.tooltip=new En(t,this,D({},n,{stickyMode:this.stickyMode})))},showAt:function(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)},hide:function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},moveLine:function(){var t,e=this.axis,i=this.point,n=e.options.vertical,s=this.getBox(),r=n?v:g,o=new xt(s.x1,s.y1);if(t=n?new xt(s.x2,s.y1):new xt(s.x1,s.y2),i)if(this.stickyMode){var a=e.getSlot(e.pointCategoryIndex(i));o[r]=t[r]=a.center()[r]}else o[r]=t[r]=i[r];this.box=s,this.line.moveTo(o).lineTo(t)},getBox:function(){for(var t,e=this.axis,i=e.pane.axes,n=i.length,s=e.options.vertical,r=e.lineBox().clone(),o=s?g:v,a=0;a<n;a++){var h=i[a];h.options.vertical!==s&&(t?t.wrap(h.lineBox()):t=h.lineBox().clone())}return r[o+1]=t[o+1],r[o+2]=t[o+2],r},createVisual:function(){I.fn.createVisual.call(this);var t=this.options;this.line=new lt({stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},destroy:function(){this.tooltip&&this.tooltip.destroy(),I.fn.destroy.call(this)}});R(Rn,{color:m,width:2,zIndex:-1,tooltip:{visible:!1}});var Vn=I.extend({init:function(t,e){I.fn.init.call(this,t),this.pane=e},shouldClip:function(){for(var t=this.children,e=t.length,i=0;i<e;i++)if(!0===t[i].options.clip)return!0;return!1},_clipBox:function(){return this.pane.chartsBox()},createVisual:function(){if(this.visual=new dt({zIndex:0}),this.shouldClip()){var t=(this.clipBox=this._clipBox()).toRect(),e=lt.fromRect(t);E(e),this.visual.clip(e),this.unclipLabels()}},stackRoot:function(){return this},unclipLabels:function(){for(var t=this.children,e=this.clipBox,i=0;i<t.length;i++)for(var n=t[i].points||{},s=n.length,r=0;r<s;r++){var o=n[r];if(o&&!1!==o.visible&&o.overlapsBox&&o.overlapsBox(e))if(o.unclipElements)o.unclipElements();else{var a=o.label,h=o.note;a&&a.options.visible&&(a.alignToClipBox&&a.alignToClipBox(e),a.options.noclip=!0),h&&h.options.visible&&(h.options.noclip=!0)}}},destroy:function(){I.fn.destroy.call(this),delete this.parent}});Vn.prototype.isStackRoot=!0;var Ln=j.extend({init:function(t){j.fn.init.call(this,t),this.id="pane"+Mn++,this.createTitle(),this.content=new I,this.chartContainer=new Vn({},this),this.append(this.content),this.axes=[],this.charts=[]},createTitle:function(){var t=this.options.title;B(t)&&(t=D({},t,{align:t.position,position:c})),this.title=$.buildTitle(t,Ln.prototype.options.title),this.title&&this.append(this.title)},appendAxis:function(t){this.content.append(t),this.axes.push(t),t.pane=this},appendAxisAt:function(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this},appendChart:function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},empty:function(){var t=this.parent;if(t){for(var e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(var i=0;i<this.charts.length;i++)t.removeChart(this.charts[i])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},reflow:function(t){var e;H(this.children)===this.content&&(e=this.children.pop()),j.fn.reflow.call(this,t),e&&this.children.push(e),this.title&&(this.contentBox.y1+=this.title.box.height())},visualStyle:function(){var t=j.fn.visualStyle.call(this);return t.zIndex=-10,t},renderComplete:function(){this.options.visible&&this.createGridLines()},stackRoot:function(){return this},clipRoot:function(){return this},createGridLines:function(){for(var t=this.axes,e=t.concat(this.parent.axes),i=[],n=[],s=0;s<t.length;s++)for(var r=t[s],o=r.options.vertical,a=o?i:n,h=0;h<e.length;h++)if(0===a.length){var l=e[h];o!==l.options.vertical&&Y(a,r.createGridLines(l))}},refresh:function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()},chartsBox:function(){for(var t=this.axes,e=t.length,i=new T,n=0;n<e;n++){var s=t[n],r=s.options.vertical?v:g,o=s.lineBox();i[r+1]=o[r+1],i[r+2]=o[r+2]}if(0===i.x2)for(var a=this.parent.axes,h=a.length,l=0;l<h;l++){var c=a[l];if(!c.options.vertical){var u=c.lineBox();i.x1=u.x1,i.x2=u.x2}}return i},clipBox:function(){return this.chartContainer.clipBox},notifyRender:function(){var t=this.getService();t&&t.notify(ni,{pane:new wt(this),index:this.paneIndex,name:this.options.name})}}),Mn=1;Ln.prototype.isStackRoot=!0,R(Ln,{zIndex:-1,shrinkToFit:!0,title:{align:d},visible:!0});var On=I.extend({init:function(t,e,i){I.fn.init.call(this,e),this.initFields(t,e),this.series=t,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.data=[],this.axes=[],this.crosshairs=[],this.chartService=i,this.originalOptions=e,this.originalSeries=t,this._bindCache=new WeakMap,this.createPanes(),this.render(),this.createCrosshairs()},initFields:function(){},initSeries:function(){for(var t=this.series,e=0;e<t.length;e++)t[e].index=e},bindPoint:function(t,e,i){var n=this._bindCache.get(t);n||(n=[],this._bindCache.set(t,n));var s=n[e];return s||(s=n[e]=It.current.bindPoint(t,e,i)),s},createPanes:function(){for(var t=this.options.title||{},e=this.options.paneDefaults,i=this.options.panes||[],n=Math.max(i.length,1),s=[],r=D({title:{color:t.color}},e),o=0;o<n;o++){var a=D({},r,i[o]);V(a.title)&&(a.title=D({text:a.title},r.title));var h=new Ln(a);h.paneIndex=o,s.push(h),this.append(h)}this.panes=s},crosshairOptions:function(t){return t.options.crosshair},createCrosshairs:function(t){var e=this;void 0===t&&(t=this.panes);for(var i=0;i<t.length;i++)for(var n=t[i],s=0;s<n.axes.length;s++){var r=n.axes[s],o=e.crosshairOptions(r);if(o&&o.visible){var a=new Rn(e.chartService,r,o);e.crosshairs.push(a),n.content.append(a)}}},removeCrosshairs:function(t){for(var e=this.crosshairs,i=t.axes,n=e.length-1;n>=0;n--)for(var s=0;s<i.length;s++)if(e[n].axis===i[s]){e.splice(n,1);break}},hideCrosshairs:function(){for(var t=this.crosshairs,e=0;e<t.length;e++)t[e].hide()},findPane:function(t){for(var e,i=this.panes,n=0;n<i.length;n++)if(i[n].options.name===t){e=i[n];break}return e||i[0]},findPointPane:function(t){for(var e,i=this.panes,n=0;n<i.length;n++)if(i[n].box.containsPoint(t)){e=i[n];break}return e},appendAxis:function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},removeAxis:function(t){for(var e=[],i=0;i<this.axes.length;i++){var n=this.axes[i];t!==n?e.push(n):n.destroy()}this.axes=e},appendChart:function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},removeChart:function(t){for(var e=[],i=0;i<this.charts.length;i++){var n=this.charts[i];n!==t?e.push(n):n.destroy()}this.charts=e},addToLegend:function(t){for(var e=t.length,i=this.options.legend,n=i.labels||{},s=i.inactiveItems||{},r=s.labels||{},o=[],a=0;a<e;a++){var h=t[a],l=!1!==h.visible;if(!1!==h.visibleInLegend){var c=h.name,u=l?G(n):G(r)||G(n);u&&(c=u({text:Oi(c)?c:"",series:h}));var d=h._defaults,p=h.color;M(p)&&d&&(p=d.color);var f=void 0,g=void 0;l?(f={},g=p):(f={color:r.color,font:r.font},g=s.markers.color),Oi(c)&&""!==c&&o.push({text:c,labels:f,markerColor:g,series:h,active:l})}}Y(i.data,o)},groupAxes:function(t){for(var e=[],i=[],n=0;n<t.length;n++)for(var s=t[n].axes,r=0;r<s.length;r++){var o=s[r];o.options.vertical?i.push(o):e.push(o)}return{x:e,y:i,any:e.concat(i)}},groupSeriesByPane:function(){for(var t=this.series,e={},i=0;i<t.length;i++){var n=t[i],s=this.seriesPaneName(n);e[s]?e[s].push(n):e[s]=[n]}return e},filterVisibleSeries:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];!1!==n.visible&&e.push(n)}return e},reflow:function(t){var e=this.options.plotArea,i=this.panes,n=q(e.margin);this.box=t.clone().unpad(n),this.reflowPanes(),this.detachLabels(),this.reflowAxes(i),this.reflowCharts(i)},redraw:function(t){var e=[].concat(t);this.initSeries();var i=this.getRoot();i&&i.cleanGradients();for(var n=0;n<e.length;n++)this.removeCrosshairs(e[n]),e[n].empty();this._bindCache=new WeakMap,this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(var s=0;s<e.length;s++)e[s].refresh()},axisCrossingValues:function(t,e){for(var i=t.options,n=[].concat(i.axisCrossingValues||i.axisCrossingValue),s=e.length-n.length,r=n[0]||0,o=0;o<s;o++)n.push(r);return n},alignAxisTo:function(t,e,i,n){var s=t.getSlot(i,i,!0),r=t.options.reverse?2:1,o=e.getSlot(n,n,!0),a=e.options.reverse?2:1,h=t.box.translate(o[g+a]-s[g+r],o[v+a]-s[v+r]);t.pane!==e.pane&&h.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(h)},alignAxes:function(t,e){for(var i=this,n=t[0],s=e[0],r=this.axisCrossingValues(n,e),o=this.axisCrossingValues(s,t),a={},h={},l={},p={},f=0;f<e.length;f++){var g=e[f],v=g.pane,m=v.id,_=!1!==g.options.visible,b=Dn(t,v)||n,w=r;if(b!==n&&(w=i.axisCrossingValues(b,e)),i.alignAxisTo(g,b,o[f],w[f]),!g.options._overlap){K(g.lineBox().x1)===K(b.lineBox().x1)&&(a[m]&&g.reflow(g.box.alignTo(a[m].box,d).translate(-g.options.margin,0)),_&&(a[m]=g)),K(g.lineBox().x2)===K(b.lineBox().x2)&&(g._mirrored||(g.options.labels.mirror=!g.options.labels.mirror,g._mirrored=!0),i.alignAxisTo(g,b,o[f],w[f]),h[m]&&g.reflow(g.box.alignTo(h[m].box,x).translate(g.options.margin,0)),_&&(h[m]=g));var A=Dn(e,v)||s;A!==g&&(g.alignTo(A),g.reflow(g.box))}}for(var S=0;S<t.length;S++){var k=t[S],C=k.pane,I=C.id,P=!1!==k.options.visible,T=Dn(e,C)||s,E=o;T!==s&&(E=i.axisCrossingValues(T,t)),i.alignAxisTo(k,T,r[S],E[S]),k.options._overlap||(K(k.lineBox().y1)===K(T.lineBox().y1)&&(k._mirrored||(k.options.labels.mirror=!k.options.labels.mirror,k._mirrored=!0),i.alignAxisTo(k,T,r[S],E[S]),l[I]&&k.reflow(k.box.alignTo(l[I].box,c).translate(0,-k.options.margin)),P&&(l[I]=k)),K(k.lineBox().y2,y)===K(T.lineBox().y2,y)&&(p[I]&&k.reflow(k.box.alignTo(p[I].box,u).translate(0,k.options.margin)),P&&(p[I]=k)),0!==S&&(k.alignTo(n),k.reflow(k.box)))}},shrinkAxisWidth:function(t){for(var e=this.groupAxes(t).any,i=Fn(e),n=0,s=0;s<t.length;s++){var r=t[s];r.axes.length>0&&(n=Math.max(n,i.width()-r.contentBox.width()))}if(0!==n)for(var o=0;o<e.length;o++){var a=e[o];a.options.vertical||a.reflow(a.box.shrink(n,0))}},shrinkAxisHeight:function(t){for(var e,i=0;i<t.length;i++){var n=t[i],s=n.axes,r=Math.max(0,Fn(s).height()-n.contentBox.height());if(0!==r){for(var o=0;o<s.length;o++){var a=s[o];a.options.vertical&&a.reflow(a.box.shrink(0,r))}e=!0}}return e},fitAxes:function(t){for(var e=this.groupAxes(t).any,i=0,n=0;n<t.length;n++){var s=t[n],r=s.axes,o=s.contentBox;if(r.length>0){var a=Fn(r),h=Math.max(o.y1-a.y1,o.y2-a.y2);i=Math.max(i,o.x1-a.x1);for(var l=0;l<r.length;l++){var c=r[l];c.reflow(c.box.translate(0,h))}}}for(var u=0;u<e.length;u++){var d=e[u];d.reflow(d.box.translate(i,0))}},reflowAxes:function(t){for(var e=this.groupAxes(t),i=0;i<t.length;i++)this.reflowPaneAxes(t[i]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))},autoRotateAxisLabels:function(t){for(var e,i=this.panes,n=Hn(i),s=0;s<n.length;s++){n[s].autoRotateLabels()&&(e=!0)}if(e){for(var r=0;r<i.length;r++)this.reflowPaneAxes(i[r]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(i))}},reflowPaneAxes:function(t){var e=t.axes,i=e.length;if(i>0)for(var n=0;n<i;n++)e[n].reflow(t.contentBox)},reflowCharts:function(t){for(var e=this.charts,i=e.length,n=this.box,s=0;s<i;s++){var r=e[s].pane;r&&!L(r,t)||e[s].reflow(n)}},reflowPanes:function(){for(var t=this.box,e=this.panes,i=e.length,n=t.height(),s=0,r=t.y1,o=0;o<i;o++){var a=e[o],h=a.options.height;if(a.options.width=t.width(),a.options.height){if(h.indexOf&&h.indexOf("%")){var l=parseInt(h,10)/100;a.options.height=l*t.height()}a.reflow(t.clone()),n-=a.options.height}else s++}for(var c=0;c<i;c++){var u=e[c];u.options.height||(u.options.height=n/s)}for(var d=0;d<i;d++){var p=e[d],f=t.clone().move(t.x1,r);p.reflow(f),r+=p.options.height}},backgroundBox:function(){for(var t,e=this.axes,i=e.length,n=0;n<i;n++)for(var s=e[n],r=0;r<i;r++){var o=e[r];if(s.options.vertical!==o.options.vertical){var a=s.lineBox().clone().wrap(o.lineBox());t=t?t.wrap(a):a}}return t||this.box},chartsBoxes:function(){for(var t=this.panes,e=[],i=0;i<t.length;i++)e.push(t[i].chartsBox());return e},addBackgroundPaths:function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)t.paths.push(lt.fromRect(e[i].toRect()))},backgroundContainsPoint:function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)if(e[i].containsPoint(t))return!0},createVisual:function(){I.fn.createVisual.call(this);var t,e=this.options.plotArea,i=e.opacity,n=e.background,s=e.border;void 0===s&&(s={}),""!==(t=n)&&null!==t&&"none"!==t&&"transparent"!==t&&S(t)||(n=p,i=0);var r=this._bgVisual=new ft({fill:{color:n,opacity:i},stroke:{color:s.width?s.color:"",width:s.width,dashType:s.dashType},zIndex:-1});this.addBackgroundPaths(r),this.appendVisual(r)},pointsByCategoryIndex:function(t){var e=this.charts,i=[];if(null!==t)for(var n=0;n<e.length;n++){if("_navigator"!==e[n].pane.options.name){var s=e[n].categoryPoints[t];if(s&&s.length)for(var r=0;r<s.length;r++){var o=s[r];o&&S(o.value)&&null!==o.value&&i.push(o)}}}return i},pointsBySeriesIndex:function(t){return this.filterPoints((function(e){return e.series.index===t}))},pointsByPointIndex:function(t){return this.filterPoints((function(e){return e.getIndex()===t}))},pointsBySeriesName:function(t){return this.filterPoints((function(e){return e.series.name===t}))},filterPoints:function(t){for(var e=this.charts,i=[],n=0;n<e.length;n++)for(var s=e[n].points,r=0;r<s.length;r++){var o=s[r];o&&!1!==o.visible&&t(o)&&i.push(o)}return i},findPoint:function(t){for(var e=this.charts,i=0;i<e.length;i++)for(var n=e[i].points,s=0;s<n.length;s++){var r=n[s];if(r&&!1!==r.visible&&t(r))return r}},paneByPoint:function(t){for(var e=this.panes,i=0;i<e.length;i++){var n=e[i];if(n.box.containsPoint(t))return n}},detachLabels:function(){var t=this.groupAxes(this.panes),e=t.x,i=t.y;this.detachAxisGroupLabels(i,e),this.detachAxisGroupLabels(e,i)},detachAxisGroupLabels:function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n],r=s.pane,o=Dn(e,r)||e[0],a=n+i,h=this.createLabelAxis(s,a,o);if(h){i++;var l=r.axes.indexOf(s)+i;r.appendAxisAt(h,l)}}},createLabelAxis:function(t,e,i){var n=t.options.labels,s=n.position,r=s!==_&&s!==b,o=n.visible;if(r||!1===o)return null;var a=this.groupAxes(this.panes),h=i.options.vertical?a.x:a.y,l=this.axisCrossingValues(i,h),c=s===_,u=i.range(),d=c?u.max:u.min;if(Q(l[e],u.min,u.max)-d==0)return null;l.splice(e+1,0,d),i.options.axisCrossingValues=l;var p=t.clone();return t.clear(),p.options.name=void 0,p.options.line.visible=!1,p.options.crosshair=void 0,p.options.notes=void 0,p.options.plotBands=void 0,p},isTrendline:function(t){return t&&L(t.type,Me)},trendlineFactory:function(){},createTrendlineSeries:function(){var e=this,i=[];return this.series=this.series.map((function(n){if(!e.isTrendline(n))return n;var r=e.seriesByName(n.for);if(!r)throw new Error('Invalid Configuration: Unable to locate linked series "'+n.for+'" for trendline "'+n.name+'".');var o=It.current.valueFields(r),a=H(o),h=e.trendlineFactory(t.extend({},{field:a},n),r);return h&&(!1===r.visible&&(h.visible=!1),h.color===s.INHERIT&&(h.color=r.color),i.push(h)),h})).filter((function(t){return null!==t})),i},seriesByName:function(t){return this.series.find((function(e){return e.name===t}))},getFirstPoint:function(){return this.pointsBySeriesIndex(0)[0]},getPointBelow:function(t){return this._getNextPoint(t,this._pointsByVertical,1)},getPointAbove:function(t){return this._getNextPoint(t,this._pointsByVertical,-1)},getPointToTheRight:function(t){return this._getNextPoint(t,this._pointsByHorizontal,1)},getPointToTheLeft:function(t){return this._getNextPoint(t,this._pointsByHorizontal,-1)},_getNextPoint:function(t,e,i){var n=this,s=e.call(this,t),r=s.indexOf(t)+i,o=function(i){var s,r=0;do{r+=i,s=e.call(n,t,r)}while(0===s.length);return s};return r<0?(s=o(-1)).at(-1):r>=s.length?(s=o(1)).at(0):s[r]},_pointsByVertical:function(t){return this.pointsByPointIndex(t.getIndex())},_pointsByHorizontal:function(t,e){void 0===e&&(e=0);var i=J(t.series.index+e,this.series.length);return this.pointsBySeriesIndex(i)}});function Bn(t){return!t.pane.axes.some((function(e){return e.options.vertical===t.options.vertical&&e!==t&&!1!==e.options.visible}))}function Fn(t){for(var e,i=t.length,n=0;n<i;n++){var s=t[n],r=!1!==s.options.visible;if(r||Bn(s)){var o=r?s.contentBox():s.lineBox();e?e.wrap(o):e=o.clone()}}return e||new T}function Dn(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n&&n.pane===e)return n}}var Hn=function(t){return t.reduce((function(t,e){return t.concat(e.axes)}),[])};R(On,{series:[],plotArea:{margin:{}},background:"",border:{color:m,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});var zn={hover:function(t,e){this._dispatchEvent(t,e,We)},click:function(t,e){this._dispatchEvent(t,e,Ge)}},Nn=i.extend({init:function(t,e,i){var n=e.canonicalFields(t),s=e.valueFields(t),r=e.sourceFields(t,n),o=this._seriesFields=[],a=i.query(t.type),h=t.aggregate||a;this._series=t,this._binder=e;for(var l=0;l<n.length;l++){var c=n[l],u=void 0;if(B(h))u=h[c];else{if(0!==l&&!L(c,s))break;u=h}u&&o.push({canonicalName:c,name:r[l],transform:M(u)?u:kt[u]})}},aggregatePoints:function(t,e){var i=this._series,s=this._seriesFields,r=this._bindPoints(t||[]),o=r.dataItems[0],a={};if(o&&!n(o)&&!C(o)){var h=function(){};h.prototype=o,a=new h}for(var l=0;l<s.length;l++){var c=s[l],u=this._bindField(r.values,c.canonicalName),d=c.transform(u,i,r.dataItems,e);if(!(null===d||!B(d)||S(d.length)||d instanceof Date)){a=d;break}S(d)&&Gn(c.name,a,d)}return a},_bindPoints:function(t){for(var e=this._binder,i=this._series,n=[],s=[],r=0;r<t.length;r++){var o=t[r];n.push(e.bindPoint(i,o)),s.push(i.data[o])}return{values:n,dataItems:s}},_bindField:function(t,e){for(var i=[],n=t.length,s=0;s<n;s++){var r=t[s],o=r.valueFields,a=void 0;a=S(o[e])?o[e]:r.fields[e],i.push(a)}return i}});function Gn(t,e,i){var n=e,s=t;if(t.indexOf(".")>-1){for(var r=t.split(".");r.length>1;)s=r.shift(),S(n[s])||(n[s]={}),n=n[s];s=r.shift()}n[s]=i}var Wn=i.extend({init:function(){this._defaults={}},register:function(t,e){for(var i=0;i<t.length;i++)this._defaults[t[i]]=e},query:function(t){return this._defaults[t]}});Wn.current=new Wn;var qn=un.extend({createLabel:function(){var t=this.options.labels,e=D({},t,t.from),i=D({},t,t.to);e.visible&&(this.labelFrom=this.createLabelElement(e),this.append(this.labelFrom)),i.visible&&(this.labelTo=this.createLabelElement(i),this.append(this.labelTo))},reflow:function(t){this.render();var e=this,i=e.labelFrom,n=e.labelTo,s=e.value;this.box=t,i&&(i.options.aboveAxis=s.from>s.to,i.reflow(t)),n&&(n.options.aboveAxis=s.to>s.from,n.reflow(t)),this.note&&this.note.reflow(t)}});qn.prototype.defaults=D({},qn.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});var Xn=vn.extend({pointType:function(){return qn},pointValue:function(t){return t.valueFields},formatPointValue:function(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)},plotRange:function(t){return t?[t.value.from,t.value.to]:0},updateRange:function(t,e){var i=e.series.axis,s=t.from,a=t.to,h=this.valueAxisRanges[i];null!==t&&n(s)&&n(a)&&((h=this.valueAxisRanges[i]=h||{min:r,max:o}).min=Math.min(h.min,s),h.max=Math.max(h.max,s),h.min=Math.min(h.min,a),h.max=Math.max(h.max,a))},aboveAxis:function(t){var e=t.value;return e.from<e.to}});Xn.prototype.plotLimits=Gi.prototype.plotLimits;var Yn=Yi.extend({aliasFor:function(){return this.parent}}),Un="auto",Zn=I.extend({init:function(t,e){I.fn.init.call(this),this.value=t,this.options=e,this.aboveAxis=O(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=Xi(),this.initLabelsFormat()},render:function(){if(!this._rendered){this._rendered=!0;var t=this.options,e=t.markers,i=t.labels,n=this.value,s=this.fromPoint=new Yn(n,D({},this.options,{labels:i.from,markers:e.from})),r=this.toPoint=new Yn(n,D({},this.options,{labels:i.to,markers:e.to}));this.copyFields(s),this.copyFields(r),this.append(s),this.append(r)}},reflow:function(t){this.render();var e=t.from,i=t.to;this.positionLabels(e,i),this.fromPoint.reflow(e),this.toPoint.reflow(i),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},createHighlight:function(){var t=new dt;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t},highlightVisual:function(){return this.visual},highlightVisualArgs:function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},createFocusHighlight:function(){var t=new dt;return t.append(this.fromPoint.createFocusHighlight()),t.append(this.toPoint.createFocusHighlight()),t},tooltipAnchor:function(){var t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){var e,i,n,s=this.box,r=s.center(),o=d;return this.options.vertical?(e=r.x,i=s.y1-5,n=u):(e=s.x2+5,i=r.y,n=l),{point:new P(e,i),align:{horizontal:o,vertical:n}}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){return this.box.overlaps(t)},unclipElements:function(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()},initLabelsFormat:function(){var e=this.options.labels;e.format||(e.from&&e.from.format||(e.from=t.extend({},e.from,{format:"{0}"})),e.to&&e.to.format||(e.to=t.extend({},e.to,{format:"{1}"})))},positionLabels:function(t,e){var i,n,s=this.options,r=s.labels,o=s.vertical;r.position===Un&&(o?e.y1<=t.y1?(n=Xt,i=Yt):(n=Yt,i=Xt):e.x1<=t.x1?(n=d,i=x):(n=x,i=d),r.from&&r.from.position||(this.fromPoint.options.labels.position=i),r.to&&r.to.position||(this.toPoint.options.labels.position=n))},copyFields:function(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner},focusVisual:function(){this.fromPoint.focusVisual()},clearFocusFromVisual:function(){this.toPoint.clearFocusFromVisual()},getIndex:function(){return this.categoryIx}});D(Zn.prototype,Wi),D(Zn.prototype,qi),Zn.prototype.defaults={markers:{visible:!1,background:p,size:8,type:f,border:{width:2},opacity:1},labels:{visible:!1,margin:q(3),padding:q(4),animation:{type:Lt,delay:Vt},position:Un},notes:{label:{}},highlight:{markers:{border:{color:p,width:2}},zIndex:s.HIGHLIGHT_ZINDEX},tooltip:{format:"{0} - {1}"},accessibility:{role:si,className:ri,ariaRoleDescription:oi}};var jn=nn.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},stackSegments:function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t},createStroke:function(t){var e=new lt(t),i=new lt(t);e.segments.push.apply(e.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(e),this.visual.append(i)},hasStackSegment:function(){return!0},fromPoints:function(){return this.linePoints.map((function(t){return t.fromPoint}))},toPoints:function(){return this.linePoints.map((function(t){return t.toPoint}))}}),$n=jn.extend({createStrokeSegments:function(){return this.createCurveSegments(this.toPoints())},stackSegments:function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t},createCurveSegments:function(t){return(new X).process(this.toGeometryPoints(t))}}),Kn=jn.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},stackSegments:function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()))).reverse(),t}});D(Kn.prototype,Zi);var Qn=Gi.extend({render:function(){Gi.fn.render.call(this),this.renderSegments()},pointType:function(){return Zn},createPoint:function(t,e){var i=e.series,n=e.seriesIx,s=t.valueFields;if(!Oi(s.from)&&!Oi(s.to)){if(this.seriesMissingValues(i)!==Gt)return null;s={from:0,to:0}}var r=this.pointOptions(i,n);r=this.evalPointOptions(r,s,e);var o=t.fields.color||i.color;M(i.color)&&(o=r.color);var a=new Zn(s,r);return a.color=o,this.append(a),a},createSegment:function(t,e,i){var n=(e.line||{}).style;return new("smooth"===n?$n:"step"===n?Kn:jn)(t,e,i)},plotRange:function(t,e){return t?[t.value.from,t.value.to]:[e,e]},valueSlot:function(t,e){var i=t.getSlot(e[0],e[0],!this.options.clip),n=t.getSlot(e[1],e[1],!this.options.clip);if(i&&n)return{from:i,to:n}},pointSlot:function(t,e){var i,n,s=e.from,r=e.to;return this.options.invertAxes?(i=new T(s.x1,t.y1,s.x2,t.y2),n=new T(r.x1,t.y1,r.x2,t.y2)):(i=new T(t.x1,s.y1,t.x2,s.y2),n=new T(t.x1,r.y1,t.x2,r.y2)),{from:i,to:n}},addValue:function(t,e){var i=t.valueFields;n(i.from)||(i.from=i.to),n(i.to)||(i.to=i.from),Gi.fn.addValue.call(this,t,e)},updateRange:function(t,e){if(null!==t&&n(t.from)&&n(t.to)){var i=e.series.axis,s=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:r,max:o},a=t.from,h=t.to;s.min=Math.min(s.min,a,h),s.max=Math.max(s.max,a,h)}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.from,i.to)},animationPoints:function(){for(var t=this.points,e=[],i=0;i<t.length;i++){var n=t[i];n&&(e.push((n.fromPoint||{}).marker),e.push((n.toPoint||{}).marker))}return e.concat(this._segments)}});D(Qn.prototype,Qi,tn);var Jn=xn.extend({reflow:function(t){var e=this,i=e.options,n=e.value,s=e.owner.seriesValueAxis(i),r=[],o=[],a=[],h=s.getSlot(n.low,n.high),l=s.getSlot(n.open,n.open),c=s.getSlot(n.close,n.close);l.x1=c.x1=h.x1=t.x1,l.x2=c.x2=h.x2=t.x2;var u=h.center().x;r.push([l.x1,l.y1]),r.push([u,l.y1]),o.push([u,c.y1]),o.push([c.x2,c.y1]),a.push([u,h.y1]),a.push([u,h.y2]),this.lines=[r,o,a],this.box=h.clone().wrap(l.clone().wrap(c)),this.reflowNote()},createBody:function(){}}),ts=mn.extend({pointType:function(){return Jn}}),es=I.extend({init:function(t,e,i){I.fn.init.call(this),this.from=t,this.to=e,this.series=i},linePoints:function(){var t=this.from,e=this.from.box,i=this.to.box,n=[];if(t.isVertical){var s=t.aboveAxis?e.y1:e.y2;n.push([e.x1,s],[i.x2,s])}else{var r=t.aboveAxis?e.x2:e.x1;n.push([r,e.y1],[r,i.y2])}return n},createVisual:function(){I.fn.createVisual.call(this);var t=this.series.line||{},e=lt.fromPoints(this.linePoints(),{stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType}});E(e),this.visual.append(e)}});R(es,{animation:{type:Lt,delay:Vt}});var is=vn.extend({render:function(){vn.fn.render.call(this),this.createSegments()},traverseDataPoints:function(t){for(var e=this.options.series,i=Pi(e),s=!this.options.invertAxes,r=0;r<e.length;r++)for(var o=e[r],a=0,h=0,l=0;l<i;l++){var c=It.current.bindPoint(o,l),u=c.valueFields.value,d=c.fields.summary,p=a,f=void 0;d?"total"===d.toLowerCase()?(c.valueFields.value=a,p=0,f=a):(c.valueFields.value=h,f=p-h,h=0):n(u)&&(h+=u,f=a+=u),t(c,{category:this.categoryAxis.categoryAt(l),categoryIx:l,series:o,seriesIx:r,total:a,runningTotal:h,from:p,to:f,isVertical:s})}},updateRange:function(t,e){vn.fn.updateRange.call(this,{value:e.to},e)},aboveAxis:function(t){return t.value>=0},plotRange:function(t){return[t.from,t.to]},createSegments:function(){for(var t=this.options.series,e=this.seriesPoints,i=this.segments=[],n=0;n<t.length;n++){var s=t[n],r=e[n];if(r)for(var o=void 0,a=0;a<r.length;a++){var h=r[a];if(h&&o){var l=new es(o,h,s);i.push(l),this.append(l)}o=h}}}});function ns(t,e,i){var n=t[String(e)];return n?n(i):null}function ss(t,e){for(var i,n,s=0,r=0,o=0,a=0,h=0,l=Number.MAX_VALUE,c=Number.MIN_VALUE,u=0;u<t.length;u++){var d=e(t[u]),p=d.xValue,f=d.yValue;isFinite(p)&&null!==p&&isFinite(f)&&null!==f&&(l=Math.min(p,l),c=Math.max(p,c),h++,s+=p,r+=f,o+=Math.pow(p,2),a+=p*f)}return h>0&&(n=(r-(i=(h*a-s*r)/(h*o-Math.pow(s,2)))*s)/h),{slope:i,intercept:n,count:h,xMin:l,xMax:c}}var rs=function(t,e){return t.every((function(t){var i=t.valueFields;return!Oi(i[e])||i[e]>0}))};function os(t,e){for(var i=[],n=e.totalRangeIndices(),s=e.currentRangeIndices(),r={min:Math.floor(Math.max(s.min-1,n.min)),max:Math.ceil(Math.min(s.max+2,n.max))},o=r.min;o<r.max;o++){var a=o+1;i[o]={category:e.categoryAt(o,!0),value:t(a)}}return i}var as=function(t){return function(e){var i=e.categoryIx,n=e.valueFields;return{xValue:i+1,yValue:Math.log(n[t])}}};var hs=function(t){return function(e){return{xValue:e.categoryIx+1,yValue:e.valueFields[t]}}};var ls=function(t){return function(e){var i=e.categoryIx,n=e.valueFields;return{xValue:Math.log(i+1),yValue:n[t]}}};function cs(t,e,i){for(var n=[],s=[],r=Math.max(yi,i)-1,o=0,a=0,h=0;h<t.length;h++){var l=e(t[h]),c=l.xValue,u=l.yValue;if(isFinite(u)&&null!==u?(s.push(u),a+=u,o=Math.max(h,o)):s.push(null),h>=r){var d=s.filter((function(t){return null!==t})).length,p=s.shift()||0;if(d>0){var f=a/d;n.push([c,f]),a-=p;continue}}n.push([c,null])}return n.slice(0,o+1)}var us=function(t){return function(e){return{xValue:e.categoryIx,yValue:e.valueFields[t]}}};var ds=1,ps=6;function fs(t,i,n){for(var s=Math.min(Math.max(n||ds,ds),ps)+1,r=new e.Matrix,o=new e.Matrix,a=0,h=Number.MAX_VALUE,l=Number.MIN_VALUE,c=function(t){return t},u=[],d=0;d<t.length;d++){var p=i(t[d]),f=p.xValue,g=p.yValue;if(isFinite(f)&&null!==f&&isFinite(g)&&null!==g){h=Math.min(f,h),l=Math.max(f,l),a++,o.set(d,0,g),r.set(d,0,1),r.set(d,1,f);for(var v=2;v<=s;v++)r.set(d,v,Math.pow(r.get(d,1),v))}else r.set(d,0,0)}return r.width=Math.min(s,a),a>0&&(u=function(t,e){for(var i=t.transpose(),n=i.multiply(t).inverse().multiply(i).multiply(e),s=[],r=0;r<n.height;r++)s.push(n.get(r,0));return s}(r,o),c=function(t){return u.reduce((function(e,i,n){return e+i*Math.pow(t,n)}),0)}),{coefficients:u,count:a,valueMapper:c,xMin:h,xMax:l}}var gs=function(t){return function(e){return{xValue:e.categoryIx+1,yValue:e.valueFields[t]}}};var vs=function(t){return function(e){var i=e.categoryIx,n=e.valueFields;return{xValue:Math.log(i+1),yValue:Math.log(n[t])}}};var xs={};xs[Pe]=function(e){var i=e.options,n=e.categoryAxis,s=function(t){var e=t.seriesValues,i=t.categoryAxis,n=t.options,s=e();if(!rs(s,n.field))return null;var r=ss(s,as(n.field)),o=r.slope,a=r.intercept;if(r.count>0){var h=Math.exp(a),l=o;return os((function(t){return h*Math.exp(l*t)}),i)}return null}({seriesValues:e.seriesValues,categoryAxis:n,options:i});return s?t.extend({},i,{type:"line",data:s,categoryField:"category",field:"value"}):null},xs[Te]=function(e){var i=e.options,n=e.categoryAxis,s=function(t){var e=t.seriesValues,i=t.categoryAxis,n=t.options,s=ss(e(),hs(n.field)),r=s.slope,o=s.intercept;if(s.count>0)return os((function(t){return r*t+o}),i);return null}({seriesValues:e.seriesValues,categoryAxis:n,options:i});return s?t.extend({},i,{type:"line",data:s,categoryField:"category",field:"value"}):null},xs[Ee]=function(e){var i=e.options,n=e.categoryAxis,s=function(t){var e=t.seriesValues,i=t.categoryAxis,n=t.options,s=ss(e(),ls(n.field)),r=s.slope,o=s.intercept;if(s.count>0){var a=r,h=o;return os((function(t){return a*Math.log(t)+h}),i)}return null}({seriesValues:e.seriesValues,categoryAxis:n,options:i});return s?t.extend({},i,{type:"line",data:s,categoryField:"category",field:"value"}):null},xs[Re]=function(e){var i=e.options,n=function(t){var e=t.categoryAxis,i=function(t){var e=t.options,i=t.categoryAxis,n=t.seriesValues,s=(e.trendline||{}).period||yi,r=i.totalRangeIndices(),o=i.currentRangeIndices(),a={min:Math.floor(Math.max(o.min-s,r.min)),max:Math.ceil(Math.min(o.max+s+2,r.max))};return cs(n(a),us(e.field),s)}(t),n=[];if(i.forEach((function(t){var i=t[0],s=t[1];n[i]={category:e.categoryAt(i,!0),value:s}})),n.length>0)return n;return null}(e);return n?t.extend({},i,{type:"line",data:n,categoryField:"category",field:"value"}):null},xs[Ve]=function(e){var i=e.options,n=e.categoryAxis,s=function(t){var e=t.seriesValues,i=t.categoryAxis,n=t.options,s=(n.trendline||{}).order,r=fs(e(),gs(n.field),s),o=r.count,a=r.valueMapper;if(o>0)return os((function(t){return a(t)}),i);return null}({seriesValues:e.seriesValues,categoryAxis:n,options:i});return s?t.extend({},i,{type:"line",data:s,categoryField:"category",field:"value"}):null},xs[Le]=function(e){var i=e.options,n=e.categoryAxis,s=function(t){var e=t.seriesValues,i=t.categoryAxis,n=t.options,s=e();if(!rs(s,n.field))return null;var r=ss(s,vs(n.field)),o=r.slope,a=r.intercept;if(r.count>0){var h=Math.exp(a),l=o;return os((function(t){return h*Math.pow(t,l)}),i)}return null}({seriesValues:e.seriesValues,categoryAxis:n,options:i});return s?t.extend({},i,{type:"line",data:s,categoryField:"category",field:"value"}):null};var ms=[jt,be,ve,ke],ys=[ae,Se].concat(ms),_s=On.extend({initFields:function(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new an,this._seriesPointsCache={},this._currentPointsCache={},t.length>0){this.invertAxes=L(t[0].type,[$t,Jt,Se,be,ke,xe,oe,we]);for(var e=0;e<t.length;e++){var i=t[e].stack;if(i&&"100%"===i.type){this.stack100=!0;break}}}},render:function(t){void 0===t&&(t=this.panes),this.series=[].concat(this.originalSeries),this.createCategoryAxes(t),this.aggregateCategories(t),this.createTrendlineSeries(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)},removeAxis:function(t){var e=t.options.name;On.fn.removeAxis.call(this,t),t instanceof Z?delete this.namedCategoryAxes[e]:(this.valueAxisRangeTracker.reset(e),delete this.namedValueAxes[e]),t===this.categoryAxis&&delete this.categoryAxis,t===this.valueAxis&&delete this.valueAxis},trendlineFactory:function(t,e){var i=this.seriesCategoryAxis(t),n=this.seriesValues.bind(this,e.index),s=ns(xs,t.type,{options:t,categoryAxis:i,seriesValues:n});return s?(s.categoryAxis=e.categoryAxis,s.valueAxis=e.valueAxis,this.filterSeries(s,i)):s},trendlineAggregateForecast:function(){return this.series.map((function(t){return(t.trendline||{}).forecast})).filter((function(t){return void 0!==t})).reduce((function(t,e){return{before:Math.max(t.before,e.before||0),after:Math.max(t.after,e.after||0)}}),{before:0,after:0})},seriesValues:function(t,e){var i=[],n=this.srcSeries[t],s=this.seriesCategoryAxis(n);Ti(s.options.type,h)&&(this._seriesPointsCache={},this._currentPointsCache={},s.options.dataItems=[],n=this.aggregateSeries(n,s,s.totalRangeIndices()));for(var r=e?e.min:0,o=e?e.max:n.data.length,a=r;a<o;a++){var l=this.bindPoint(n,a);i.push({categoryIx:a,category:l.fields.category,valueFields:l.valueFields})}return i},createCharts:function(t){for(var e=this,i=this.groupSeriesByPane(),n=0;n<t.length;n++){var s=t[n],r=i[s.options.name||"default"]||[];e.addToLegend(r);var o=e.filterVisibleSeries(r);if(o)for(var a=e.groupSeriesByCategoryAxis(o),h=0;h<a.length;h++)e.createChartGroup(a[h],s)}},createChartGroup:function(t,e){this.createAreaChart(Ri(t,[jt,be]),e),this.createRangeAreaChart(Ri(t,[ve,ke]),e),this.createBarChart(Ri(t,[ee,$t]),e),this.createRangeBarChart(Ri(t,[me,xe]),e),this.createBulletChart(Ri(t,[Jt,Ae]),e),this.createCandlestickChart(Ri(t,te),e),this.createBoxPlotChart(Ri(t,[Kt,we]),e),this.createOHLCChart(Ri(t,he),e),this.createWaterfallChart(Ri(t,[Ce,oe]),e),this.createLineChart(Ri(t,[ae,Se]),e)},aggregateCategories:function(t){var e=this,i=[].concat(this.series),n=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(var s=0;s<i.length;s++){var r=i[s];if(!e.isTrendline(r)){var o=e.seriesCategoryAxis(r),a=e.findPane(o.options.pane);r=(Ti(o.options.type,h)||r.categoryField)&&L(a,t)?e.aggregateSeries(r,o,o.currentRangeIndices()):e.filterSeries(r,o)}n.push(r)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=i,this.series=n},filterSeries:function(t,e){var i=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,i),!S(e.options.min)&&!S(e.options.max))return t;var n=e.currentRangeIndices(),s=L(t.type,ys),r=D({},t);return r.data=(r.data||[]).slice(n.min,n.max+1),s&&Ni(r,n,i,(function(i){return{item:t.data[i],category:e.categoryAt(i,!0),categoryIx:i-n.min}}),(function(e){return S(t.data[e])})),r},clearSeriesPointsCache:function(){this._seriesPointsCache={}},seriesSourcePoints:function(t,e){var i=t.index+";"+e.categoriesHash();if(this._seriesPointsCache&&this._seriesPointsCache[i])return this._currentPointsCache[i]=this._seriesPointsCache[i],this._seriesPointsCache[i];var n=e.options,s=n.srcCategories,r=Ti(n.type,h),o=t.data,a=[];r||e.indexCategories();for(var l=0;l<o.length;l++){var c=It.current.bindPoint(t,l).fields.category;if(r&&(c=Li(c,o[l],this.chartService.intl)),S(c)||(c=s[l]),S(c)&&null!==c){var u=e.totalIndex(c);a[u]=a[u]||{items:[],category:c},a[u].items.push(l)}}return this._currentPointsCache[i]=a,a},aggregateSeries:function(t,e,i){if(!t.data.length)return t;for(var n=this.seriesSourcePoints(t,e),s=D({},t),r=new Nn(D({},t),It.current,Wn.current),o=s.data=[],a=e.options.dataItems||[],h=function(t){var s=t-i.min,o=n[t];if(o||(o=n[t]={}),o.categoryIx=s,!o.item){var a=e.categoryAt(t,!0);o.category=a,o.item=r.aggregatePoints(o.items,a)}return o},l=i.min;l<=i.max;l++){var c=h(l);o[c.categoryIx]=c.item,c.items&&c.items.length&&(a[c.categoryIx]=c.item)}return L(s.type,ys)&&Ni(s,i,e.totalCount(),h,(function(t){return n[t]})),e.options.dataItems=a,s},appendChart:function(t,e){var i=t.options.series,n=this.seriesCategoryAxis(i[0]),s=n.options.categories,r=Math.max(0,Pi(i)-s.length);if(r>0)for(s=n.options.categories=n.options.categories.slice(0);r--;)s.push("");this.valueAxisRangeTracker.update(t.valueAxisRanges),On.fn.appendChart.call(this,t,e)},seriesPaneName:function(t){var e=this.options,i=t.axis,n=[].concat(e.valueAxis),s=tt(n,(function(t){return t.name===i}))[0],r=((e.panes||[{}])[0]||{}).name||"default";return(s||{}).pane||r},seriesCategoryAxis:function(t){var e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},stackableChartOptions:function(t,e){var i=t.some((function(t){return t.stack})),n=t.some((function(t){return t.stack&&"100%"===t.stack.type})),s=e.options.clip;return{defaultStack:t[0].stack,isStacked:i,isStacked100:n,clip:s}},groupSeriesByCategoryAxis:function(t){for(var i=[],n={},s=0;s<t.length;s++){var r=t[s].categoryAxis||"$$default$$";e.hasOwnProperty(n,r)||(n[r]=!0,i.push(r))}for(var o=[],a=0;a<i.length;a++){var h=ws(t,i[a],a);0!==h.length&&o.push(h)}return o},createBarChart:function(e,i){if(0!==e.length){var n=e[0],s=new vn(this,t.extend({series:e,invertAxes:this.invertAxes,gap:n.gap,spacing:n.spacing},this.stackableChartOptions(e,i)));this.appendChart(s,i)}},createRangeBarChart:function(t,e){if(0!==t.length){var i=t[0],n=new Xn(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,e)}},createBulletChart:function(t,e){if(0!==t.length){var i=t[0],n=new Pn(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createLineChart:function(e,i){if(0!==e.length){var n=new en(this,t.extend({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(e,i)));this.appendChart(n,i)}},createAreaChart:function(e,i){if(0!==e.length){var n=new on(this,t.extend({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(e,i)));this.appendChart(n,i)}},createRangeAreaChart:function(t,e){if(0!==t.length){var i=new Qn(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(i,e)}},createOHLCChart:function(t,e){if(0!==t.length){var i=t[0],n=new ts(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createCandlestickChart:function(t,e){if(0!==t.length){var i=t[0],n=new mn(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createBoxPlotChart:function(t,e){if(0!==t.length){var i=t[0],n=new bn(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createWaterfallChart:function(t,e){if(0!==t.length){var i=t[0],n=new is(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,e)}},axisRequiresRounding:function(t,e){for(var i=Ri(this.series,Ie),n=0;n<this.series.length;n++){var s=this.series[n];if(L(s.type,ms)){var r=s.line;r&&r.style===Zt&&i.push(s)}}for(var o=0;o<i.length;o++){var a=i[o].categoryAxis||"";if(a===t||!a&&0===e)return!0}},aggregatedAxis:function(t,e){for(var i=this.series,n=0;n<i.length;n++){var s=i[n].categoryAxis||"";if((s===t||!s&&0===e)&&i[n].categoryField)return!0}},createCategoryAxesLabels:function(){for(var t=this.axes,e=0;e<t.length;e++)t[e]instanceof Z&&t[e].createLabels()},createCategoryAxes:function(t){for(var i=this,n=this.invertAxes,s=[].concat(this.options.categoryAxis),o=[],a=0;a<s.length;a++){var h=s[a],l=i.findPane(h.pane);if(L(l,t)){var c=h.name,u=h.categories;void 0===u&&(u=[]),h=D({vertical:n,reverse:!n&&i.chartService.rtl,axisCrossingValue:n?r:0},h),S(h.justified)||(h.justified=i.isJustified()),i.axisRequiresRounding(c,a)&&(h.justified=!1);var d=void 0;if(Bi(h,u[0])?(h._forecast=i.trendlineAggregateForecast(),d=new e.DateCategoryAxis(h,i.chartService)):d=new Z(h,i.chartService),s[a].categories=d.options.srcCategories,c){if(i.namedCategoryAxes[c])throw new Error("Category axis with name "+c+" is already defined");i.namedCategoryAxes[c]=d}d.axisIndex=a,o.push(d),i.appendAxis(d)}}var p=this.categoryAxis||o[0];this.categoryAxis=p,n?this.axisY=p:this.axisX=p},isJustified:function(){for(var t=this.series,e=0;e<t.length;e++){var i=t[e];if(!L(i.type,ms))return!1}return!0},createValueAxes:function(t){var i=this,n=this.valueAxisRangeTracker,s=n.query(),r=[].concat(this.options.valueAxis),o=this.invertAxes,a={vertical:!o,reverse:o&&this.chartService.rtl},h=[];this.stack100&&(a.roundToMajorUnit=!1,a.labels={format:"P0"});for(var l=0;l<r.length;l++){var c=r[l],u=i.findPane(c.pane);if(L(u,t)){var d=c.name,p=Ti(c.type,ci)?{min:.1,max:1}:{min:0,max:1},f=n.query(d)||s||p;0===l&&f&&s&&(f.min=Math.min(f.min,s.min),f.max=Math.max(f.max,s.max));var g=new(Ti(c.type,ci)?e.LogarithmicAxis:e.NumericAxis)(f.min,f.max,D({},a,c),i.chartService);if(d){if(i.namedValueAxes[d])throw new Error("Value axis with name "+d+" is already defined");i.namedValueAxes[d]=g}g.axisIndex=l,h.push(g),i.appendAxis(g)}}var v=this.valueAxis||h[0];this.valueAxis=v,o?this.axisX=v:this.axisY=v},_dispatchEvent:function(t,e,i){var n=t._eventCoordinates(e),s=new P(n.x,n.y),r=this.pointPane(s),o=[],a=[];if(r){for(var h=r.axes,l=0;l<h.length;l++){var c=h[l];c.getValue?Si(a,c.getValue(s)):Si(o,c.getCategory(s))}0===o.length&&Si(o,this.categoryAxis.getCategory(s)),o.length>0&&a.length>0&&t.trigger(i,{element:z(e),originalEvent:e,category:Fi(o),value:Fi(a)})}},pointPane:function(t){for(var e=this.panes,i=0;i<e.length;i++){var n=e[i];if(n.contentBox.containsPoint(t))return n}},updateAxisOptions:function(t,e){bs(this.options,t,e),bs(this.originalOptions,t,e)},_pointsByVertical:function(t,e){return void 0===e&&(e=0),this.invertAxes?this._siblingsBySeriesIndex(t.series.index,e):this._siblingsByPointIndex(t.getIndex())},_pointsByHorizontal:function(t,e){if(void 0===e&&(e=0),this.invertAxes)return this._siblingsByPointIndex(t.getIndex());var i=this._siblingsBySeriesIndex(t.series.index,e);return this.chartService.rtl?i.reverse():i},_siblingsByPointIndex:function(t){for(var e=this.charts,i=[],n=0;n<e.length;n++){var s=e[n];if(!s.pane||"_navigator"!==s.pane.options.name){var r=s.points.filter((function(e){return e&&!1!==e.visible&&e.getIndex()===t}));i.push.apply(i,r.sort(this._getSeriesCompareFn(r[0])))}}return i},_siblingsBySeriesIndex:function(t,e){var i=J(t+e,this.series.length);return this.pointsBySeriesIndex(i)},_getSeriesCompareFn:function(t){var e=this._isInStackedSeries(t);return e&&this.invertAxes||!e&&!this.invertAxes?function(t,e){return t.box.center().x-e.box.center().x}:function(t,e){return t.box.center().y-e.box.center().y}},_isInStackedSeries:function(t){var e=L(t.series.type,[jt,be,ve,ke,ae,Se,ge,pe]),i=L(t.series.type,[ee,$t]);return e||i&&t.options.isStacked}});function bs(t,e,i){var n=[].concat(e instanceof Z?t.categoryAxis:t.valueAxis);D(n[e.axisIndex],i)}function ws(t,e,i){return tt(t,(function(t){return 0===i&&!t.categoryAxis||t.categoryAxis===e}))}R(_s,{categoryAxis:{},valueAxis:{}}),D(_s.prototype,zn);var As=i.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(t,e){var i=[].concat(t);this.hide();for(var n=0;n<i.length;n++){var s=i[n];s&&s.toggleHighlight&&s.hasHighlight()&&(this.togglePointHighlight(s,!0,e),this._points.push(s))}},togglePointHighlight:function(t,e,i){var n=(t.options.highlight||{}).toggle;if(n){var s={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:Ss,visual:t.highlightVisual(),show:e};n(s),s._defaultPrevented||t.toggleHighlight(e,i)}else t.toggleHighlight(e,i)},hide:function(){for(var t=this._points;t.length;)this.togglePointHighlight(t.pop(),!1)},isHighlighted:function(t){for(var e=this._points,i=0;i<e.length;i++){if(t===e[i])return!0}return!1}});function Ss(){this._defaultPrevented=!0}function ks(t,e){var i=(e||"").toLowerCase(),n=t.event;return"none"===i&&!(n.ctrlKey||n.shiftKey||n.altKey)||n[i+"Key"]}function Cs(t){for(var e={},i=0;i<t.length;i++){var n=t[i];n.axis.options.name&&(e[n.axis.options.name]={min:n.range.min,max:n.range.max})}return e}var Is=i.extend({init:function(t,e){this.plotArea=t,this.options=D({},this.options,e)},start:function(t){return this._active=ks(t,this.options.key),this._active},move:function(t){if(this._active){var e=this.axisRanges=this._panAxes(t,g).concat(this._panAxes(t,v));if(e.length)return this.axisRanges=e,Cs(e)}},end:function(){var t=this._active;return this._active=!1,t},pan:function(){var t=this.plotArea,e=this.axisRanges;if(e.length){for(var i=0;i<e.length;i++){var n=e[i];t.updateAxisOptions(n.axis,n.range)}t.redraw(t.panes)}},destroy:function(){delete this.plotArea},_panAxes:function(t,e){var i=this.plotArea,n=-t[e].delta,s=(this.options.lock||"").toLowerCase(),r=[];if(0!==n&&(s||"").toLowerCase()!==e)for(var o=i.axes,a=0;a<o.length;a++){var h=o[a];if(e===g&&!h.options.vertical||e===v&&h.options.vertical){var l=h.pan(n);l&&(l.limitRange=!0,r.push({axis:h,range:l}))}}return r}});Is.prototype.options={key:"none",lock:"none"};var Ps=i.extend({init:function(t,e){this.chart=t,this.options=D({},this.options,e),this.createElement()},createElement:function(){var t=this._marquee=document.createElement("div");t.className="k-marquee";var e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)},removeElement:function(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)},setStyles:function(t){et(this._marquee,t)},start:function(t){if(ks(t,this.options.key)){var e=this.chart,i=e._eventCoordinates(t),n=this._zoomPane=e._plotArea.paneByPoint(i),s=n?n.chartsBox().clone():null;if(n&&s){var r=this._elementOffset();return s.translate(r.left,r.top),this._zoomPaneClipBox=s,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1},_elementOffset:function(){var t=this.chart.element,i=et(t,["paddingLeft","paddingTop"]),n=i.paddingLeft,s=i.paddingTop,r=e.elementOffset(t);return{left:n+r.left,top:s+r.top}},move:function(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))},end:function(t){if(this._zoomPane){var e=this._elementOffset(),i=this._selectionPosition(t);i.left-=e.left,i.top-=e.top;var n={x:i.left,y:i.top},s={x:i.left+i.width,y:i.top+i.height};return this._updateAxisRanges(n,s),this.removeElement(),delete this._zoomPane,Cs(this.axisRanges)}},zoom:function(){var t=this.axisRanges;if(t&&t.length){for(var e=this.chart._plotArea,i=0;i<t.length;i++){var n=t[i];e.updateAxisOptions(n.axis,n.range)}e.redraw(e.panes)}},destroy:function(){this.removeElement(),delete this._marquee,delete this.chart},_updateAxisRanges:function(t,e){for(var i=(this.options.lock||"").toLowerCase(),n=[],s=this._zoomPane.axes,r=0;r<s.length;r++){var o=s[r],a=o.options.vertical;if((i!==g||a)&&(i!==v||!a)&&S(o.axisIndex)){var h=o.pointsRange(t,e);h&&n.push({axis:o,range:h})}}this.axisRanges=n},_selectionPosition:function(t){var e=this._zoomPaneClipBox,i={x:t.x.startLocation,y:t.y.startLocation},n=t.x.location,s=t.y.location,r=(this.options.lock||"").toLowerCase(),o=Math.min(i.x,n),a=Math.min(i.y,s),h=Math.abs(i.x-n),l=Math.abs(i.y-s);return r===g&&(o=e.x1,h=e.width()),r===v&&(a=e.y1,l=e.height()),n>e.x2&&(h=e.x2-i.x),n<e.x1&&(h=i.x-e.x1),s>e.y2&&(l=e.y2-i.y),s<e.y1&&(l=i.y-e.y1),{left:Math.max(o,e.x1),top:Math.max(a,e.y1),width:h,height:l}}});Ps.prototype.options={key:"shift",lock:"none"};var Ts=ht.util,Es=Ts.limitValue,Rs=Ts.valueOrDefault,Vs=i.extend({init:function(t,e){this.chart=t,this.options=D({rate:.3},this.options,e)},updateRanges:function(t,e){for(var i=(this.options.lock||"").toLowerCase(),n=[],s=this.chart._plotArea.axes,r=0;r<s.length;r++){var o=s[r],a=o.options.vertical;if((i!==g||a)&&(i!==v||!a)&&o.zoomRange){var h=Es(this.options.rate,.01,.9),l=o.zoomRange(-t*h,e);l&&n.push({axis:o,range:l})}}return this.axisRanges=n,Cs(n)},zoom:function(){var t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(var i=0;i<t.length;i++){var n=t[i];e.updateAxisOptions(n.axis,n.range)}e.redraw(e.panes)}},destroy:function(){delete this.chart}}),Ls=I.extend({init:function(t,e){I.fn.init.call(this,t),this.chartService=e},render:function(){var t=this.children,e=this.options,i=e.vertical;this.visual=new ht.Layout(null,{spacing:i?0:e.spacing,lineSpacing:i?e.spacing:0,orientation:i?s.VERTICAL:s.HORIZONTAL,reverse:e.rtl,alignItems:i?b:l});for(var n=0;n<t.length;n++){var r=t[n];r.reflow(new T),r.renderVisual()}},reflow:function(t){this.visual.rect(t.toRect()),this.visual.reflow();var i=this.visual.clippedBBox();this.box=i?e.rectToBox(i):new T},renderVisual:function(){this.addVisual()},createVisual:function(){}}),Ms=10,Os=W.extend({visualStyle:function(){var t=this.markerOptions(),e=t.border;return{stroke:{width:e.width,color:e.color,opacity:Rs(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}},markerOptions:function(){return this.options},markerHighlightOptions:function(){var t=this.markerOptions(),e=t.highlight.border.width;return D({},t,{background:t.border.color},t.highlight,t.type===s.CROSS?{background:t.highlight.border.color,border:{color:t.highlight.background,width:e/2},width:t.width,height:t.height,margin:{top:0,left:0}}:{})},createHighlight:function(){var t=new W(this.markerHighlightOptions()),e=this.paddingBox.clone();return t.reflow(e.pad(t.options.border.width)),this.highlight=[t.getElement()],this.highlight}});R(Os,{border:{width:2},width:8,height:8,background:p,margin:{top:-1,left:-1},vAlign:c,align:d,highlight:{width:Ms,height:Ms,border:{color:p,width:2}}});var Bs=i.extend({init:function(t){this.children=[],this.options=D({},this.options,this.initUserOptions(t))},initUserOptions:function(t){return t},reflow:function(t){for(var e,i=this.children,n=0;n<i.length;n++){var s=i[n];s.reflow(t),e=e?e.wrap(s.box):s.box.clone()}this.box=e||t},destroy:function(){var t=this.children;this.animation&&this.animation.destroy();for(var e=0;e<t.length;e++)t[e].destroy()},getRoot:function(){var t=this.parent;return t?t.getRoot():null},getSender:function(){var t=this.getService();if(t)return t.sender},getService:function(){for(var t=this;t;){if(t.chartService)return t.chartService;t=t.parent}},translateChildren:function(t,e){for(var i=this.children,n=i.length,s=0;s<n;s++)i[s].box.translate(t,e)},append:function(){for(var t=arguments,e=0;e<arguments.length;e++){var i=t[e];this.children.push(i),i.parent=this}},renderVisual:function(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},addVisual:function(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},renderChildren:function(){for(var t=this.children,e=t.length,i=0;i<e;i++)t[i].renderVisual()},createVisual:function(){this.visual=new dt({zIndex:this.options.zIndex,visible:O(this.options.visible,!0)})},createAnimation:function(){this.visual&&this.options.animation&&(this.animation=ct.create(this.visual,this.options.animation))},appendVisual:function(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):S(t.options.zIndex)?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)},clipRoot:function(){return this.parent?this.parent.clipRoot():this},stackRoot:function(){return this.parent?this.parent.stackRoot():this},stackVisual:function(t){var e,i=t.options.zIndex||0,n=this.visual.children,s=n.length;for(e=0;e<s;e++){var r=n[e];if(O(r.options.zIndex,0)>i)break}this.visual.insert(e,t)},traverse:function(t){for(var e=this.children,i=e.length,n=0;n<i;n++){var s=e[n];t(s),s.traverse&&s.traverse(t)}},closest:function(t){for(var e=this,i=!1;e&&!i;)(i=t(e))||(e=e.parent);if(i)return e},renderComplete:function(){},hasHighlight:function(){var t=(this.options||{}).highlight;return!(!this.createHighlight||t&&!1===t.visible||!1===this.visible)},toggleHighlight:function(e,i){var n=this,s=(this.options||{}).highlight||{},r=s.visual,o=this._highlight;if(!o){var a={fill:{color:p,opacity:i||.2},stroke:{color:p,width:1,opacity:i||.2}};if(r){if(!(o=this._highlight=r(t.extend(this.highlightVisualArgs(),{createVisual:function(){return n.createHighlight(a)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}))))return}else o=this._highlight=this.createHighlight(a);S(o.options.zIndex)||(o.options.zIndex=O(s.zIndex,this.options.zIndex)),this.appendVisual(o)}o.visible(e)},toggleFocusHighlight:function(e){var i=((this.options||{}).accessibility||{}).highlight||{},n=this._focusHighlight;if(e||n){if(!n){var s=this.getRoot().options.background,r=it(s),o={fill:{opacity:i.opacity,color:i.color},stroke:t.extend({},{color:r},i.border),zIndex:i.zIndex};n=this._focusHighlight=this.createFocusHighlight(o),this.appendVisual(n)}n.visible(e)}},createGradientOverlay:function(e,i,n){var s=new lt(t.extend({stroke:{color:"none"},fill:this.createGradient(n),closed:e.options.closed},i));return s.segments.elements(e.segments.elements()),s},createGradient:function(t){if(this.parent)return this.parent.createGradient(t)},supportsPointInactiveOpacity:function(){return!0}});Bs.prototype.options={};var Fs=i.extend({init:function(t,e){this.x=t||0,this.y=e||0},clone:function(){return new Fs(this.x,this.y)},equals:function(t){return t&&this.x===t.x&&this.y===t.y},rotate:function(t,e){var i=nt(e),n=Math.cos(i),s=Math.sin(i),r=t.x,o=t.y,a=this.x,h=this.y;return this.x=K(r+(a-r)*n+(h-o)*s,y),this.y=K(o+(h-o)*n-(a-r)*s,y),this},multiply:function(t){return this.x*=t,this.y*=t,this},distanceTo:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}});Fs.onCircle=function(t,e,i){var n=nt(e);return new Fs(t.x-i*Math.cos(n),t.y-i*Math.sin(n))};var Ds=i.extend({init:function(t,e,i,n){this.x1=t||0,this.y1=e||0,this.x2=i||0,this.y2=n||0},equals:function(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},move:function(t,e){var i=this.height(),n=this.width();return S(t)&&(this.x1=t,this.x2=this.x1+n),S(e)&&(this.y1=e,this.y2=this.y1+i),this},wrap:function(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this},wrapPoint:function(t){var e=C(t),i=e?t[0]:t.x,n=e?t[1]:t.y;return this.wrap(new Ds(i,n,i,n)),this},snapTo:function(t,e){return e!==g&&e||(this.x1=t.x1,this.x2=t.x2),e!==v&&e||(this.y1=t.y1,this.y2=t.y2),this},alignTo:function(t,e){var i=this.height(),n=this.width(),s=e===c||e===u?v:g,r=s===v?i:n;if(e===l){var o=t.center(),a=this.center();this.x1+=o.x-a.x,this.y1+=o.y-a.y}else this[s+1]=e===c||e===d?t[s+1]-r:t[s+2];return this.x2=this.x1+n,this.y2=this.y1+i,this},shrink:function(t,e){return this.x2-=t,this.y2-=e,this},expand:function(t,e){return this.shrink(-t,-e),this},pad:function(t){var e=q(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this},unpad:function(t){var e=q(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)},clone:function(){return new Ds(this.x1,this.y1,this.x2,this.y2)},center:function(){return new Fs(this.x1+this.width()/2,this.y1+this.height()/2)},containsPoint:function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},points:function(){return[new Fs(this.x1,this.y1),new Fs(this.x2,this.y1),new Fs(this.x2,this.y2),new Fs(this.x1,this.y2)]},getHash:function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},overlaps:function(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)},rotate:function(t){var e=this.width(),i=this.height(),n=this.center(),s=n.x,r=n.y,o=Hs(0,0,s,r,t),a=Hs(e,0,s,r,t),h=Hs(e,i,s,r,t),l=Hs(0,i,s,r,t);return e=Math.max(o.x,a.x,h.x,l.x)-Math.min(o.x,a.x,h.x,l.x),i=Math.max(o.y,a.y,h.y,l.y)-Math.min(o.y,a.y,h.y,l.y),this.x2=this.x1+e,this.y2=this.y1+i,this},toRect:function(){return new vt.Rect([this.x1,this.y1],[this.width(),this.height()])},hasSize:function(){return 0!==this.width()&&0!==this.height()},align:function(t,e,i){var n=e+1,r=e+2,o=e===g?s.WIDTH:s.HEIGHT,a=this[o]();L(i,[d,c])?(this[n]=t[n],this[r]=this[n]+a):L(i,[x,u])?(this[r]=t[r],this[n]=this[r]-a):i===l&&(this[n]=t[n]+(t[o]()-a)/2,this[r]=this[n]+a)}});function Hs(t,e,i,n,s){var r=nt(s);return new Fs(i+(t-i)*Math.cos(r)+(e-n)*Math.sin(r),n-(t-i)*Math.sin(r)+(e-n)*Math.cos(r))}var zs=Bs.extend({init:function(t){Bs.fn.init.call(this,t),this.options.margin=q(this.options.margin),this.options.padding=q(this.options.padding)},reflow:function(t){var e,i=this,n=this.options,s=n.width,r=n.height,o=n.shrinkToFit,a=s&&r,h=n.margin,l=n.padding,c=n.border.width,u=function(){i.align(t,g,n.align),i.align(t,v,n.vAlign),i.paddingBox=e.clone().unpad(h).unpad(c)},d=t.clone();a&&(d.x2=d.x1+s,d.y2=d.y1+r),o&&d.unpad(h).unpad(c).unpad(l),Bs.fn.reflow.call(this,d),e=a?this.box=new Ds(0,0,s,r):this.box,o&&a?(u(),d=this.contentBox=this.paddingBox.clone().unpad(l)):(d=this.contentBox=e.clone(),e.pad(l).pad(c).pad(h),u()),this.translateChildren(e.x1-d.x1+h.left+c+l.left,e.y1-d.y1+h.top+c+l.top);for(var p=this.children,f=0;f<p.length;f++){var x=p[f];x.reflow(x.box)}},align:function(t,e,i){this.box.align(t,e,i)},hasBox:function(){var t=this.options;return t.border.width||t.background},createVisual:function(){Bs.fn.createVisual.call(this),this.options.visible&&this.hasBox()&&this.visual.append(lt.fromRect(this.paddingBox.toRect(),this.visualStyle()))},visualStyle:function(){var t=this.options,e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:O(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}}});R(zs,{align:d,vAlign:c,margin:{},padding:{},border:{color:m,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});var Ns=zs.extend({init:function(t,e){zs.fn.init.call(this,t),this.pointData=e},getElement:function(){var t=this.options,e=this.paddingBox,i=t.type,n=t.rotation,r=e.center(),o=e.width()/2,a=e.height()/2;if(!t.visible||!this.hasBox())return null;var h,l=this.visualStyle();if(i===f)h=new pt(new mt([K(e.x1+o,y),K(e.y1+a,y)],Math.min(o,a)),l);else if(i===s.TRIANGLE)h=lt.fromPoints([[e.x1+o,e.y1],[e.x1,e.y2],[e.x2,e.y2]],l).close();else if(i===s.CROSS)(h=new ft(l)).moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),h.moveTo(e.x1,e.y2).lineTo(e.x2,e.y1);else{var c=e.toRect();if(i===s.ROUNDED_RECT){var u=Rs(t.borderRadius,c.width()/5);c.setCornerRadius(u)}h=lt.fromRect(c,l)}return n&&h.transform(yt().rotate(-n,[r.x,r.y])),h.options.zIndex=t.zIndex,h},createElement:function(){var t=this,e=this.options.visual,i=this.pointData||{};return e?e({value:i.value,dataItem:i.dataItem,sender:this.getSender(),series:i.series,category:i.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return t.getElement()}}):this.getElement()},visualOptions:function(){var t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}},createVisual:function(){this.visual=this.createElement(),ln(this.visual,this.options.accessibilityOptions)}});R(Ns,{type:f,align:l,vAlign:l});var Gs=Ns.extend({getElement:function(){var t=new dt,e=new ft(this.visualStyle()),i=this.paddingBox,n=i.height()/2;return e.moveTo(i.x1,i.y1+n).lineTo(i.x1,i.y2).lineTo(i.x2,i.y2),t.append(e),t}});R(Gs,{width:15,height:15,align:x,vAlign:u,margin:{right:-2,bottom:2}});var Ws=Ns.extend({getElement:function(){var t=new dt,e=new ft({stroke:{color:this.options.border.color,opacity:this.options.opacity,width:this.options.height,dashType:this.options.dashType}}),i=this.paddingBox,n=i.center().y;return e.moveTo(i.x1,n).lineTo(i.x2,n),t.append(e),t},createHighlight:function(){return this.highlight=[this.createHighlightLine(),this.createHighlightMarker()],this.highlight},createHighlightLine:function(){var t=D({},{border:{color:this.options.border.color,opacity:this.options.border.opacity,dashType:this.options.border.dashType}},this.options.highlight),e=new Gs(t);return e.reflow(this.parent.paddingBox.clone()),this.highlightLine=e.getElement(),this.highlightLine},createHighlightMarker:function(){var t=D({},{background:this.options.background},this.options.highlight.markers),e=new Ns(t),i=this.parent.paddingBox,n=t.border.width,s=this.parent.box.clone();return s.pad({left:n-i.x1,top:n-i.y1}),e.reflow(s),this.highlightMarker=e.getElement(),this.highlightMarker}});R(Ws,{border:{width:0},type:s.RECT,align:d,vAlign:l,highlight:{border:{width:2},markers:{type:f,width:Ms,height:Ms,border:{width:2,color:p},align:d,vAlign:c}}});var qs=Ns.extend({createHighlight:function(){var t=D({},{background:this.options.background},this.options.highlight.markers),e=new Ns(t),i=this.paddingBox.clone(),n=this.parent.box.clone();return i.align(n,g,d),i.align(n,v,c),e.reflow(i),this.highlight=[e.getElement()],this.highlight}});R(qs,{highlight:{markers:{type:f,width:Ms,height:Ms,border:{width:2,color:p},margin:{top:-3,left:-3}}}});var Xs=j.extend({init:function(t){j.fn.init.call(this,t),this.createContainer(),t.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel()),this._id=Xi(),this.options.accessibility.ariaChecked=t.active},createContainer:function(){this.container=new e.FloatElement({vertical:!1,wrap:!1,align:l,spacing:this.options.spacing}),this.append(this.container)},createMarker:function(){this.markerWrap=new j({vertical:!1,shrinkToFit:!0,wrap:!1,margin:1,width:22,height:22}),this.container.append(this.markerWrap),this.createMarkerArea(),this.options.markers.visible&&(this._marker=this._createMarker(),this.markerWrap.append(this._marker))},createMarkerArea:function(){var t=this.options,e=t.markerColor,i=t.line;void 0===i&&(i={});var n={border:{color:i.color||e,opacity:i.opacity,dashType:i.dashType}};return this._createLine(n)||this._createMarkerLine(n,i)||this._createSquare()},markerOptions:function(){var t=this.options,e=t.markers;void 0===e&&(e={});var i=t.markerColor,n=e.border;return void 0===n&&(n={}),e.zIndex=void 0,D({},e,{border:{color:n.color||i},highlight:t.highlight.markers})},_highlightOptions:function(){var t=this.options;return D({markers:{type:t.markers.type}},t.highlight)},_createLine:function(t){var e=this.options;return e.type!==ae||e.markers.visible||(this._line=new Ws(D({},{background:e.markerColor,highlight:this._highlightOptions()},t,e.line)),this.markerWrap.append(this._line)),this._line},_createMarkerLine:function(t,e){return this.options.type===ae&&(this._markerLineArea=new Gs(D({},{border:{width:e.height}},t)),this.markerWrap.append(this._markerLineArea)),this._markerLineArea},_createSquare:function(){var e=this.options;return e.type===jt&&(this._square=new qs(t.extend({},{border:e.border,vAlign:e.markers.visible?u:l,highlight:this._highlightOptions(),visual:e.visual},e.area,{background:e.area.background||e.markerColor})),this.markerWrap.append(this._square)),this._square},_createMarker:function(){return new Os(this.markerOptions())},_highlightMarkers:function(){this.options.active&&this._toggleHighlight(!0)},_restoreMarkers:function(){this._toggleHighlight(!1)},_toggleHighlight:function(t){var e=this;if(this.options.highlight.visible){var i=this._marker||this._square||this._line;if(i&&i===this._line&&this._line.visual.visible(!t),i){var n=i.highlight;n||(n=i.createHighlight()).forEach((function(t){return t&&e.markerWrap.appendVisual(t)})),n.forEach((function(e){return e&&e.visible(t)}))}}},createLabel:function(){var t=this.options,e=D({},t.labels);this.container.append(new N(t.text,e))},getAriaLabelText:function(){return this.options.text},focusVisual:function(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0),this._highlightMarkers()},clearFocusFromVisual:function(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1),this._restoreMarkers()},renderComplete:function(){j.fn.renderComplete.call(this);var t=this.options.cursor||{},e=this._itemOverlay=lt.fromRect(this.container.box.toRect(),{fill:{color:p,opacity:0},stroke:null,cursor:t.style||t});this.appendVisual(e)},click:function(t,e){var i=this.eventArgs(e);!t.trigger(Oe,i)&&e&&"contextmenu"===e.type&&e.preventDefault()},over:function(t,e){var i=this.eventArgs(e);return t.trigger(Be,i)||(t._legendItemHover(i.seriesIndex,i.pointIndex),this._highlightMarkers()),!0},out:function(t,e){t._unsetActivePoint(),this._restoreMarkers(),t.trigger(Fe,this.eventArgs(e))},eventArgs:function(t){var e=this.options;return{element:z(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}},createVisual:function(){j.fn.createVisual.call(this);var t=this.options;if(this.options.visible){var e=D({ariaLabel:t.text},t.accessibility);ln(this.visual,e)}},renderVisual:function(){var t=this,e=this.options,i=e.visual;i?(this.visual=i({active:e.active,series:e.series,sender:this.getSender(),pointIndex:e.pointIndex,options:{type:e.type,markers:D({background:this.options.markerColor},this.markerOptions()),labels:e.labels},createVisual:function(){t.createVisual(),t.renderChildren(),t.renderComplete();var e=t.visual;return delete t.visual,e}}),this._marker=this._markerLineArea=this._square=this._line=null,this.addVisual()):j.fn.renderVisual.call(this)},createFocusHighlight:function(t){var e=t.stroke.width;return lt.fromRect(this.container.box.pad(e/2).toRect(),t)}});R(Xs,{accessibility:{role:ai,className:hi,ariaRoleDescription:li},markers:{},highlight:{visible:!0,markers:{}}});var Ys="custom",Us=I.extend({init:function(t,e){void 0===e&&(e={}),I.fn.init.call(this,t),this.chartService=e,L(this.options.position,[c,x,u,d,Ys])||(this.options.position=x),this.createContainers(),this.createLegendTitle(t.title),this.createItems()},createContainers:function(){var t=this.options,e=t.position,i=t.align,n=e,s=l;e===Ys?n=d:L(e,[c,u])?(n=i===b?d:i===_?x:l,s=e):i&&(i===b?s=c:i===_&&(s=u)),this.container=new j({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:s,align:n,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new j({vAlign:s,align:n,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)},createItems:function(){var e=this.getService(),i=this.options,n=this.isVertical(),s=new Ls({vertical:n,spacing:i.spacing,rtl:e.rtl},e),r=i.data;i.reverse&&(r=r.slice(0).reverse());for(var o=r.length,a=0;a<o;a++){var h=r[a],l=h.series||{},c=l.markers;void 0===c&&(c={});var u=l.dashType,d=l.legendItem,p=l.opacity,g=D({visible:!1!==c.visible,type:f},c);delete g.size;var v=D({},{markers:g,labels:i.labels,rtl:e.rtl,line:t.extend({},{dashType:u},i.line),area:t.extend({},{opacity:p},i.area),opacity:p,accessibility:i.accessibility},i.item,d,h,{markers:i.markers});s.append(new Xs(v))}s.render(),this.itemsContainer.append(s)},isVertical:function(){var t=this.options,e=t.orientation,i=t.position;return i===Ys&&e!==s.HORIZONTAL||(S(e)?e!==s.HORIZONTAL:L(i,[d,x]))},hasItems:function(){return this.container.children[0].children.length>0},getItems:function(){return this.itemsContainer.children[0].children},reflow:function(t){var e=this.options,i=t.clone();this.hasItems()?(e.position===Ys?(this.containerCustomReflow(i),this.box=i):this.containerReflow(i),this.hasTitle()&&this.title.reflow(new T(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=i},containerReflow:function(t){var e=this.options,i=this.container,n=e.position,s=e.width,r=e.height,o=n===c||n===u?g:v,a=this.isVertical(),h=t.clone(),l=t.clone();n!==d&&n!==x||(l.y1=h.y1=0),a&&r?(l.y2=l.y1+r,l.align(h,v,i.options.vAlign)):!a&&s&&(l.x2=l.x1+s,l.align(h,g,i.options.align)),i.reflow(l);var p=(l=i.box).clone();(e.offsetX||e.offsetY)&&(l.translate(e.offsetX,e.offsetY),i.reflow(l)),p[o+1]=t[o+1],p[o+2]=t[o+2],this.box=p},containerCustomReflow:function(t){var e=this.options,i=this.container,n=e.offsetX,s=e.offsetY,r=e.width,o=e.height,a=this.isVertical(),h=t.clone();a&&o?h.y2=h.y1+o:!a&&r&&(h.x2=h.x1+r),i.reflow(h),h=i.box,i.reflow(new T(n,s,n+h.width(),s+h.height()))},renderVisual:function(){this.hasItems()&&I.fn.renderVisual.call(this)},createLegendTitle:function(t){var e=D({},{color:m,position:c,align:l},t),i=e.text;if(t&&!1!==t.visible&&t.text){if(S(e)&&e.visible){var n=G(e);n?i=n({text:i}):e.format&&(i=this.chartService.format.auto(e.format,i))}this.title=new N(i,e),this.createTitleLayout(),this.appendTitleLayoutContent()}},createTitleLayout:function(){this.layout=new e.FloatElement({vertical:!0,wrap:!1}),this.container.append(this.layout)},hasTitle:function(){return Boolean(this.options.title&&!1!==this.options.title.visible&&this.options.title.text)},appendTitleLayoutContent:function(){this.options.title.position===u?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))}});R(Us,{position:x,data:[],offsetX:0,offsetY:0,margin:q(2),padding:q(5),border:{color:m,width:0},item:{cursor:s.POINTER,spacing:6},spacing:6,background:"",zIndex:1,markers:{},line:{width:20,height:2,cursor:s.POINTER,opacity:1},area:{type:s.SQUARE,align:x,width:15,height:15}});var Zs=i.extend({init:function(){this._registry=[]},register:function(t,e){this._registry.push({type:t,seriesTypes:e})},create:function(t,e,i){for(var n,s=this._registry,r=s[0],o=0;o<s.length;o++){var a=s[o];n=Ri(t,a.seriesTypes);var h=Ri(t,Me);if(n.length-h.length>0){r=a;break}}return new r.type(n,e,i)}});Zs.current=new Zs;function js(t){var e=document.createElement("div");return t&&(e.className=t),e}function $s(t){for(var i=t;i&&!e.hasClasses(i,"k-handle");)i=i.parentNode;return i}var Ks=i.extend({init:function(t,i,n,s){var r=t.element;this.options=D({},this.options,n),this.chart=t,this.observer=s,this.chartElement=r,this.categoryAxis=i,this._dateAxis=this.categoryAxis instanceof e.DateCategoryAxis,this.initOptions(),this.visible=this.options.visible&&r.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())},onPane:function(t){return this.categoryAxis.pane===t},createElements:function(){var t=this.options,e=this.wrapper=js("k-selector k-pointer-events-none");et(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});var i=this.selection=js("k-selection k-pointer-events-none");this.leftMask=js("k-mask k-pointer-events-none"),this.rightMask=js("k-mask k-pointer-events-none"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(i);var n=this.body=js("k-selection-bg k-pointer-events-none");i.appendChild(n);var s=this.leftHandle=js("k-handle k-left-handle k-pointer-events-auto"),r=this.rightHandle=js("k-handle k-right-handle k-pointer-events-auto");s.appendChild(js()),r.appendChild(js()),i.appendChild(s),i.appendChild(r),this.chartElement.appendChild(e);var o=et(i,["borderLeftWidth","borderRightWidth","height"]),a=et(s,"height").height,h=et(r,"height").height;t.selection={border:{left:o.borderLeftWidth,right:o.borderRightWidth}},et(s,{top:(o.height-a)/2}),et(r,{top:(o.height-h)/2}),e.style.cssText=e.style.cssText},bindEvents:function(){var t;!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),st(this.chartElement,((t={})[gi]=this._mousewheelHandler,t)));this._domEvents=rt.DomEventsBuilder.create(this.chartElement,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},initOptions:function(){var t=this.options,e=this.categoryAxis.pane.chartsBox(),i=this.chart.chartService.intl;this._dateAxis&&D(t,{min:F(i,t.min),max:F(i,t.max),from:F(i,t.from),to:F(i,t.to)});var n=et(this.chartElement,["paddingLeft","paddingTop"]),s=n.paddingLeft,r=n.paddingTop;this.options=D({},{width:e.width(),height:e.height()+.1,padding:{left:s,top:r},offset:{left:e.x1+s,top:e.y1+r},from:t.min,to:t.max},t)},destroy:function(){if(this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper){var t;if(this._mousewheelHandler)ot(this.chartElement,((t={})[gi]=this._mousewheelHandler,t)),this._mousewheelHandler=null;this.chartElement.removeChild(this.wrapper),this.wrapper=null}},_rangeEventArgs:function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},_pointInPane:function(t,e){var i=this.categoryAxis.pane.box,n=this.chart._toModelCoordinates(t,e);return i.containsPoint(n)},_start:function(t){var i=this.options,n=z(t);if(!this._state&&n){var s=e.eventCoordinates(t);if(this._pointInPane(s.x,s.y)){var r=$s(n),o=this.body.getBoundingClientRect(),a=!r&&s.x>=o.x&&s.x<=o.x+o.width&&s.y>=o.y&&s.y<=o.y+o.height;this.chart._unsetActivePoint(),this._state={moveTarget:r,startLocation:t.x?t.x.location:0,inBody:a,range:{from:this._index(i.from),to:this._index(i.to)}};var h=this._rangeEventArgs({from:this._index(i.from),to:this._index(i.to)});this.trigger(Ke,h)&&(this._state=null)}}},_press:function(t){var i;(i=this._state?this._state.moveTarget:$s(z(t)))&&e.addClass(i,"k-handle-active")},_move:function(t){if(this._state){var i=this,n=i._state,s=i.options,r=i.categoryAxis,o=n.range,a=n.moveTarget,h=r.options.reverse,l=this._index(s.from),c=this._index(s.to),u=this._index(s.min),d=this._index(s.max),p=n.startLocation-t.x.location,f=o.from,g=o.to,v=o.to-o.from,x=et(this.wrapper,"width").width/(r.categoriesCount()-1),m=Math.round(p/x)*(h?-1:1);if(a||n.inBody){var y=a&&e.hasClasses(a,"k-left-handle"),_=a&&e.hasClasses(a,"k-right-handle");n.inBody?(o.from=Math.min(Math.max(u,l-m),d-v),o.to=Math.min(o.from+v,d)):y&&!h||_&&h?(o.from=Math.min(Math.max(u,l-m),d-1),o.to=Math.max(o.from+1,o.to)):(y&&h||_&&!h)&&(o.to=Math.min(Math.max(u+1,c-m),d),o.from=Math.min(o.to-1,o.from)),o.from===f&&o.to===g||(this.move(o.from,o.to),this.trigger(Qe,this._rangeEventArgs(o)))}}},_end:function(){if(this._state){var t=this._state.moveTarget;t&&e.removeClass(t,"k-handle-active");var i=this._state.range;this.set(i.from,i.to),this.trigger(Je,this._rangeEventArgs(i)),delete this._state}},_tap:function(t){var e=this.options,i=this.categoryAxis,n=this.chart._eventCoordinates(t),s=i.pointCategoryIndex(new P(n.x,i.box.y1)),r=this._index(e.from),o=this._index(e.to),a=this._index(e.min),h=this._index(e.max),l=o-r,c=r+l/2,u={},d=3===t.event.which,p=Math.round(c-s);this._state||d||(this.chart._unsetActivePoint(),i.options.justified||p--,u.from=Math.min(Math.max(a,r-p),h-l),u.to=Math.min(u.from+l,h),this._start(t),this._state&&(this._state.range=u,this.trigger(Qe,this._rangeEventArgs(u)),this._end()))},_mousewheel:function(t){var i=this,n=e.mousewheelDelta(t);if(this._start(t),this._state){var s=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(n)>1&&(n*=3),this.options.mousewheel.reverse&&(n*=-1),this.expand(n)&&this.trigger(Qe,{axis:this.categoryAxis.options,delta:n,originalEvent:t,from:this._value(s.from),to:this._value(s.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){i._end()}),vi)}},_gesturestart:function(t){var e=this.options,i=t.touches[0];if(this._pointInPane(i.pageX,i.pageY)){this._state={range:{from:this._index(e.from),to:this._index(e.to)}};var n=this._rangeEventArgs(this._state.range);this.trigger(Ke,n)?this._state=null:t.preventDefault()}},_gestureend:function(){this._state&&(this.trigger(Je,this._rangeEventArgs(this._state.range)),delete this._state)},_gesturechange:function(t){if(this._state){var e=this,i=e.chart,n=e._state,s=e.options,r=e.categoryAxis,o=n.range,a=i._toModelCoordinates(t.touches[0].x.location).x,h=i._toModelCoordinates(t.touches[1].x.location).x,l=Math.min(a,h),c=Math.max(a,h);t.preventDefault(),o.from=r.pointCategoryIndex(new P(l))||s.min,o.to=r.pointCategoryIndex(new P(c))||s.max,this.move(o.from,o.to),this.trigger(Qe,this._rangeEventArgs(o))}},_index:function(t){var e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e},_value:function(t){var e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t))>this.options.max&&(e=this.options.max),e},_slot:function(t){var e=this.categoryAxis,i=this._index(t);return e.getSlot(i,i,!0)},move:function(t,e){var i=this.options,n=this.categoryAxis.options.reverse,s=i.offset,r=i.padding,o=i.selection.border,a=n?e:t,h=n?t:e,l="x"+(n?2:1),c=this._slot(a),u=K(c[l]-s.left+r.left);et(this.leftMask,{width:u}),et(this.selection,{left:u}),c=this._slot(h);var d=K(i.width-(c[l]-s.left+r.left));et(this.rightMask,{width:d});var p=i.width-d;p!==i.width&&(p+=o.right),et(this.rightMask,{left:p}),et(this.selection,{width:Math.max(i.width-(u+d)-o.right,0)})},set:function(t,e){var i=this.options,n=this._index(i.min),s=this._index(i.max),r=Q(this._index(t),n,s),o=Q(this._index(e),r+1,s);i.visible&&this.move(r,o),i.from=this._value(r),i.to=this._value(o)},expand:function(t){var e=this.options,i=this._index(e.min),n=this._index(e.max),s=e.mousewheel.zoom,r=this._index(e.from),o=this._index(e.to),a={from:r,to:o},h=D({},a);if(this._state&&(a=this._state.range),s!==x&&(a.from=Q(Q(r-t,0,o-1),i,n)),s!==d&&(a.to=Q(Q(o+t,a.from+1,n),i,n)),a.from!==h.from||a.to!==h.to)return this.set(a.from,a.to),!0},zoom:function(t,e){var i=this.options,n=this._index(i.min),s=this._index(i.max),r=this._index(i.from),o=this._index(i.to),a={from:r,to:o},h=D({},a),l=this.categoryAxis.options.reverse,c=g+(l?"2":"1"),u=this.categoryAxis.lineBox(),d=Math.abs(u[c]-e[g]),p=u.width(),f=K(d/p,2),v=K(f*t),x=K((1-f)*t);if(this._state&&(a=this._state.range),a.from=Q(Q(r-v,0,o-1),n,s),a.to=Q(Q(o+x,a.from+1,s),n,s),a.from!==h.from||a.to!==h.to)return this.set(a.from,a.to),!0},trigger:function(t,e){return(this.observer||this.chart).trigger(t,e)}});R(Ks,{visible:!0,mousewheel:{zoom:"both"},min:o,max:r});var Qs=Tn.extend({show:function(t){if(t&&t.tooltipAnchor&&(!this._current||this._current!==t)){var e=D({},this.options,t.options.tooltip),i=t.tooltipAnchor();i?(this._current=t,Tn.fn.show.call(this,{point:t,anchor:i},e,t)):this.hide()}},hide:function(){delete this._current,Tn.fn.hide.call(this)}}),Js=Tn.extend({init:function(t,e){Tn.fn.init.call(this,t.chartService,e),this.plotArea=t,this.formatService=t.chartService.format},showAt:function(t,e){var i=tt(t,(function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)}));if(i.length>0){var n=i[0],s=this.plotArea.categoryAxis.getSlot(n.categoryIx),r=e?this._slotAnchor(e,s):this._defaultAnchor(n,s);this.show({anchor:r,shared:!0,points:t,category:n.category,categoryText:this.formatService.auto(this.options.categoryFormat,n.category),series:this.plotArea.series},this.options)}},_slotAnchor:function(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}},_defaultAnchor:function(t,e){var i=t.owner.pane.chartsBox(),n=this.plotArea.categoryAxis.options.vertical,s=i.center(),r=e.center();return{point:n?new P(s.x,r.y):new P(r.x,s.y),align:{horizontal:"center",vertical:"center"}}}});R(Js,{categoryFormat:"{0:d}"});var tr=ct.extend({setup:function(){var t=this.element,e=this.options;if(t.bbox()){this.origin=e.origin;var i=e.vertical?v:g,n=this.fromScale=new xt(1,1);n[i]=Ot,t.transform(yt().scale(n.x,n.y))}else this.abort()},step:function(t){var i=e.interpolateValue(this.fromScale.x,1,t),n=e.interpolateValue(this.fromScale.y,1,t);this.element.transform(yt().scale(i,n,this.origin))},abort:function(){ct.fn.abort.call(this),this.element.transform(null)}});R(tr,{duration:Vt}),ut.current.register($t,tr);var er=ct.extend({setup:function(){var t=this.center=this.element.bbox().center();this.element.transform(yt().scale(Ot,Ot,t))},step:function(t){this.element.transform(yt().scale(t,t,this.center))}});R(er,{easing:"easeOutElastic"}),ut.current.register(Qt,er);var ir=ct.extend({setup:function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},step:function(t){this.element.opacity(t*this.fadeTo)}});R(ir,{duration:200,easing:"linear"}),ut.current.register(Lt,ir);var nr=ct.extend({setup:function(){this.element.transform(yt().scale(Ot,Ot,this.options.center))},step:function(t){this.element.transform(yt().scale(t,t,this.options.center))}});R(nr,{easing:"easeOutElastic",duration:Vt}),ut.current.register(le,nr);var sr=An.extend({render:function(){An.fn.render.call(this),this.renderSegments()},createSegment:function(t,e,i){return new(e.style===Ut?Ki:Ui)(t,e,i)},animationPoints:function(){return An.fn.animationPoints.call(this).concat(this._segments)},createMissingValue:function(t,e){if(e===Gt){var i={x:t.x,y:t.y};return Oi(i.x)||(i.x=0),Oi(i.y)||(i.y=0),i}}});function rr(t,e,i){var n=[],s=e.xMin,r=e.xMax,o=(i||{}).forecast;o&&(o.before>0&&(s-=o.before),o.after>0&&(r+=o.after));var a=(i||{}).samplingInterval,h=O(a,function(t,e){var i=K(e-t,w-1);if(0===i){if(0===e)return.1;i=Math.abs(e)}var n=Math.pow(10,Math.floor(Math.log(i)/Math.log(10))),s=K(i/n,w);return K(n*(s<1.904762?.2:s<4.761904?.5:s<9.523809?1:2),w)}(s,r)/10);a<=0&&(h=r-s);for(var l=s;l<=r;l+=h)n.push([l,t(l)]);return n}D(sr.prototype,Qi);var or=function(t){return function(e){var i=e.valueFields;return{xValue:i.x,yValue:Math.log(i[t])}}};var ar=function(t){return function(e){var i=e.valueFields;return{xValue:i.x,yValue:i[t]}}};function hr(t,e){for(var i=Number.MAX_VALUE,n=Number.MIN_VALUE,s=0;s<t.length;s++){var r=e(t[s]),o=r.xValue,a=r.yValue;isFinite(o)&&null!==o&&isFinite(a)&&null!==a&&(i=Math.min(o,i),n=Math.max(o,n))}return{xMin:i,xMax:n}}var lr=function(t){return function(e){var i=e.valueFields;return{xValue:i.x,yValue:i[t]}}},cr=function(t){return function(e){var i=e.valueFields;return{xValue:Math.log(i.x),yValue:i[t]}}};var ur=function(t){return function(e){var i=e.valueFields;return{xValue:Math.log(i.x),yValue:Math.log(i[t])}}};var dr={};dr[Pe]=function(e){var i=e.options,n=function(t){var e=t.seriesValues,i=t.options,n=e();if(!rs(n,i.field))return null;var s=ss(n,or(i.field)),r=s.slope,o=s.intercept,a=s.count,h=s.xMin,l=s.xMax,c={xMin:h,xMax:l};if(a>0){var u=Math.exp(o),d=r;return rr((function(t){return u*Math.exp(d*t)}),c,i.trendline)}return null}({seriesValues:e.seriesValues,options:i});return n?t.extend({},i,{type:"scatterLine",data:n}):null},dr[Te]=function(e){var i=e.options,n=function(t){var e=t.seriesValues,i=t.options,n=ss(e(),ar(i.field)),s=n.slope,r=n.intercept,o=n.count,a=n.xMin,h=n.xMax,l={xMin:a,xMax:h};if(o>0)return rr((function(t){return s*t+r}),l,i.trendline);return null}({seriesValues:e.seriesValues,options:i});return n?t.extend({},i,{type:"scatterLine",data:n}):null},dr[Ee]=function(e){var i=e.options,n=function(t){var e=t.seriesValues,i=t.options,n=e();if(!rs(n,"x"))return null;var s=ss(n,cr(i.field)),r=s.slope,o=s.intercept,a=s.count,h=hr(n,lr(i.field));if(a>0){var l=r,c=o;return rr((function(t){return l*Math.log(t)+c}),h,i.trendline)}return null}({seriesValues:e.seriesValues,options:i});return n?t.extend({},i,{type:"scatterLine",data:n}):null},dr[Re]=function(e){var i=e.options,n=function(t){var e=t.options,i=t.seriesValues,n=(e.trendline||{}).period||yi,s=cs(i({before:n,after:n}),ar(e.field),n);if(s.length>0)return s;return null}(e);return n?t.extend({},i,{type:"scatterLine",data:n}):null},dr[Ve]=function(e){var i=e.options,n=function(t){var e=t.seriesValues,i=t.options,n=(i.trendline||{}).order,s=ar(i.field),r=fs(e(),s,n),o=r.count,a=r.valueMapper,h=r.xMin,l=r.xMax,c={xMin:h,xMax:l};if(o>0)return rr(a,c,i.trendline);return null}({seriesValues:e.seriesValues,options:i});return n?t.extend({},i,{type:"scatterLine",data:n}):null},dr[Le]=function(e){var i=e.options,n=function(t){var e=t.seriesValues,i=t.options,n=e();if(!rs(n,"x"))return null;var s=ss(n,ur(i.field)),r=s.slope,o=s.intercept,a=s.count,h=hr(n,ar(i.field));if(a>0){var l=Math.exp(o),c=r;return rr((function(t){return l*Math.pow(t,c)}),h,i.trendline)}return null}({seriesValues:e.seriesValues,options:i});return n?t.extend({},i,{type:"scatterLine",data:n}):null};var pr=On.extend({initFields:function(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new an,this.yAxisRangeTracker=new an},render:function(t){var e=this;void 0===t&&(t=this.panes),this.series=[].concat(this.originalSeries),this.createTrendlineSeries();for(var i=this.groupSeriesByPane(),n=0;n<t.length;n++){var s=t[n],r=i[s.options.name||"default"]||[];e.addToLegend(r);var o=e.filterVisibleSeries(r);o&&(e.createScatterChart(Ri(o,ye),s),e.createScatterLineChart(Ri(o,_e),s),e.createBubbleChart(Ri(o,Qt),s))}this.createAxes(t)},appendChart:function(t,e){this.xAxisRangeTracker.update(t.xAxisRanges),this.yAxisRangeTracker.update(t.yAxisRanges),On.fn.appendChart.call(this,t,e)},removeAxis:function(t){var e=t.options.name;On.fn.removeAxis.call(this,t),t.options.vertical?(this.yAxisRangeTracker.reset(e),delete this.namedYAxes[e]):(this.xAxisRangeTracker.reset(e),delete this.namedXAxes[e]),t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY},seriesPaneName:function(t){var e=this.options,i=t.xAxis,n=[].concat(e.xAxis),s=tt(n,(function(t){return t.name===i}))[0],r=t.yAxis,o=[].concat(e.yAxis),a=tt(o,(function(t){return t.name===r}))[0],h=(e.panes||[{}])[0].name||"default";return(s||{}).pane||(a||{}).pane||h},createScatterChart:function(t,e){t.length>0&&this.appendChart(new An(this,{series:t,clip:e.options.clip}),e)},createScatterLineChart:function(t,e){t.length>0&&this.appendChart(new sr(this,{series:t,clip:e.options.clip}),e)},createBubbleChart:function(t,e){t.length>0&&this.appendChart(new kn(this,{series:t,clip:e.options.clip}),e)},createXYAxis:function(t,i,n){for(var s,r=t.name,o=i?this.namedYAxes:this.namedXAxes,a=i?this.yAxisRangeTracker:this.xAxisRangeTracker,l=D({reverse:!i&&this.chartService.rtl},t,{vertical:i}),c=Ti(l.type,ci),u=a.query(),d=c?{min:.1,max:1}:{min:0,max:1},p=a.query(r)||u||d,f=[l.min,l.max],g=this.series,v=0;v<g.length;v++){var x=g[v],m=x[i?"yAxis":"xAxis"];if(m===l.name||0===n&&!m){var y=It.current.bindPoint(x,0).valueFields;f.push(y[i?"y":"x"]);break}}0===n&&u&&(p.min=Math.min(p.min,u.min),p.max=Math.max(p.max,u.max));for(var _=0;_<f.length;_++)if(f[_]instanceof Date){s=!0;break}var b=new(Ti(l.type,h)||!l.type&&s?e.DateValueAxis:c?e.LogarithmicAxis:e.NumericAxis)(p.min,p.max,l,this.chartService);if(b.axisIndex=n,r){if(o[r])throw new Error((i?"Y":"X")+" axis with name "+r+" is already defined");o[r]=b}return this.appendAxis(b),b},createAxes:function(t){for(var e=this,i=this.options,n=[].concat(i.xAxis),s=[],r=[].concat(i.yAxis),o=[],a=0;a<n.length;a++){var h=e.findPane(n[a].pane);L(h,t)&&s.push(e.createXYAxis(n[a],!1,a))}for(var l=0;l<r.length;l++){var c=e.findPane(r[l].pane);L(c,t)&&o.push(e.createXYAxis(r[l],!0,l))}this.axisX=this.axisX||s[0],this.axisY=this.axisY||o[0]},_dispatchEvent:function(t,e,i){for(var n=t._eventCoordinates(e),s=new P(n.x,n.y),r=this.axes,o=r.length,a=[],h=[],l=0;l<o;l++){var c=r[l],u=c.options.vertical?h:a,d=c.getValue(s);null!==d&&u.push(d)}a.length>0&&h.length>0&&t.trigger(i,{element:z(e),originalEvent:e,x:Fi(a),y:Fi(h)})},updateAxisOptions:function(t,e){var i=t.options.vertical,n=this.groupAxes(this.panes),s=(i?n.y:n.x).indexOf(t);fr(this.options,s,i,e),fr(this.originalOptions,s,i,e)},trendlineFactory:function(t,e){var i=this.seriesValues.bind(this,e.index),n=ns(dr,t.type,{options:t,seriesValues:i});return n&&(n.xAxis=e.xAxis,n.yAxis=e.yAxis),n},seriesValues:function(t){for(var e=[],i=this.series[t],n=0;n<i.data.length;n++){var s=this.bindPoint(i,n);e.push({pointIx:n,valueFields:s.valueFields})}return e}});function fr(t,e,i,n){var s=[].concat(i?t.yAxis:t.xAxis)[e];D(s,n)}R(pr,{xAxis:{},yAxis:{}}),D(pr.prototype,zn);var gr=I.extend({init:function(t,e,i){I.fn.init.call(this,i),this.value=t,this.sector=e},render:function(){this._rendered||!1===this.visible||(this._rendered=!0,this.createLabel())},createLabel:function(){var t=this.options.labels,e=this.owner.chartService,i=this.getLabelText(t);if(t.visible&&(i||0===i)){if(t.position===l||t.position===di)t.color||(t.color=it(this.options.color)),t.background||(t.background=this.options.color);else{var n=e.theme.seriesDefaults.labels;t.color=t.color||n.color,t.background=t.background||n.background}this.label=new N(i,D({},t,{align:l,vAlign:"",animation:{type:Lt,delay:this.animationDelay}}),this.pointData()),this.append(this.label)}},getLabelText:function(t){var e=G(t);return e?e(this.pointData()):this.owner.chartService.format.auto(t.format,this.value)},reflow:function(t){this.render(),this.box=t,this.reflowLabel()},reflowLabel:function(){var t=this.options.labels,e=this.label,i=this.sector.clone(),n=t.distance,s=i.middle();if(e){var r,o=e.box.height(),a=e.box.width();if(t.position===l)i.radius=Math.abs((i.radius-o)/2)+o,r=i.point(s),e.reflow(new T(r.x,r.y-o/2,r.x,r.y));else if(t.position===di)i.radius=i.radius-o/2,r=i.point(s),e.reflow(new T(r.x,r.y-o/2,r.x,r.y));else{var h;(r=i.clone().expand(n).point(s)).x>=i.center.x?(h=r.x+a,e.orientation=x):(h=r.x-a,e.orientation=d),e.reflow(new T(h,r.y-o,r.x,r.y))}}},createVisual:function(){var t=this,e=this.sector,i=this.options;if(I.fn.createVisual.call(this),this.addAccessibilityAttributesToVisual(),this.value)if(i.visual){var n=(e.startAngle+180)%360,s=i.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new xt(e.center.x,e.center.y),radius:e.radius,innerRadius:e.innerRadius,startAngle:n,endAngle:n+e.angle,options:i,sender:this.getSender(),createVisual:function(){var e=new dt;return t.createSegmentVisual(e),e}});s&&this.visual.append(s)}else this.createSegmentVisual(this.visual)},createSegmentVisual:function(t){var e=this.sector,i=this.options,n=i.border||{},s=n.width>0?{stroke:{color:n.color,width:n.width,opacity:n.opacity,dashType:n.dashType}}:{},r=i.color,o={color:r,opacity:i.opacity},a=this.createSegment(e,D({fill:o,stroke:{opacity:i.opacity},zIndex:i.zIndex},s));t.append(a),Mi(i)&&t.append(this.createGradientOverlay(a,{baseColor:r,fallbackFill:o},D({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},i.overlay)))},createSegment:function(t,i){return i.singleSegment?new pt(new mt(new xt(t.center.x,t.center.y),t.radius),i):e.ShapeBuilder.current.createRing(t,i)},createAnimation:function(){var t=this.options,e=this.sector.center;D(t,{animation:{center:[e.x,e.y],delay:this.animationDelay}}),I.fn.createAnimation.call(this)},createHighlight:function(t){var e=this.options.highlight||{},i=e.border||{};return this.createSegment(this.sector,D({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new xt(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}},createFocusHighlight:function(t){var e=this.options.accessibility.highlight.border.width,i=this.createSegment(this.sector,D({},t,{stroke:{width:2*e}})),n=new ft;return n.paths.push(lt.fromRect(i.bbox())),n.paths.push(this.createSegment(this.sector,{})),i.clip(n),i},tooltipAnchor:function(){var t=this.sector.clone().expand(5),e=t.middle();return{point:t.point(e),align:mr(e+180)}},formatValue:function(t){return this.owner.formatPointValue(this,t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},getIndex:function(){return this.index}}),vr=K(nt(30),w),xr=K(nt(60),w);function mr(t){var e=nt(t),i=K(Math.sin(e),w),n=K(Math.cos(e),w);return{horizontal:Math.abs(i)>xr?l:n<0?x:d,vertical:Math.abs(i)<vr?l:i<0?u:c}}R(gr,{color:p,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:s.DEFAULT_FONT,margin:q(.5),align:f,zIndex:1,position:fi},animation:{type:le},highlight:{visible:!0,border:{width:1}},visible:!0,accessibility:{role:si,className:ri,ariaRoleDescription:oi}}),D(gr.prototype,Wi),D(gr.prototype,cn);var yr={createLegendItem:function(t,e,i){var n=this.options.legend||{},s=n.labels||{},r=n.inactiveItems||{},o=r.labels||{};if(i&&!1!==i.visibleInLegend){var a,h,l=!1!==i.visible,c=l?G(s):G(o)||G(s),u=i.category;c&&(u=c({text:u,series:i.series,dataItem:i.dataItem,percentage:i.percentage,value:t})),l?(a={},h=e.color):(a={color:o.color,font:o.font},h=(r.markers||{}).color),Oi(u)&&""!==u&&this.legendItems.push({active:l,pointIndex:i.index,text:u,series:i.series,markerColor:h,labels:a})}}},_r=I.extend({init:function(t,e){I.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.legendItems=[],this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},traverseDataPoints:function(t){var i=this.options,n=this.plotArea.options.seriesColors;void 0===n&&(n=[]);for(var s=n.length,r=i.series,o=r.length,a=0;a<o;a++){var h=r[a],c=h.data,u=Ii(h),d=u.total,p=u.points,f=u.count,g=360/d,v=void 0;isFinite(g)||(v=360/f);var x=void 0;x=S(h.startAngle)?h.startAngle:i.startAngle,a!==o-1&&h.labels.position===fi&&(h.labels.position=l);for(var m=0;m<p.length;m++){var y=p[m];if(y){var _=y.fields,b=y.value,w=y.visible,A=0!==b?v||b*g:0,k=1!==c.length&&Boolean(_.explode);M(h.color)||(h.color=_.color||n[m%s]),t(b,new e.Ring(null,0,0,x,A),{owner:this,category:S(_.category)?_.category:"",index:m,series:h,seriesIx:a,dataItem:c[m],percentage:0!==d?b/d:0,explode:k,visibleInLegend:_.visibleInLegend,visible:w,zIndex:o-a,animationDelay:this.animationDelay(m,a,o)}),!1!==w&&(x+=A)}}}},evalSegmentOptions:function(t,e,i){var n=i.series;Ei(t,{value:e,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data","content","template","visual","toggle","ariaTemplate","ariaContent"]})},addValue:function(e,i,n){var s=D({},n.series,{index:n.index});if(this.evalSegmentOptions(s,e,n),this.createLegendItem(e,s,n),!1!==n.visible){var r=new gr(e,i,s);t.extend(r,n),this.append(r),this.points.push(r)}},reflow:function(t){var e=this,i=e.options,n=e.points,s=e.seriesConfigs;void 0===s&&(s=[]);var r=n.length,o=t.clone(),a=Math.min(o.width(),o.height()),h=a/2,l=a-.85*a,c=new T(o.x1,o.y1,o.x1+a,o.y1+a),u=c.center(),d=o.center(),p=i.series.length,f=[],g=[],v=O(i.padding,l);this.targetBox=t,v=v>h-5?h-5:v,c.translate(d.x-u.x,d.y-u.y);for(var m=h-v,y=new P(m+c.x1+v,m+c.y1+v),_=0;_<r;_++){var b=n[_],w=b.sector,A=b.seriesIx;if(w.radius=m,w.center=y,s.length){var S=s[A];w.innerRadius=S.innerRadius,w.radius=S.radius}A===p-1&&b.explode&&(w.center=w.clone().setRadius(.15*w.radius).point(w.middle())),b.reflow(c);var k=b.label;k&&k.options.position===fi&&A===p-1&&(k.orientation===x?g.push(k):f.push(k))}f.length>0&&(f.sort(this.labelComparator(!0)),this.leftLabelsReflow(f)),g.length>0&&(g.sort(this.labelComparator(!1)),this.rightLabelsReflow(g)),this.box=c},leftLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},rightLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},distanceBetweenLabels:function(t){var e=H(this.points),i=e.sector,n=t.length-1,s=i.radius+e.options.labels.distance,r=[],o=t[0].box,a=K(o.y1-(i.center.y-s-o.height()-o.height()/2));r.push(a);for(var h=0;h<n;h++){var l=t[h+1].box;o=t[h].box,a=K(l.y1-o.y2),r.push(a)}return a=K(i.center.y+s-t[n].box.y2-t[n].box.height()/2),r.push(a),r},distributeLabels:function(t,e){for(var i,n,s,r=t.length,o=0;o<r;o++)for(s=-t[o],i=n=o;s>0&&(i>=0||n<r);)s=this._takeDistance(t,o,--i,s),s=this._takeDistance(t,o,++n,s);this.reflowLabels(t,e)},_takeDistance:function(t,e,i,n){var s=n;if(t[i]>0){var r=Math.min(t[i],s);s-=r,t[i]-=r,t[e]+=r}return s},reflowLabels:function(t,e){var i,n=H(this.points),s=n.sector,r=n.options.labels,o=e.length,a=r.distance,h=s.center.y-(s.radius+a)-e[0].box.height();t[0]+=2;for(var l=0;l<o;l++){var c=e[l],u=c.box;h+=t[l],i=this.hAlignLabel(u.x2,s.clone().expand(a),h,h+u.height(),c.orientation===x),c.orientation===x?(r.align!==f&&(i=s.radius+s.center.x+a),c.reflow(new T(i+u.width(),h,i,h))):(r.align!==f&&(i=s.center.x-s.radius-a),c.reflow(new T(i-u.width(),h,i,h))),h+=u.height()}},createVisual:function(){var t=this,e=this.options.connectors,i=this.points,n=i.length;I.fn.createVisual.call(this),this._connectorLines=[];for(var s=0;s<n;s++){var r=i[s],o=r.sector,a=r.label,h=o.middle(),l=(r.options.connectors||{}).color||e.color;if(a){var c=new lt({stroke:{color:l,width:e.width},animation:{type:Lt,delay:r.animationDelay}});if(a.options.position===fi){var u=a.box,d=o.center,p=o.point(h),f=new P(u.x1,u.center().y),g=void 0,v=void 0,m=void 0;p=o.clone().expand(e.padding).point(h),c.moveTo(p.x,p.y),a.orientation===x?(m=br(d,p,f,v=new P(u.x1-e.padding,u.center().y)),f=new P(v.x-4,v.y),(m=m||f).x=Math.min(m.x,f.x),t.pointInCircle(m,o.center,o.radius+4)||m.x<o.center.x?(g=o.center.x+o.radius+4,r.options.labels.align!==ee?g<f.x?c.lineTo(g,p.y):c.lineTo(p.x+8,p.y):c.lineTo(g,p.y),c.lineTo(f.x,v.y)):(m.y=v.y,c.lineTo(m.x,m.y))):(m=br(d,p,f,v=new P(u.x2+e.padding,u.center().y)),f=new P(v.x+4,v.y),(m=m||f).x=Math.max(m.x,f.x),t.pointInCircle(m,o.center,o.radius+4)||m.x>o.center.x?(g=o.center.x-o.radius-4,r.options.labels.align!==ee?g>f.x?c.lineTo(g,p.y):c.lineTo(p.x-8,p.y):c.lineTo(g,p.y),c.lineTo(f.x,v.y)):(m.y=v.y,c.lineTo(m.x,m.y))),c.lineTo(v.x,v.y),t._connectorLines.push(c),t.visual.append(c)}}}},renderVisual:function(){if(I.fn.renderVisual.call(this),e.find(this.options.series,(function(t){return t.autoFit}))){var t=this.targetBox,i=this.box.center(),n=this.visual.bbox();if(!n)return;var s=n.bottomRight(),r=Math.min((i.y-t.y1)/(i.y-n.origin.y),(t.y2-i.y)/(s.y-i.y),(i.x-t.x1)/(i.x-n.origin.x),(t.x2-i.x)/(s.x-i.x));r<1&&this.visual.transform(yt().scale(r,r,[i.x,i.y]))}},labelComparator:function(t){var e=t?-1:1;return function(t,i){return((t.parent.sector.middle()+270)%360-(i.parent.sector.middle()+270)%360)*e}},hAlignLabel:function(t,e,i,n,s){var r=e.radius,o=e.center,a=o.x,h=o.y,l=Math.min(Math.abs(h-i),Math.abs(h-n));return l>r?t:a+Math.sqrt(r*r-l*l)*(s?1:-1)},pointInCircle:function(t,e,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(i,2)},formatPointValue:function(t,e){return this.chartService.format.auto(e,t.value)},animationDelay:function(t){return 70*t},stackRoot:function(){return this}});function br(t,e,i,n){var s,r=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==o){var a=r/o;s=new P(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}return s}R(_r,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),D(_r.prototype,yr),_r.prototype.isStackRoot=!0;var wr=On.extend({render:function(){this.createPieChart(this.series)},createPieChart:function(t){var e=t[0],i=new _r(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},appendChart:function(t,e){On.fn.appendChart.call(this,t,e),Y(this.options.legend.data,t.legendItems)},getPointBelow:function(t){return this.getPointToTheRight(t)},getPointAbove:function(t){return this.getPointToTheLeft(t)}}),Ar=gr.extend({reflowLabel:function(){var t=this.options.labels,e=this.label,i=this.sector.clone(),n=i.middle();if(e){var s=e.box.height();if(t.position===l){i.radius-=(i.radius-i.innerRadius)/2;var r=i.point(n);e.reflow(new T(r.x,r.y-s/2,r.x,r.y))}else gr.fn.reflowLabel.call(this)}},createSegment:function(t,i){return e.ShapeBuilder.current.createRing(t,i)}});R(Ar,{overlay:{gradient:"roundedGlass"},labels:{position:l},animation:{type:le}}),D(Ar.prototype,Wi);var Sr=_r.extend({addValue:function(e,i,n){var s=D({},n.series,{index:n.index});if(this.evalSegmentOptions(s,e,n),this.createLegendItem(e,s,n),!1!==n.visible){var r=new Ar(e,i,s);t.extend(r,n),this.append(r),this.points.push(r)}},reflow:function(t){for(var e,i=this.options,n=t.clone(),s=Math.min(n.width(),n.height()),r=s/2,o=s-.85*s,a=i.series,h=a.length,l=O(i.padding,o),c=r-(l=l>r-5?r-5:l),u=0,d=0;d<h;d++){var p=a[d];0===d&&S(p.holeSize)&&(e=p.holeSize,c-=p.holeSize),S(p.size)?c-=p.size:u++,S(p.margin)&&d!==h-1&&(c-=p.margin)}S(e)||(c-=e=.75*((r-l)/(h+.75)));var f,g=e,v=0;this.seriesConfigs=[];for(var x=0;x<h;x++){var m=a[x];f=(g+=v)+O(m.size,c/u),this.seriesConfigs.push({innerRadius:g,radius:f}),v=m.margin||0,g=f}_r.fn.reflow.call(this,t)},animationDelay:function(t,e,i){return 50*t+Vt*(e+1)/(i+1)}});R(Sr,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});var kr=wr.extend({render:function(){this.createDonutChart(this.series)},createDonutChart:function(t){var e=t[0],i=new Sr(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},getPointBelow:function(t){return this._getNextPoint(t,this._pointsByVertical,-1)},getPointAbove:function(t){return this._getNextPoint(t,this._pointsByVertical,1)}}),Cr=On.extend({initFields:function(){this.valueAxisRangeTracker=new an},render:function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},alignAxes:function(){var t=this.valueAxis,e=t.range(),i=t.options.reverse?e.max:e.min,n=t.getSlot(i),s=this.polarAxis.getSlot(0).center,r=t.box.translate(s.x-n.x1,s.y-n.y1);t.reflow(r)},createValueAxis:function(){var t,i,n=this.valueAxisRangeTracker,s=n.query(),r=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});r.type===ci?(t=e.RadarLogarithmicAxis,i={min:.1,max:1}):(t=e.RadarNumericAxis,i={min:0,max:1});var o=n.query(name)||s||i;o&&s&&(o.min=Math.min(o.min,s.min),o.max=Math.max(o.max,s.max));var a=new t(o.min,o.max,r,this.chartService);this.valueAxis=a,this.appendAxis(a)},reflowAxes:function(){var t=this,e=t.options.plotArea,i=t.valueAxis,n=t.polarAxis,s=t.box,r=.15*Math.min(s.width(),s.height()),o=q(e.padding||{},r),a=s.clone().unpad(o),h=a.clone();h.y2=h.y1+Math.min(h.width(),h.height()),h.align(a,v,l);var c=h.clone().shrink(0,h.height()/2);n.reflow(h),i.reflow(c);var u=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:u})),this.axisBox=h,this.alignAxes(h)},backgroundBox:function(){return this.box},detachLabels:function(){}}),Ir=An.extend({pointSlot:function(t,e){var i=t.center.y-e.y1,n=P.onCircle(t.center,t.startAngle,i);return new T(n.x,n.y,n.x,n.y)}});R(Ir,{clip:!1});var Pr=sr.extend({});Pr.prototype.pointSlot=Ir.prototype.pointSlot,R(Pr,{clip:!1});var Tr=rn.extend({fillToAxes:function(t){var e=this._polarAxisCenter();t.lineTo(e.x,e.y)},_polarAxisCenter:function(){return this.parent.plotArea.polarAxis.box.center()},strokeSegments:function(){var t=this._strokeSegments;if(!t){var e=this._polarAxisCenter(),i=new X(!1),n=this.points();n.push(e),(t=this._strokeSegments=i.process(n)).pop()}return t}}),Er=nn.extend({fillToAxes:function(t){var e=this.parent.plotArea.polarAxis.box.center(),i=new vt.Segment([e.x,e.y]);t.segments.unshift(i),t.segments.push(i)}}),Rr=Pr.extend({createSegment:function(t,e,i){return(e.line||{}).style===Ut?new Tr(t,e,i):new Er(t,e,i)},createMissingValue:function(t,e){var i;return Oi(t.x)&&e!==Wt&&(i={x:t.x,y:t.y},e===Gt&&(i.y=0)),i},seriesMissingValues:function(t){return t.missingValues||Gt},_hasMissingValuesGap:function(){for(var t=this.options.series,e=0;e<t.length;e++)if(this.seriesMissingValues(t[e])===qt)return!0},sortPoints:function(t){if(t.sort(Vr),this._hasMissingValuesGap())for(var e=0;e<t.length;e++){var i=t[e];if(i)Oi(i.value.y)||this.seriesMissingValues(i.series)!==qt||delete t[e]}return t}});function Vr(t,e){return t.value.x-e.value.x}var Lr=Cr.extend({createPolarAxis:function(){var t=new e.PolarAxis(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)},render:function(){this.series=[].concat(this.originalSeries),this.createTrendlineSeries(),Cr.fn.render.call(this)},valueAxisOptions:function(t){return D(t,{majorGridLines:{type:A},minorGridLines:{type:A}},this.options.yAxis)},createValueAxis:function(){Cr.fn.createValueAxis.call(this),this.axisY=this.valueAxis},trendlineFactory:function(t,e){var i=pr.prototype.trendlineFactory.call(this,t,e);return i&&(i.type=ue),i},appendChart:function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),On.prototype.appendChart.call(this,t,e)},createCharts:function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(Ri(t,[ue]),e),this.createScatterChart(Ri(t,[de]),e),this.createAreaChart(Ri(t,[ce]),e)},createLineChart:function(t,e){if(0!==t.length){var i=new Pr(this,{series:t});this.appendChart(i,e)}},createScatterChart:function(t,e){if(0!==t.length){var i=new Ir(this,{series:t});this.appendChart(i,e)}},createAreaChart:function(t,e){if(0!==t.length){var i=new Rr(this,{series:t});this.appendChart(i,e)}},_dispatchEvent:function(t,e,i){var n=t._eventCoordinates(e),s=new P(n.x,n.y),r=this.axisX.getValue(s),o=this.axisY.getValue(s);null!==r&&null!==o&&t.trigger(i,{element:z(e),x:r,y:o})},createCrosshairs:function(){}});R(Lr,{xAxis:{},yAxis:{}}),D(Lr.prototype,zn,{seriesValues:pr.prototype.seriesValues});var Mr=en.extend({pointSlot:function(t,e){var i=t.center.y-e.y1,n=P.onCircle(t.center,t.middle(),i);return new T(n.x,n.y,n.x,n.y)},renderSegments:function(){if(en.fn.renderSegments.call(this),this._segments&&this._segments.length>1)for(var t=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e[n.seriesIx]=e[n.seriesIx]||[],e[n.seriesIx].push(n)}return e}(this._segments),e=0;e<t.length;e++){var i=t[e];if(i&&i.length>1){var n=i[0].linePoints[0],s=H(i),r=H(s.linePoints),o=0===n.categoryIx,a=r.categoryIx===r.categoriesCount-1;o&&a&&H(i).linePoints.push(n)}}},createSegment:function(t,e,i){var n=new(e.style===Ut?Ki:Ui)(t,e,i),s=this.seriesMissingValues(e);return t.length!==e.data.length&&s!==Wt||(n.options.closed=!0),n}});R(Mr,{clip:!1,limitPoints:!1});var Or=rn.extend({fillToAxes:function(){}}),Br=nn.extend({fillToAxes:function(){}}),Fr=Mr.extend({createSegment:function(t,e,i,n){var s,r,o,a=this.options.isStacked,h=(e.line||{}).style;return a&&i>0&&n&&(r=n.linePoints.slice(0),s=n),h===Ut?(o=new Or(t,e,i,s,r)).options.closed=!0:(t.push(t[0]),o=new Br(t,e,i,s,r)),o},seriesMissingValues:function(t){return t.missingValues||Gt}}),Dr=Ar.extend({init:function(t,e){Ar.fn.init.call(this,t,null,e)},getIndex:function(){return this.categoryIx}});R(Dr,{overlay:{gradient:"none"},labels:{distance:10}});var Hr=I.extend({init:function(t){I.fn.init.call(this,t),this.forEach=t.rtl?pn:dn},reflow:function(t){var e=this.options,i=this.children,n=e.gap,s=e.spacing,r=i.length,o=r+n+s*(r-1),a=t.angle/o,h=t.startAngle+a*(n/2);this.forEach(i,(function(e){var i=t.clone();i.startAngle=h,i.angle=a,e.sector&&(i.radius=e.sector.radius),e.reflow(i),e.sector=i,h+=a+a*s}))}});R(Hr,{gap:1,spacing:0});var zr=I.extend({reflow:function(t){var e=this.options.reverse,i=this.children,n=i.length,s=e?n-1:0,r=e?-1:1;this.box=new T;for(var o=s;o>=0&&o<n;o+=r){var a=i[o].sector;a.startAngle=t.startAngle,a.angle=t.angle}}}),Nr=vn.extend({pointType:function(){return Dr},clusterType:function(){return Hr},stackType:function(){return zr},categorySlot:function(t,e){return t.getSlot(e)},pointSlot:function(t,e){var i=t.clone(),n=t.center.y;return i.radius=n-e.y1,i.innerRadius=n-e.y2,i},reflowPoint:function(t,e){t.sector=e,t.reflow()},createAnimation:function(){this.options.animation.center=this.box.toRect().center(),vn.fn.createAnimation.call(this)}});Nr.prototype.reflow=Gi.prototype.reflow,R(Nr,{clip:!1,limitPoints:!1,animation:{type:"pie"}});var Gr=Cr.extend({createPolarAxis:function(){var t=new e.RadarCategoryAxis(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createTrendlineSeries(),this.createCategoryAxesLabels()},valueAxisOptions:function(t){return this._hasBarCharts&&D(t,{majorGridLines:{type:A},minorGridLines:{type:A}}),this._isStacked100&&D(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),D(t,this.options.valueAxis)},aggregateCategories:function(){_s.prototype.aggregateCategories.call(this,this.panes)},createCategoryAxesLabels:function(){_s.prototype.createCategoryAxesLabels.call(this,this.panes)},filterSeries:function(t){return t},trendlineFactory:function(t,e){var i=_s.prototype.trendlineFactory.call(this,t,e);return i&&(i.type=ge),i},createCharts:function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(Ri(t,[pe]),e),this.createLineChart(Ri(t,[ge]),e),this.createBarChart(Ri(t,[fe]),e)},chartOptions:function(t){var e={series:t},i=t[0];if(i){var n=this.filterVisibleSeries(t),s=i.stack;e.isStacked=s&&n.length>1,e.isStacked100=s&&"100%"===s.type&&n.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},createAreaChart:function(t,e){if(0!==t.length){var i=new Fr(this,this.chartOptions(t));this.appendChart(i,e)}},createLineChart:function(t,e){if(0!==t.length){var i=new Mr(this,this.chartOptions(t));this.appendChart(i,e)}},createBarChart:function(t,e){if(0!==t.length){var i=t[0],n=this.chartOptions(t),s=this.filterVisibleSeries(t),r=s.some((function(t){return t.stack})),o=s.some((function(t){return t.stack&&"100%"===t.stack.type}));n.gap=i.gap,n.spacing=i.spacing,n.defaultStack=i.stack&&s.length>1,n.isStacked=r&&s.length>1,n.isStacked100=o&&s.length>1;var a=new Nr(this,n);this.appendChart(a,e),this._hasBarCharts=!0}},seriesCategoryAxis:function(){return this.categoryAxis},_dispatchEvent:function(t,e,i){var n=t._eventCoordinates(e),s=new P(n.x,n.y),r=this.categoryAxis.getCategory(s),o=this.valueAxis.getValue(s);null!==r&&null!==o&&t.trigger(i,{element:z(e),category:r,value:o})},createCrosshairs:function(){},_pointsByVertical:function(t){return Cr.fn._pointsByVertical.call(this,t).sort(this._getSeriesCompareFn())},_getSeriesCompareFn:function(){return function(t,e){return e.value-t.value}}});D(Gr.prototype,zn,{appendChart:_s.prototype.appendChart,aggregateSeries:_s.prototype.aggregateSeries,seriesSourcePoints:_s.prototype.seriesSourcePoints,seriesValues:_s.prototype.seriesValues}),R(Gr,{categoryAxis:{categories:[]},valueAxis:{}});var Wr=I.extend({init:function(t,e,i){I.fn.init.call(this,e),this.value=t,this.options.index=i.index},getLabelText:function(t){var e=G(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value},reflow:function(t){var e=this.points,i=this.children[0],n=Math.min(e[0].x,e[3].x),s=Math.max(e[1].x,e[2].x);this.box=new T(n,e[0].y,s,e[2].y),i&&i.reflow(new T(t.x1,e[0].y,t.x2,e[2].y))},createVisual:function(){var t,e=this,i=this.options;I.fn.createVisual.call(this),this.addAccessibilityAttributesToVisual(),(t=i.visual?i.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:i,sender:this.getSender(),createVisual:function(){return e.createPath()}}):this.createPath())&&this.visual.append(t)},createPath:function(){var t=this.options,e=t.border;return lt.fromPoints(this.points,{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()},createHighlight:function(t){return lt.fromPoints(this.points,t)},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var t=lt.fromPoints(this.points).close();return{options:this.options,path:t}},createFocusHighlight:function(t){var e=this.options.accessibility.highlight.border.width,i=lt.fromPoints(this.points,D({},t,{stroke:{width:2*e}})).close(),n=new ft;return n.paths.push(lt.fromRect(this.box.clone().pad(e).toRect())),n.paths.push(lt.fromPoints(this.points)),i.clip(n),i},tooltipAnchor:function(){var t=this.box;return{point:new P(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},getIndex:function(){return this.index}});R(Wr,{color:p,border:{width:1},labels:{format:""},accessibility:{role:si,className:ri,ariaRoleDescription:oi}}),D(Wr.prototype,Wi),D(Wr.prototype,cn);var qr=I.extend({init:function(t,e){I.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.labels=[],this.legendItems=[],this.render()},formatPointValue:function(t,e){return this.plotArea.chartService.format.auto(e,t.value)},render:function(){var t=this,e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);var n=e.series[0],s=n.data;if(s)for(var r=Ii(n),o=r.total,a=r.points,h=0;h<a.length;h++){var l=a[h];if(l){var c=l.fields;M(n.color)||(n.color=c.color||i[h%i.length]),c=D({index:h,owner:t,series:n,seriesIx:0,dataItem:s[h],percentage:l.value/o},c,{visible:l.visible});var u=l.valueFields.value,d=t.createSegment(u,c),p=t.createLabel(u,c);d&&p&&d.append(p)}}},evalSegmentOptions:function(t,e,i){var n=i.series;Ei(t,{value:e,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data","content","template","toggle","visual","ariaTemplate","ariaContent"]})},createSegment:function(e,i){var n=D({},i.series);if(this.evalSegmentOptions(n,e,i),this.createLegendItem(e,n,i),!1!==i.visible){var s=new Wr(e,n,i);return t.extend(s,i),this.append(s),this.points.push(s),s}},createLabel:function(t,e){var i=e.series,n=e.dataItem,s=D({},this.options.labels,i.labels),r=t;if(s.visible){var o=G(s),a={dataItem:n,value:t,percentage:e.percentage,category:e.category,series:i};o?r=o(a):s.format&&(r=this.chartService.format.auto(s.format,r)),s.color||(s.color=it(i.color),s.background||(s.background=i.color)),this.evalSegmentOptions(s,t,e);var h=new N(r,D({vAlign:s.position},s),a);return this.labels.push(h),h}},labelPadding:function(){for(var t=this.labels,e={left:0,right:0},i=0;i<t.length;i++){var n=t[i].options.align;if(n!==l){var s=t[i].box.width();n===d?e.left=Math.max(e.left,s):e.right=Math.max(e.right,s)}}return e},dynamicSlopeReflow:function(t,e,i){for(var n=this.options,s=this.points,r=s.length,o=s[0],a=o,h=0;h<s.length;h++)s[h].percentage>a.percentage&&(a=s[h]);for(var l=o.percentage/a.percentage*e,c=(e-l)/2,u=0,d=0;d<r;d++){var p=s[d].percentage,f=s[d+1],g=f?f.percentage:p,v=s[d].points=[],x=n.dynamicHeight?i*p:i/r,m=void 0;m=Q(m=p?(e-l*(g/p))/2:g?0:e/2,0,e),v.push(new xt(t.x1+c,t.y1+u)),v.push(new xt(t.x1+e-c,t.y1+u)),v.push(new xt(t.x1+e-m,t.y1+x+u)),v.push(new xt(t.x1+m,t.y1+x+u)),c=m,u+=x+n.segmentSpacing,l=Q(e-2*m,0,e)}},constantSlopeReflow:function(t,e,i){for(var n=this.options,s=this.points,r=s.length,o=n.neckRatio<=1,a=o?n.neckRatio*e:e,h=o?0:(e-e/n.neckRatio)/2,l=((o?e:e-2*h)-a)/2,c=0,u=0;u<r;u++){var d=s[u].points=[],p=s[u].percentage,f=n.dynamicHeight?l*p:l/r,g=n.dynamicHeight?i*p:i/r;d.push(new xt(t.x1+h,t.y1+c)),d.push(new xt(t.x1+e-h,t.y1+c)),d.push(new xt(t.x1+e-h-f,t.y1+g+c)),d.push(new xt(t.x1+h+f,t.y1+g+c)),h+=f,c+=g+n.segmentSpacing}},reflow:function(t){var e=this.points,i=e.length;if(i){var n=this.options,s=t.clone().unpad(this.labelPadding()),r=s.height()-n.segmentSpacing*(i-1),o=s.width();n.dynamicSlope?this.dynamicSlopeReflow(s,o,r):this.constantSlopeReflow(s,o,r);for(var a=0;a<i;a++)e[a].reflow(t)}}});R(qr,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:l,position:l,zIndex:1}}),D(qr.prototype,yr);var Xr=qr.extend({init:function(t,e){e.dynamicSlope=!1,e.neckRatio=1e6,qr.fn.init.call(this,t,e)}}),Yr=On.extend({render:function(){this.createChart(qr,Ri(this.series,[ne])),this.createChart(Xr,Ri(this.series,[se]))},createChart:function(t,e){var i=e[0];if(i){var n=new t(this,{series:e,legend:this.options.legend,neckRatio:i.neckRatio,dynamicHeight:i.dynamicHeight,dynamicSlope:i.dynamicSlope,segmentSpacing:i.segmentSpacing,highlight:i.highlight});this.appendChart(n)}},appendChart:function(t,e){On.fn.appendChart.call(this,t,e),Y(this.options.legend.data,t.legendItems)},_pointsByVertical:function(t){return this.pointsBySeriesIndex(t.series.index)},getPointToTheRight:function(t){return this.getPointBelow(t)},getPointToTheLeft:function(t){return this.getPointAbove(t)}}),Ur=I.extend({init:function(t,e){I.fn.init.call(this),this.options=e,this.color=e.color||p,this.value=t},render:function(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())},createLabel:function(){var t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))},createLabelElement:function(t){var e=t.color;return e||(e=it(this.color)),new N(this.getLabelText(t),D({align:l,vAlign:l,margin:{left:5,right:5},zIndex:O(t.zIndex,this.series.zIndex)},t,{color:e}),this.pointData())},getLabelText:function(t){var e=G(t);return e?e(this.pointData()):this.formatValue(t.format)},formatValue:function(t){return this.owner.formatPointValue(this,t)},reflow:function(t){this.render();var e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())},createVisual:function(){I.fn.createVisual.call(this),this.addAccessibilityAttributesToVisual()},markerBox:function(){var t=this.options.markers,i=t.border,n=this.box.toRect(),r=O(t.type,"rect")===s.ROUNDED_RECT,o=O(i.width,r?1:0),a=Math.round(o/2);if(t.size){var h=n.center();n.size.width=n.size.height=t.size,n.origin.x=Math.round(h.x-n.size.width/2),n.origin.y=Math.round(h.y-n.size.height/2)}return n.size.width-=o,n.size.height-=o,n.origin.y+=a+.5,n.origin.x+=a+.5,e.rectToBox(n)},markerBorder:function(){var t=this.options,e=t.markers.border,i=O(e.opacity,t.opacity);return{color:e.color||this.color,width:e.width,opacity:i,dashType:e.dashType}},createMarker:function(){var t=this.options,e=t.markers,i=new W({type:O(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:O(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i,this.append(i)},createHighlight:function(t){var e=this.options,i=this.options.highlight.markers||this.options.markers,n=new W({type:O(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:O(e.zIndex,this.series.zIndex)});n.reflow(this.markerBox());var s=n.getElement();return s.options.fill=t.fill,s.options.stroke=t.stroke,s},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},createFocusHighlight:function(){var t=this.options.markers,e=this.options.accessibility.highlight,i=new W({type:O(t.type,"rect"),width:t.size,height:t.size,rotation:t.rotation,background:e.color,border:e.border,borderRadius:t.borderRadius,padding:e.border.width/2,zIndex:e.zIndex});return i.reflow(this.markerBox()),i.getElement()},tooltipAnchor:function(){var t=this.box.center().x,e=this.box.y1-5;return{point:new P(t,e),align:{horizontal:l,vertical:u}}},overlapsBox:function(t){return this.box.overlaps(t)},unclipElements:function(){},pointData:function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}}});D(Ur.prototype,Wi),D(Ur.prototype,qi),D(Ur.prototype,cn),Ur.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}},accessibility:{role:si,className:ri,ariaRoleDescription:oi}};var Zr=I.extend({init:function(t,e){I.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()},_initFields:function(){this.points=[],this.seriesOptions=[],this.valueRange={min:r,max:o},this._evalSeries=[]},render:function(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))},setRange:function(){for(var t=this,e=this.options.series,i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.data.length;s++){var r=t.plotArea.bindPoint(n,s).valueFields;S(r.value)&&null!==r.value&&(t.valueRange.min=Math.min(t.valueRange.min,r.value),t.valueRange.max=Math.max(t.valueRange.max,r.value))}},addValue:function(e,i){var n;e&&S(e.value)&&null!==e.value&&(n=this.createPoint(e,i))&&t.extend(n,i),this.points.push(n)},evalPointOptions:function(t,e,i){var n=i.series,s=i.seriesIx,r={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle","drilldownSeriesFactory","ariaTemplate","ariaContent"]},o=this._evalSeries[s];S(o)||(this._evalSeries[s]=o=Ei(t,{},r,!0));var a=t;return o&&Ei(a=D({},t),{value:e,series:n,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},r),a},pointType:function(){return Ur},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=D({},n,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},createPoint:function(t,e){var i=e.series,n=this.pointOptions(i,e.seriesIx),s=e.color||i.color;if(n=this.evalPointOptions(n,t,e),M(i.color))s=n.color;else if(0!==this.valueRange.max){var r=function(t,e){void 0===e&&(e=.05);var i=kendo.parseColor(t),n=1-e;return function(t){var e=i.toHSL(),s=100-e.l,r=n-t;return e.l+=Math.min(r*s,s),e.toCss()}}(s);s=r(t.value/this.valueRange.max)}var o=new Ur(t,n);return o.color=s,this.append(o),o},seriesAxes:function(t){var e=t.xAxis,i=t.yAxis,n=this.plotArea,s=e?n.namedXAxes[e]:n.axisX,r=i?n.namedYAxes[i]:n.axisY;if(!s)throw new Error("Unable to locate X axis with name "+e);if(!r)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:s,yAxis:r}},reflow:function(t){var e=this,i=this.points,n=!this.options.clip,s=0;this.traverseDataPoints((function(t,r){var o=i[s++],a=e.seriesAxes(r.series),h=a.xAxis,l=a.yAxis,c=h.categoryIndex(t.x),u=l.categoryIndex(t.y),d=h.getSlot(c,c,n),p=l.getSlot(u,u,n);if(o)if(d&&p){var f=e.pointSlot(d,p);o.reflow(f)}else o.visible=!1})),this.box=t},pointSlot:function(t,e){return new T(t.x1,e.y1,t.x2,e.y2)},traverseDataPoints:function(t){for(var e=this,i=this.options.series,n=0;n<i.length;n++)for(var s=i[n],r=e.seriesAxes(s),o=r.xAxis,a=r.yAxis,h=o.currentRangeIndices(),l=a.currentRangeIndices(),c=0;c<s.data.length;c++){var u=e.plotArea.bindPoint(s,c),d=u.valueFields,p=u.fields,f=o.totalIndex(d.x),g=a.totalIndex(d.y),v=h.min<=f&&f<=h.max,x=l.min<=g&&g<=l.max;v&&x&&t(d,D({pointIx:c,series:s,seriesIx:n,dataItem:s.data[c],owner:e},p))}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.value)},animationPoints:function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e}});R(Zr,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0});var jr=On.extend({initFields:function(){this.namedXAxes={},this.namedYAxes={}},render:function(t){void 0===t&&(t=this.panes),this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()},bindCategories:function(){for(var t=this.srcSeries||this.series,i=0;i<t.length;i++){for(var n=t[i],s=n.data||[],r=this.seriesAxes(n),o=r.xAxis,a=r.yAxis,h=e.createHashSet(o.categories||[]),l=e.createHashSet(a.categories||[]),c=0;c<s.length;c++){var u=It.current.bindPoint(n,c).valueFields,d=u.x,p=u.y;h.has(d)||h.add(d),l.has(p)||l.add(p)}o.categories=h.values(),a.categories=l.values()}},createCharts:function(t){for(var e=this,i=this.groupSeriesByPane(),n=0;n<t.length;n++){var s=t[n],r=i[s.options.name||"default"]||[];e.addToLegend(r);var o=e.filterVisibleSeries(r);o&&e.createHeatmapChart(Ri(o,[re]),s)}},createHeatmapChart:function(t,e){var i=new Zr(this,{series:t});this.appendChart(i,e)},seriesPaneName:function(t){var e=this.options,i=t.xAxis,n=[].concat(e.xAxis),s=tt(n,(function(t){return t.name===i}))[0],r=t.yAxis,o=[].concat(e.yAxis),a=tt(o,(function(t){return t.name===r}))[0],h=(e.panes||[{}])[0].name||"default";return(s||{}).pane||(a||{}).pane||h},seriesAxes:function(t){var e,i,n=this.options,s=[].concat(n.xAxis),r=t.xAxis;e=r?s.find((function(t){return t.name===r})):s[0];var o=[].concat(n.yAxis),a=t.yAxis;if(i=a?o.find((function(t){return t.name===a})):o[0],!e)throw new Error("Unable to locate X axis with name "+r);if(!i)throw new Error("Unable to locate Y axis with name "+a);return{xAxis:e,yAxis:i}},createAxisLabels:function(){for(var t=this.axes,e=0;e<t.length;e++)t[e].createLabels()},createXYAxis:function(i,n,s){for(var r,o=i.name,a=n?this.namedYAxes:this.namedXAxes,l=t.extend({axisCrossingValue:0},i,{vertical:n,reverse:n||this.chartService.rtl?!i.reverse:i.reverse,justified:!1}),c=l.categories?l.categories[0]:null,u=[l.min,l.max,c],d=this.series,p=0;p<d.length;p++){var f=d[p],g=f[n?"yAxis":"xAxis"];if(g===l.name||0===s&&!g){var v=It.current.bindPoint(f,0).valueFields;u.push(v[n?"y":"x"]);break}}for(var x=0;x<u.length;x++)if(u[x]instanceof Date){r=!0;break}var m=new(Ti(l.type,h)||!l.type&&r?e.DateCategoryAxis:Z)(l,this.chartService);if(m.axisIndex=s,o){if(a[o])throw new Error((n?"Y":"X")+" axis with name "+o+" is already defined");a[o]=m}return this.appendAxis(m),m.indexCategories(),m},createAxes:function(t){for(var e=this,i=this.options,n=[].concat(i.xAxis),s=[],r=[].concat(i.yAxis),o=[],a=0;a<n.length;a++){var h=e.findPane(n[a].pane);L(h,t)&&s.push(e.createXYAxis(n[a],!1,a))}for(var l=0;l<r.length;l++){var c=e.findPane(r[l].pane);L(c,t)&&o.push(e.createXYAxis(r[l],!0,l))}this.axisX=this.axisX||s[0],this.axisY=this.axisY||o[0]},removeAxis:function(t){var e=t.options.name;On.fn.removeAxis.call(this,t),t.options.vertical?delete this.namedYAxes[e]:delete this.namedXAxes[e],t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY},_dispatchEvent:function(t,e,i){for(var n=t._eventCoordinates(e),s=new P(n.x,n.y),r=this.axes,o=r.length,a=[],h=[],l=0;l<o;l++){var c=r[l];Si(c.options.vertical?h:a,c.getCategory(s))}a.length>0&&h.length>0&&t.trigger(i,{element:z(e),originalEvent:e,x:Fi(a),y:Fi(h)})},updateAxisOptions:function(t,e){var i=t.options.vertical,n=this.groupAxes(this.panes),s=(i?n.y:n.x).indexOf(t);Kr(this.options,s,i,e),Kr(this.originalOptions,s,i,e)},crosshairOptions:function(e){return t.extend({},e.options.crosshair,{zIndex:0})},_pointsByVertical:function(t,e){var i=this;void 0===e&&(e=0);var n=this.axisX.options.reverse?-1*e:e,s=this.axisX.children,r=this._getPointAxisXIndex(t)+n,o=s[r=J(r,s.length)].value,a=this.filterPoints((function(t){return $r(t.pointData().x,o)})).sort((function(t,e){return i._getPointAxisYIndex(t)-i._getPointAxisYIndex(e)}));return this.axisY.options.reverse?a.reverse():a},_pointsByHorizontal:function(t,e){var i=this;void 0===e&&(e=0);var n=this.axisY.options.reverse?-1*e:e,s=this.axisY.children,r=this._getPointAxisYIndex(t)+n,o=s[r=J(r,s.length)].value,a=this.filterPoints((function(t){return $r(t.pointData().y,o)})).sort((function(t,e){return i._getPointAxisXIndex(t)-i._getPointAxisXIndex(e)}));return this.axisX.options.reverse?a.reverse():a},_getPointAxisXIndex:function(t){return this._getPointAxisIndex(this.axisX,t.pointData().x)},_getPointAxisYIndex:function(t){return this._getPointAxisIndex(this.axisY,t.pointData().y)},_getPointAxisIndex:function(t,e){return t.children.findIndex((function(t){return $r(e,t.value)}))}});function $r(t,i){return t instanceof Date&&i instanceof Date?e.dateEquals(t,i):t===i}function Kr(t,e,i,n){var s=[].concat(i?t.yAxis:t.xAxis)[e];D(s,n)}R(jr,{xAxis:{},yAxis:{}}),D(jr.prototype,zn);var Qr="color",Jr="first",to="max",eo="min",io="noteText";Zs.current.register(_s,[$t,ee,ae,Se,jt,be,te,he,Jt,Ae,Kt,we,me,xe,Ce,oe,ve,ke].concat(Me)),Zs.current.register(pr,[ye,_e,Qt].concat(Me)),Zs.current.register(wr,[le]),Zs.current.register(kr,[ie]),Zs.current.register(Yr,[ne,se]),Zs.current.register(Lr,[ce,ue,de].concat(Me)),Zs.current.register(Gr,[pe,fe,ge].concat(Me)),Zs.current.register(jr,[re]),It.current.register([$t,ee,ae,Se,jt,be],[a],[ui,Qr,io,Bt,Ft,mi]),It.current.register([me,xe,ve,ke],["from","to"],[ui,Qr,io,mi]),It.current.register([Ce,oe],[a],[ui,Qr,io,"summary",mi]),It.current.register([ce,ue,de],[g,v],[Qr,mi]),It.current.register([pe,fe,ge],[a],[ui,Qr,mi]),It.current.register([ne,se],[a],[ui,Qr,"visibleInLegend","visible",mi]),Wn.current.register([$t,ee,ae,Se,jt,be,Ce,oe],{value:to,color:Jr,noteText:Jr,errorLow:eo,errorHigh:to}),Wn.current.register([me,xe,ve,ke],{from:eo,to:to,color:Jr,noteText:Jr}),Wn.current.register([pe,fe,ge],{value:to,color:Jr}),It.current.register([ye,_e,Qt],[g,v],[Qr,io,Dt,Ht,zt,Nt]),It.current.register([Qt],[g,v,"size"],[Qr,ui,io]),It.current.register([re],[g,v,a],[Qr,io]),It.current.register([te,he],["open","high","low","close"],[ui,Qr,"downColor",io]),Wn.current.register([te,he],{open:to,high:to,low:eo,close:to,color:Jr,downColor:Jr,noteText:Jr}),It.current.register([Kt,we],["lower","q1","median","q3","upper","mean","outliers"],[ui,Qr,io,mi]),Wn.current.register([Kt,we],{lower:to,q1:to,median:to,q3:to,upper:to,mean:to,outliers:Jr,color:Jr,noteText:Jr}),It.current.register([Jt,Ae],["current","target"],[ui,Qr,"visibleInLegend",io,mi]),Wn.current.register([Jt,Ae],{current:to,target:to,color:Jr,noteText:Jr}),It.current.register([le,ie],[a],[ui,Qr,"explode","visibleInLegend","visible",mi]);var no=[ui,a,g,v],so="mousemove",ro="contextmenu",oo="mouseleave",ao="keydown",ho="focus",lo="blur",co=i.extend({init:function(t,i,n,s){var r=this;void 0===s&&(s={}),this.observers=[],this.addObserver(s.observer),this.chartService=new rt.ChartService(this,s),this.chartService.theme=n,this._initElement(t);var o=D({},this.options,i);this._originalOptions=D({},o),this._theme=n,this._initTheme(o,n),this._focusState={},this._initHandlers(),this._initSurface(),this.bindCategories(),e.FontLoader.preloadFonts(i,(function(){r.fontLoaded=!0,r._destroyed||(r.trigger("init"),r._redraw(),r._attachEvents())}))},_initElement:function(t){for(this._setElementClass(t),t.style.position="relative",t.tabIndex=t.getAttribute("tabindex")?t.getAttribute("tabindex"):0,t.setAttribute("role","graphics-document document");t.firstChild;)t.removeChild(t.firstChild);this.element=t},_setElementClass:function(t){e.addClass(t,"k-chart")},_initTheme:function(e,i){for(var n=[],s=e.series||[],r=0;r<s.length;r++)n.push(t.extend({},s[r]));e.series=n,function(t){for(var e=no,i=0;i<e.length;i++){var n=e[i]+"Axes";t[n]&&(t[e[i]+"Axis"]=t[n],delete t[n])}}(e),this.applyDefaults(e,i),null===e.seriesColors&&delete e.seriesColors,V(e.title)&&(e.title={text:e.title}),this.options=D({},i,e),this.applySeriesColors()},getSize:function(){var t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}},resize:function(t){var i=this.getSize(),n=this._size,s=i.width>0||i.height>0;t||s&&(!n||i.width!==n.width||i.height!==n.height)?(this._size=i,this._resize(i,t),this.trigger("resize",i)):s&&this._selections&&e.find(this._selections,(function(t){return!t.visible}))&&(this._destroySelections(),this._setupSelection())},_resize:function(){this._noTransitionsRedraw()},redraw:function(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){var e=this._model._plotArea,i=e.findPane(t);e.redraw(i)}else this._redraw()},getAxis:function(t){return bt(t,this._plotArea.axes)},findAxisByName:function(t){return this.getAxis(t)},findPaneByName:function(t){for(var e=this._plotArea.panes,i=0;i<e.length;i++)if(e[i].options.name===t)return new wt(e[i])},findPaneByIndex:function(t){var e=this._plotArea.panes;if(e[t])return new wt(e[t])},plotArea:function(){return new At(this._plotArea)},toggleHighlight:function(t,e){var i,n,s,r=this._plotArea,o=(r.srcSeries||r.series||[])[0];M(e)?i=r.filterPoints(e):(B(e)?(n=e.series,s=e.category):n=s=e,i=o.type===ie?uo(r.pointsBySeriesName(n),s):L(o.type,[le,ne,se])?uo((r.charts[0]||{}).points,s):r.pointsBySeriesName(n));i&&this.togglePointsHighlight(t,i)},togglePointsHighlight:function(t,e){for(var i=this._highlight,n=0;n<e.length;n++)i.togglePointHighlight(e[n],t)},showTooltip:function(t){var e,i,n=this._sharedTooltip(),s=this._tooltip,r=this._plotArea;if(M(t)?(e=r.findPoint(t))&&n&&(i=e.categoryIx):n&&S(t)&&(i=r.categoryAxis.categoryIndex(t)),n){if(i>=0){var o=this._plotArea.pointsByCategoryIndex(i);s.showAt(o)}}else e&&s.show(e)},hideTooltip:function(){this._tooltip.hide()},_initSurface:function(){var t=this.surface,i=this._surfaceWrap(),n=this.options.chartArea||{};n.width&&e.elementSize(i,{width:n.width}),n.height&&e.elementSize(i,{height:n.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=ht.Surface.create(i,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler))},_surfaceWrap:function(){return this.element},_redraw:function(){var t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._setElementAccessibilityAttributes(),this._model=t,this._plotArea=t._plotArea,this._legend=t._legend,t.renderVisual(),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.setup()})),this._initSurface(),this.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new As,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this.trigger(ti),xo(this._plotArea.panes),this._navState||this._cancelDomEvents(),this._redrawFocusHighlight()},_redrawFocusHighlight:function(){var t=this._focusState,e=t.legendInFocus,i=t.preserveHighlight;e&&i&&(this._focusElement(this._getFocusedLegendItem(),!1),this._focusState.preserveHighlight=!1)},_setElementAccessibilityAttributes:function(){var t=this.options.title,e=V(t)?t:t.description||t.text;e&&this.element.setAttribute("aria-roledescription",e)},exportVisual:function(t){var e;if(t&&(t.width||t.height||t.options)){var i=this.options,n=D({},t.options,{chartArea:{width:t.width,height:t.height}});vo(this._originalOptions,n),this.options=D({},this._originalOptions,n),this._initTheme(this.options,this._theme),this.bindCategories();var s=this._getModel();s.renderVisual(),xo(s._plotArea.panes),e=s.visual,this.options=i}else e=this.surface.exportVisual();return e},_sharedTooltip:function(){return this._plotArea instanceof _s&&this.options.tooltip&&this.options.tooltip.shared},_createPannable:function(){var t=this.options;!1!==t.pannable&&(this._pannable=new Is(this._plotArea,t.pannable))},_createZoomSelection:function(){var t=this.options.zoomable,e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new Ps(this,e))},_createMousewheelZoom:function(){var t=this.options.zoomable,e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new Vs(this,e))},_toggleDragZoomEvents:function(){var t=this.options.pannable,e=this.options.zoomable,i=(e||{}).selection,n=(e||{}).mousewheel,s=!(t||!1!==e&&!1!==i||this.requiresHandlers([Ue,Xe,Ye])),r=(!1===e||!1===n)&&!this.requiresHandlers([Ze,je,$e]),o=this.element;this._dragZoomEnabled&&s&&r?(o.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||s&&r||(o.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!s,!r)},_toggleDomEvents:function(t,e){var i=this.domEvents;i&&(i.toggleDrag&&i.toggleDrag(t),i.toggleZoom&&i.toggleZoom(e))},_createTooltip:function(){var t=this.options.tooltip;return this._sharedTooltip()?this._createSharedTooltip(t):new Qs(this.chartService,t)},_createSharedTooltip:function(t){return new Js(this._plotArea,t)},applyDefaults:function(t,e){!function(t,e){var i,n,s,r=(e||{}).axisDefaults||{};function o(t){var e=(t||{}).color||n.color,s=D({},r,r[i],n,n[i],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete s[i],s}for(var a=0;a<no.length;a++)i=no[a]+"Axis",n=t.axisDefaults||{},s=(s=[].concat(t[i])).map(o),t[i]=s.length>1?s:s[0]}(t,e),function(t,e){var i=t.series,n=i.length,s=t.seriesDefaults,r=D({},t.seriesDefaults),o=e?D({},e.seriesDefaults):{},a=D({},o);po(r),po(a);for(var h=0;h<n;h++){var l=i[h].type||t.seriesDefaults.type,c=D({data:[]},a,o[l],{tooltip:t.tooltip},r,s[l]);i[h]._defaults=c,i[h]=D({},c,i[h]),i[h].data=i[h].data||[]}}(t,e)},applySeriesColors:function(){for(var t=this.options,e=t.series,i=t.seriesColors||[],n=0;n<e.length;n++){var s=e[n],r=i[n%i.length],o=s._defaults;s.color=s.color||r,o&&(o.color=o.color||r)}},_getModel:function(){var t=this.options,i=this._createPlotArea(),n=new e.RootElement(this._modelOptions());n.chart=this,n._plotArea=i;var s=$.buildTitle(t.title),r=$.buildTitle(t.subtitle,{align:t.title.align,position:t.title.position});if(n.append.apply(n,$.orderTitles([s,r])),t.legend&&t.legend.visible){var o=new Us(i.options.legend,this.chartService);n.append(o),n._legend=o}return n.append(i),n.reflow(),n},_modelOptions:function(){var t=this.options,e=this.getSize();return D({transitions:t.transitions,width:e.width||s.DEFAULT_WIDTH,height:e.height||s.DEFAULT_HEIGHT},t.chartArea)},_createPlotArea:function(t){var e=this.options;return Zs.current.create(t?[]:e.series,e,this.chartService)},_setupSelection:function(){for(var t=this._plotArea.axes,e=this._selections=[],i=0;i<t.length;i++){var n=t[i],s=n.options;if(n instanceof Z&&s.select&&!s.vertical){var r=n.range(),o=new Ks(this,n,D({min:r.min,max:r.max},s.select));e.push(o)}}},_selectStart:function(t){return this.trigger(Ke,t)},_select:function(t){return this.trigger(Qe,t)},_selectEnd:function(t){return this.trigger(Je,t)},_initHandlers:function(){this._clickHandler=this._click.bind(this),this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._mousedownHandler=this._mousedown.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemove=kendo.throttle(this._mousemove.bind(this),20)},addObserver:function(t){t&&this.observers.push(t)},removeObserver:function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},requiresHandlers:function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},trigger:function(t,e){void 0===e&&(e={}),e.sender=this,t===ei?e.anchor.point=this._toDocumentCoordinates(e.anchor.point):t===ze?this._updateDrilldownPoint(e.point):t===Ne?this._resetDrilldownPoint():t===De?(this._focusPoint(e.point),this._startDrilldown(e.point)):t===Oe&&this._focusLegendItem(e);for(var i=this.observers,n=!1,s=0;s<i.length;s++)i[s].trigger(t,e)&&(n=!0);return n},_attachEvents:function(){var t,e,i=this.element;(this._touchAction=i.style.touchAction,st(i,((t={})[ro]=this._clickHandler,t[gi]=this._mousewheelHandler,t[oo]=this._mouseleaveHandler,t[ao]=this._keydownHandler,t.mousedown=this._mousedownHandler,t[ho]=this._focusHandler,t[lo]=this._blurHandler,t)),this._shouldAttachMouseMove())&&st(i,((e={})[so]=this._mousemove,e));this.domEvents=rt.DomEventsBuilder.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()},_mouseleave:function(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger(qe)),this._hasInactiveOpacity()&&this._activeChartInstance&&(this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._updateSeriesOpacity(null,!0))},_cancelDomEvents:function(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()},_gesturestart:function(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking())},_gestureend:function(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger($e,{}))},_gesturechange:function(t){var e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();var i=this._gestureDistance,n=-t.distance/i+1;if(Math.abs(n)>=.1){n=Math.round(10*n),this._gestureDistance=t.distance;var s={delta:n,axisRanges:fo(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(Ze,s)){var r=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(s.axisRanges=e.updateRanges(n,r))&&!this.trigger(je,s)&&e.zoom()}}}},_mouseout:function(t){if(t.element){var e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}},_start:function(t){var e=this._eventCoordinates(t);!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(e)&&(this.requiresHandlers([Ue,Xe,Ye])&&this._startNavigation(t,e,Ue),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._clearFocusedElement(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(Ze,{axisRanges:fo(this._plotArea.axes),originalEvent:t}))},_move:function(t){var e=this._navState,i=this._pannable;if(!this._stopChartHandlers(t)){if(i){var n=i.move(t);n&&!this.trigger(Xe,{axisRanges:n,originalEvent:t})&&i.pan()}else if(e){for(var s={},r=e.axes,o=0;o<r.length;o++){var a=r[o];if(a.options.name){var h=a.options.vertical?t.y:t.x,l=h.startLocation-h.location;0!==l&&(s[a.options.name]=a.translateRange(l))}}e.axisRanges=s,this.trigger(Xe,{axisRanges:s,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}},_end:function(t){if(!this._stopChartHandlers(t)){var e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(Ye,{axisRanges:fo(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,Ye),this._zoomSelection){var i=this._zoomSelection.end(t);i&&!this.trigger(je,{axisRanges:i,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger($e,{axisRanges:i,originalEvent:t}))}}},_stopChartHandlers:function(t){var e=this._selections||[];if(!e.length)return!1;var i=this._eventCoordinates(t),n=this._plotArea.paneByPoint(i);if(n)for(var s=0;s<e.length;s++)if(e[s].onPane(n))return!0},_mousewheelZoomRate:function(){var t=(this.options.zoomable||{}).mousewheel||{};return O(t.rate,.3)},_mousewheel:function(t){var i=this,n=e.mousewheelDelta(t),s=this._mousewheelZoom,r=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(r))if(s){var o={delta:n,axisRanges:fo(this._plotArea.axes),originalEvent:t};!this._zooming&&this.trigger(Ze,o)||(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),o.axisRanges=s.updateRanges(n,r),o.axisRanges&&!this.trigger(je,o)&&s.zoom(),this._mwTimeout=setTimeout((function(){i.trigger($e,o),i._zooming=!1,i.surface&&i.surface.resumeTracking()}),vi))}else{var a=this._navState;if(!a)this._startNavigation(t,r,Ze)||(a=this._navState);if(a){var h=a.totalDelta||n;a.totalDelta=h+n;for(var l=this._navState.axes,c={},u=0;u<l.length;u++){var d=l[u],p=d.options.name;p&&(c[p]=d.scaleRange(-h*i._mousewheelZoomRate(),r))}this.trigger(je,{delta:n,axisRanges:c,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){i._endNavigation(t,$e)}),vi)}}},_startNavigation:function(t,e,i){var n=this._model._plotArea,s=n.findPointPane(e),r=n.axes.slice(0);if(s){var o=fo(r);this.trigger(i,{axisRanges:o,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._clearFocusedElement(),this._navState={axisRanges:o,pane:s,axes:r})}},_endNavigation:function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},_getChartElement:function(t,e){var i=this.surface.eventTarget(t);if(i)return this._drawingChartElement(i,t,e)},_drawingChartElement:function(t,e,i){for(var n,s=t;s&&!n;)n=s.chartElement,s=s.parent;if(n)return n.aliasFor&&(n=n.aliasFor(e,this._eventCoordinates(e))),i&&(n=n.closest(i))&&n.aliasFor&&(n=n.aliasFor()),n},_eventCoordinates:function(t){var i=e.eventCoordinates(t);return this._toModelCoordinates(i.x,i.y)},_elementPadding:function(){if(!this._padding){var t=et(this.element,["paddingLeft","paddingTop"]),e=t.paddingLeft,i=t.paddingTop;this._padding={top:i,left:e}}return this._padding},_toDocumentCoordinates:function(t){var i=this._elementPadding(),n=e.elementOffset(this.element);return{left:K(t.x+i.left+n.left),top:K(t.y+i.top+n.top)}},_toModelCoordinates:function(t,i){var n=this.element,s=e.elementOffset(n),r=this._elementPadding(),o=e.elementScale(n).invert(),a=new xt(t-s.left-r.left,i-s.top-r.top).transform(o);return new P(a.x,a.y)},_tap:function(t){var e=this,i=this.surface.eventTarget(t),n=this._drawingChartElement(i,t),s=this._sharedTooltip();this._startHover(i,t)||s||this._unsetActivePoint(),s&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(n,t),this.handlingTap=!0,setTimeout((function(){e.handlingTap=!1}),0)},_click:function(t){var e=this._getChartElement(t);this._propagateClick(e,t)},_propagateClick:function(t,e){for(var i=t;i;)i.click&&i.click(this,e),i=i.parent},_isLegendBeforeChart:function(){var t=this.options.legend.position,e=this._legend;return e&&e.hasItems()&&(t===c||t===d)},_focus:function(){this._preventInitialPointFocus||(this._isLegendBeforeChart()?this._focusFirstLegendItem():this._focusFirstPoint()),this._preventInitialPointFocus=!1},_keydown:function(t){var e=this._focusState,i=e.legendInFocus,n=e.focusedElement,r=this._legend;if(t.key===s.TAB){this._clearFocusedElement();var o=this._isLegendBeforeChart();i&&o!==t.shiftKey?this._navigatePoints(t):!i&&o===t.shiftKey&&r.hasItems()&&this._navigateLegend(t)}else t.key===s.ESCAPE?(n&&t.stopPropagation(),this._tooltip&&this._tooltip.visible?this._hideTooltip():this._blur()):t.key===s.ENTER?n&&(this._focusState.preserveHighlight=!0,this._propagateClick(n,t),this._focusElement(n)):i?this._navigateLegend(t):this._navigatePoints(t)},_navigatePoints:function(t){var e=this,i=this._focusState,n=this._plotArea;if(i.legendInFocus=!1,!i.focusedElement)return this._focusFirstPoint(),void t.preventDefault();var r=function(n){i.focusedPoint=n,e._focusElement(i.focusedPoint),e._displayTooltip(n),t.preventDefault()};switch(t.key){case s.ARROW_RIGHT:r(n.getPointToTheRight(i.focusedPoint));break;case s.ARROW_LEFT:r(n.getPointToTheLeft(i.focusedPoint));break;case s.ARROW_DOWN:r(n.getPointBelow(i.focusedPoint));break;case s.ARROW_UP:r(n.getPointAbove(i.focusedPoint))}},_navigateLegend:function(t){var i=this,n=this,r=n._focusState,o=n._legend,a=n.chartService.rtl;if(r.legendInFocus=!0,!r.focusedElement)return this._focusFirstLegendItem(),void t.preventDefault();var h=o.getItems().length,l=function(e){r.focusedLegendItemIndex=e(r.focusedLegendItemIndex,h),i._focusElement(i._getFocusedLegendItem()),t.preventDefault()};switch(t.key){case s.ARROW_UP:case s.ARROW_LEFT:l(a?e.cycleUp:e.cycleDown);break;case s.ARROW_DOWN:case s.ARROW_RIGHT:l(a?e.cycleDown:e.cycleUp)}},_focusFirstPoint:function(){var t=this._focusState.focusedPoint=this._plotArea.getFirstPoint();t&&(this._focusElement(t),this._displayTooltip(t))},_hasFocus:function(){return this.element.ownerDocument.activeElement===this.element},_mousedown:function(){this._hasFocus()||(this._preventInitialPointFocus=!0)},_focusChart:function(){this._hasFocus()||(this._preventInitialPointFocus=!0,this.element.focus())},_focusPoint:function(t){this._focusState.focusedPoint=t,this._focusChart(),this._focusElement(t,!0)},_focusFirstLegendItem:function(){var t=this._focusState;t.focusedLegendItemIndex=0,this._focusElement(this._getFocusedLegendItem()),t.legendInFocus=!0,this._hideTooltip()},_focusLegendItem:function(t){var e=this._focusState;e.focusedLegendItemIndex=this._legend.getItems().findIndex((function(e){return e.options.series.index===t.seriesIndex&&e.options.pointIndex===t.pointIndex})),e.legendInFocus=!0,this._focusChart(),this._focusElement(this._getFocusedLegendItem(),!0)},_getFocusedLegendItem:function(){var t=this._focusState;return this._legend.getItems()[t.focusedLegendItemIndex]},_focusElement:function(t,e){var i=this._focusState;if(this._clearFocusedElement(),t&&(i.focusedElement=t,this._setElementActiveDescendant(t),!e))if(t.focusVisual(),i.legendInFocus){var n=t.options;this._showSeriesInactiveOpacity(n.series.index,n.pointIndex)}else this._showInactiveOpacity(t)},_clearFocusedElement:function(){var t=this._focusState;t&&(t.focusedElement&&(t.focusedElement.clearFocusFromVisual(),this._clearElementActiveDescendant()),t.focusedElement=null)},_setElementActiveDescendant:function(t){"canvas"===this.options.renderAs&&(this._pseudoFocusedElement=this._createPseudoFocusedElement(t),this.element.append(this._pseudoFocusedElement)),this.element.setAttribute(s.ARIA_ACTIVE_DESCENDANT,t._id)},_clearElementActiveDescendant:function(){this._pseudoFocusedElement&&(this._pseudoFocusedElement.remove(),this._pseudoFocusedElement=null),this.element.removeAttribute(s.ARIA_ACTIVE_DESCENDANT)},_createPseudoFocusedElement:function(t){var e=document.createElement("div"),i=t.options.accessibility;e.id=t._id,e.setAttribute("aria-label",t.getAriaLabelText()),e.setAttribute("role",i.role),e.setAttribute("aria-roledescription",i.ariaRoleDescription);var n=i.ariaChecked;return S(n)&&e.setAttribute("aria-checked",n),e},_blur:function(){this._focusState.legendInFocus=!1,this._clearFocusedElement(),this._hideInactiveOpacity()},_startHover:function(t,e){if(this._suppressHover)return!1;var i=this._drawingChartElement(t,e,(function(t){return(t.hover||t.over)&&!(t instanceof On)})),n=this._activePoint;return this._updateHoveredPoint(i,e),i&&n!==i&&i.hover&&(this._activePoint=i,this._sharedTooltip()||i.hover(this,e)||(this._displayTooltip(i),this._showInactiveOpacity(i))),i},_displayTooltip:function(t){D({},this.options.tooltip,t.options.tooltip).visible&&this._tooltip.show(t)},_hideTooltip:function(){this._tooltip&&this._tooltip.hide()},_displayInactiveOpacity:function(t,e,i){var n=this._activeChartInstance=this._chartInstanceFromPoint(t);if(n)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(n.children,null,!0),this._applySeriesOpacity(n.children,t.series),this._highlight.show(i||t);else{var s;if(!n.supportsPointInactiveOpacity())return void this._highlight.show(t);(s=this._getInactivePoints(t,n))&&s.length&&this._highlight.show(s,1-this._getInactiveOpacityForSeries(t.series))}},_getInactivePoints:function(t,e){return this._getAllPointsOfType(e,t.constructor).filter((function(e){return e!==t}))},_getAllPointsOfType:function(t,e){for(var i=[],n=0;n<t.children.length;n++){var s=t.children[n];s.constructor===e?i.push(s):s.children&&s.children.length&&(i=i.concat(this._getAllPointsOfType(s,e)))}return i},_updateHoveredPoint:function(t,e){var i=this._hoveredPoint;i&&i!==t&&(i.out(this,e),this._hoveredPoint=null),t&&i!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))},_updateDrilldownPoint:function(t){t&&t.series&&(It.current.bindPoint(t.series,null,t.dataItem).fields.drilldown&&(this._drilldownState={cursor:this.element.style.cursor},this.element.style.cursor="pointer"))},_resetDrilldownPoint:function(){this._drilldownState&&(this.element.style.cursor=this._drilldownState.cursor,this._drilldownState=null)},_startDrilldown:function(t){if(t&&t.series){var e=t.series,i=It.current.bindPoint(e,null,t.dataItem).fields.drilldown;if(i){var n={series:e,point:t,value:i,sender:this};this.trigger(xi,n)}}},_updateSeriesOpacity:function(t,e){for(var i=this._plotArea,n=i.series.length,s=0;s<n;s++){var r=i.series[s],o=this._getDefaultOpacityForSeries(r),a=this._getInactiveOpacityForSeries(r);e||r===t.series?(r.opacity=o,r.line&&(r.line.opacity=o)):(r.defaultOpacity=o,r.opacity=a,r.line&&(r.line.opacity=a))}},_applySeriesOpacity:function(t,e,i,n){for(var s=0;s<t.length;s++){var r=t[s],o=r.series||n;if(o&&(o.highlight||{}).visible&&r.visual){var a=n?n.opacity:r.series.opacity;(o!==e||i)&&r.visual.opacity(i?1:a)}r.children&&r.children.length&&this._applySeriesOpacity(r.children,e,i,r.series)}},_chartInstanceFromPoint:function(t){for(var e=t.parent;e&&!e.plotArea;)e=e.parent;return e},_showInactiveOpacity:function(t){var e=this._plotArea.series.length>1;this._hasInactiveOpacity()?this._displayInactiveOpacity(t,e):this._highlight.show(t)},_hideInactiveOpacity:function(t){var e=this._plotArea.series.length>1;this._hasInactiveOpacity()&&(e&&this._activeChartInstance&&(this._updateSeriesOpacity(t,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null)},_hasInactiveOpacity:function(){var t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,e=this.options.series.filter((function(t){return void 0!==t.highlight.inactiveOpacity})).length>0;return t||e},_getInactiveOpacityForSeries:function(t){var e=this.options.seriesDefaults.highlight.inactiveOpacity;return t.highlight.inactiveOpacity||e||t.opacity||s.DEFAULT_SERIES_OPACITY},_getDefaultOpacityForSeries:function(t){return t.defaultOpacity||t.opacity||s.DEFAULT_SERIES_OPACITY},_mouseover:function(t){var e,i=this._startHover(t.element,t.originalEvent);i&&i.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),st(document,((e={})[so]=this._mouseMoveTrackHandler,e)))},_mouseMoveTracking:function(t){var e,i=this,n=i.options,s=i._tooltip,r=i._highlight,o=i._activePoint,a=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(a)){if(o&&o.tooltipTracking&&o.series&&o.parent.getNearestPoint){var h=o.parent.getNearestPoint(a.x,a.y,o.seriesIx);if(h&&h!==o)if(this._activePoint=h,!h.hover(this,t))D({},n.tooltip,h.options.tooltip).visible&&s.show(h),r.show(h)}}else ot(document,((e={})[so]=this._mouseMoveTrackHandler,e)),this._unsetActivePoint(),this._clearFocusedElement(),this._mouseMoveTrackHandler=null,this._hideInactiveOpacity(o)},_mousemove:function(t){var e=this._eventCoordinates(t),i=this._plotArea;if(this._trackCrosshairs(e),i.hover){var n=i.backgroundContainsPoint(e);n?(this._plotAreaHovered=!0,this._plotArea.hover(this,t)):this._plotAreaHovered&&!n&&(this._plotAreaHovered=!1,this.trigger(qe))}this._sharedTooltip()&&this._trackSharedTooltip(e,t)},_trackCrosshairs:function(t){for(var e=this._plotArea.crosshairs,i=0;i<e.length;i++){var n=e[i];n.box.containsPoint(t)?n.showAt(t):n.hide()}},_trackSharedTooltip:function(t,e,i){if(!this._suppressHover){var n=this,s=n.options.tooltip,r=n._plotArea,o=n._plotArea.categoryAxis,a=n._tooltip,h=n._highlight;if(r.backgroundContainsPoint(t)){var l=o.pointCategoryIndex(t);if(l!==this._tooltipCategoryIx||!this._sharedHighlight&&i){var c=r.pointsByCategoryIndex(l),u=c.map((function(t){return t.eventArgs(e)})),d=u[0]||{};d.categoryPoints=u,c.length>0&&!this.trigger(He,d)?(s.visible&&a.showAt(c,t),h.show(c),this._sharedHighlight=!0):a.hide(),this._tooltipCategoryIx=l}else i&&this._sharedHighlight&&(h.hide(),a.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(h.hide(),a.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}},hideElements:function(t){var e=this._plotArea;this._mousemove.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)},_unsetActivePoint:function(t){var e=this._highlight;this._activePoint=null,this._hoveredPoint=null,t&&t.keepTooltipOpen||this._hideTooltip(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,e&&e.hide()},_deferRedraw:function(){this._redraw()},_clearRedrawTimeout:function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},bindCategories:function(){for(var t=this.options,e=[].concat(t.categoryAxis),i=0;i<e.length;i++){var n=e[i];!1!==n.autoBind&&this.bindCategoryAxisFromSeries(n,i)}},bindCategoryAxisFromSeries:function(t,e){var i=this,n=new Set,s=this.options.series.filter((function(i){return i.categoryAxis===t.name||!i.categoryAxis&&0===e})),r=s.some((function(t){return Boolean(t.categoryField)})),o=s.filter((function(t){return t.data&&t.data.length>0})),a=o.map((function(t){return It.current.bindPoint(t,0).fields.category})),h=a.reduce((function(e,i){return e||Bi(t,i)}),!1);if(o.filter((function(t,e){return t.categoryField||S(a[e])})).forEach((function(t){return t.data.forEach((function(e,s){var r=It.current.bindPoint(t,s).fields.category;if(h){var o=Li(r,e,i.chartService.intl);r=o?o.getTime():void 0}n.add(r)}))})),n.size>0){var l=Array.from(n.values());h&&(l=l.sort().map((function(t){return t&&new Date(t)}))),t.categories=l}else r&&(t.categories=[])},_isBindable:function(t){for(var e=It.current.valueFields(t),i=!0,n=0;n<e.length;n++){var s=e[n];if(s===a?s="field":s+="Field",!S(t[s])){i=!1;break}}return i},_noTransitionsRedraw:function(){var t,e=this.options;!1!==e.transitions&&(e.transitions=!1,t=!0),this._redraw(),t&&(e.transitions=!0)},_legendItemHover:function(t,e){this._showSeriesInactiveOpacity(t,e)},_showSeriesInactiveOpacity:function(t,e){var i,n=this._plotArea,s=this._highlight,r=(n.srcSeries||n.series)[t];if(i=L(r.type,[le,ie,ne,se])?n.findPoint((function(i){return i.series.index===t&&i.index===e})):n.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&r.visible&&i){var o=n.series.length>1,a=i.length?i[0]:i;this._displayInactiveOpacity(a,o,i)}else s.show(i)},_shouldAttachMouseMove:function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([We,qe])},updateMouseMoveHandler:function(){var t,e;(ot(this.element,((t={})[so]=this._mousemove,t)),this._shouldAttachMouseMove())&&st(this.element,((e={})[so]=this._mousemove,e))},applyOptions:function(t,e){vo(this._originalOptions,t),this._originalOptions=D(this._originalOptions,t),this.options=D({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()},setOptions:function(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler()},setDirection:function(t){this.chartService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&this._destroySurface()},setIntlService:function(t){this.chartService.intl=t},noTransitionsRedraw:function(){this._noTransitionsRedraw()},destroy:function(){var t,e;(this._destroyed=!0,ot(this.element,((t={})[ro]=this._clickHandler,t[gi]=this._mousewheelHandler,t[so]=this._mousemove,t[oo]=this._mouseleaveHandler,t[ao]=this._keydownHandler,t[ho]=this._focusHandler,t[lo]=this._blurHandler,t)),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler)&&ot(document,((e={})[so]=this._mouseMoveTrackHandler,e));this._focusState=null,this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()},_destroySurface:function(){var t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)},_destroySelections:function(){var t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()},_destroyView:function(){var t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._clearFocusedElement(),this._resetDrilldownPoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)}});function uo(t,e){if(t)for(var i=0;i<t.length;i++)if(t[i].category===e)return[t[i]]}function po(t){delete t.bar,delete t.column,delete t.rangeColumn,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine,delete t.waterfall}function fo(t){for(var e={},i=0;i<t.length;i++){var n=t[i],s=n.options.name;s&&(e[s]=n.range())}return e}var go=["data","categories"];function vo(t,i){for(var n in i)if(!L(n,go)&&e.hasOwnProperty(i,n)){var s=i[n],r=t[n];if(S(r)){var o=null===s;o||!S(s)?(delete t[n],o&&delete i[n]):r&&B(s)&&B(r)&&vo(r,s)}}}function xo(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}R(co,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{},accessibility:{highlight:{border:{opacity:1,color:m,width:2}}}},categoryAxis:{},seriesDefaults:{type:ee,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1},accessibility:{highlight:{border:{opacity:1,width:2},zIndex:200}}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1}),kendo.deepExtend(kendo.dataviz,{constants:_i,Aggregates:kt,AreaChart:on,AreaSegment:nn,AxisGroupRangeTracker:an,Bar:un,BarChart:vn,BarLabel:hn,BoxPlotChart:bn,BoxPlot:yn,BubbleChart:kn,Bullet:In,BulletChart:Pn,CandlestickChart:mn,Candlestick:xn,CategoricalChart:Gi,CategoricalErrorBar:wi,CategoricalPlotArea:_s,Chart:co,ChartContainer:Vn,ClipAnimation:Ji,ClusterLayout:fn,Crosshair:Rn,CrosshairTooltip:En,DefaultAggregates:Wn,DonutChart:Sr,DonutPlotArea:kr,DonutSegment:Ar,ErrorBarBase:bi,ErrorRangeCalculator:Et,Highlight:As,SharedTooltip:Js,Legend:Us,LegendItem:Xs,LegendLayout:Ls,LineChart:en,LinePoint:Yi,LineSegment:Ui,Pane:Ln,PieAnimation:nr,PieChart:_r,PieChartMixin:yr,PiePlotArea:wr,PieSegment:gr,PlotAreaBase:On,PlotAreaEventsMixin:zn,PlotAreaFactory:Zs,PointEventsMixin:Wi,RangeBar:qn,RangeBarChart:Xn,RangeAreaPoint:Zn,RangeAreaChart:Qn,ScatterChart:An,ScatterErrorBar:wn,ScatterLineChart:sr,Selection:Ks,SeriesAggregator:Nn,SeriesBinder:It,SplineSegment:Ki,SplineAreaSegment:rn,StackWrap:gn,Tooltip:Qs,OHLCChart:ts,OHLCPoint:Jn,WaterfallChart:is,WaterfallSegment:es,XYPlotArea:pr,MousewheelZoom:Vs,ZoomSelection:Ps,Pannable:Is,ChartAxis:_t,ChartPane:wt,ChartPlotArea:At,findAxisByName:bt,anyHasZIndex:Ai,appendIfNotNull:Si,areNumbers:ki,bindSegments:Ii,categoriesCount:Pi,countNumbers:St,equalsIgnoreCase:Ti,evalOptions:Ei,filterSeriesByType:Ri,parseDateCategory:Li,getField:Ct,hasGradientOverlay:Mi,hasValue:Oi,isDateAxis:Bi,segmentVisible:Ci,singleItemOrArray:Fi,createOutOfRangePoints:Ni})}(window.kendo.jQuery),function(t,e){const i=window.kendo,n=i.dataviz,s=i.ui.Widget,r=s.extend({init:function(t,e){if(s.fn.init.call(this,t,e),!e.chart)throw new Error("ChartBreadcrumb: No Chart instance supplied as `options.chart`");this._attachChartEvents(),this._renderBreadcrumb(),i.notify(this,n.ui)},events:[],options:{name:"ChartBreadcrumb",rootItem:{type:"rootitem",icon:"home",text:"Home",showIcon:!0}},destroy:function(){this.breadcrumb&&(this.breadcrumb.destroy(),this.breadcrumb=null),this.chart&&(this.chart.unbind("drilldown",this._onChartDrilldown),this.chart.unbind("drilldownLevelChange",this._onChartDrilldownLevelChange),this.chart=null),s.fn.destroy.call(this)},_attachChartEvents(e){const i=this.options;if("function"==typeof i.chart.resetDrilldownLevel)this.chart=i.chart;else{if("string"!=typeof i.chart)throw new Error("ChartBreadcrumb: `options.chart` must be a Chart instance, element ID or a selector");if(this.chart=t(i.chart).getKendoChart()||t("#"+i.chart).getKendoChart(),!this.chart&&!e)return void setTimeout((()=>this._attachChartEvents(!0)))}this._onChartDrilldown=this._onChartDrilldown.bind(this),this.chart.bind("drilldown",this._onChartDrilldown),this._onChartDrilldownLevelChange=this._onChartDrilldownLevelChange.bind(this),this.chart.bind("drilldownLevelChange",this._onChartDrilldownLevelChange)},_renderBreadcrumb:function(){const e=t("<nav />");this.element.append(e),this.breadcrumb=new i.ui.Breadcrumb(e,{items:[this.options.rootItem]}),this.breadcrumb.bind("click",(t=>this._onBreadcrumbClick(t)))},_onBreadcrumbClick:function(t){if(!this.breadcrumb||!this.chart)return;const e=this.breadcrumb.items().findIndex((e=>e===t.item));this.chart.resetDrilldownLevel(e)},_onChartDrilldown:function(t){this.breadcrumb&&!t.isDefaultPrevented()&&this.breadcrumb.items([...this.breadcrumb.items(),{type:"item",text:t.point.category}])},_onChartDrilldownLevelChange:function(t){if(!this.breadcrumb)return;let e=this.breadcrumb.items();e=e.slice(0,t.level+1),this.breadcrumb.items(e)}});n.ui.plugin(r)}(window.kendo.jQuery),function(t,e){var i=".kendoChart",n=window.kendo,s=n.Class,r=n._outerWidth,o=n._outerHeight,a=n.dataviz,h=a.constants,l=a.Chart,c=a.SeriesBinder,u=n.ui.Widget,d=n.data.DataSource,p=n.deepExtend,f=a.defined,g=a.getField,v=a.InstanceObserver,x=a.inArray,m=a.services,y=Array.isArray,_=t.extend,b=n.template,w=n.htmlEncode,A="mouseleave"+i,S=h.AXIS_LABEL_CLICK,k=h.LEGEND_ITEM_CLICK,C=h.LEGEND_ITEM_HOVER,I=h.LEGEND_ITEM_LEAVE,P=h.SERIES_CLICK,T=h.SERIES_HOVER,E=h.SERIES_OVER,R=h.SERIES_LEAVE,V=h.PANE_RENDER,L=h.PLOT_AREA_CLICK,M=h.PLOT_AREA_HOVER,O=h.PLOT_AREA_LEAVE,B=h.DRAG,F=h.DRAG_END,D=h.DRAG_START,H=h.DRILLDOWN,z="drilldownLevelChange",N=h.ZOOM_START,G=h.ZOOM,W=h.ZOOM_END,q=h.SELECT_START,X=h.SELECT,Y=h.SELECT_END,U=h.RENDER,Z=h.NOTE_CLICK,j=h.NOTE_HOVER,$=h.NOTE_LEAVE,K=t(document.documentElement),Q="change",J="dataBound",tt="leave",et=h.VALUE,it=h.PIE,nt=h.DONUT,st=h.FUNNEL,rt=n.Observable;m.DomEventsBuilder.register({create:function(t,e){return new n.UserEvents(t,p({global:!0,multiTouch:!0,fastTap:!0},e))}});var ot=v.extend({handlerMap:{showTooltip:"_showTooltip",hideTooltip:"_hideTooltip",legendItemClick:"_onLegendItemClick",render:"_onRender",init:"_onInit",drilldown:"_onDrilldown"}}),at=u.extend({init:function(t,e){var i;n.destroy(t),u.fn.init.call(this,t),e&&(i=e.dataSource,delete e.dataSource),this.options=p({},this.options,e),this.wrapper=this.element,this._attachEvents(),e&&(e.dataSource=i),this._seriesVisibility=new dt,this.bind(this.events,this.options),this._initDataSource(e),this._drilldownState=[],n.notify(this,a.ui),this._showWatermarkOverlay&&this._showWatermarkOverlay(this.wrapper[0])},events:[J,H,z,P,T,E,R,S,k,C,I,V,L,M,O,D,B,F,N,G,W,q,X,Y,Z,j,$,U],options:{name:"Chart",renderAs:"",theme:"sass",axisDefaults:{},chartArea:{},legend:{},categoryAxis:{},autoBind:!0,seriesDefaults:{},series:[],seriesColors:null,tooltip:{},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1},items:function(){return t()},refresh:function(){var t=this,e=t._instance;e.applyDefaults(t.options),e.applySeriesColors(),t._bindSeries(),t._bindCategories(),t.trigger(J),t._redraw()},getSize:function(){return n.dimensions(this.element)},redraw:function(t){this._size=null,this._instance.redraw(t)},setOptions:function(t){var e=this,i=t.dataSource;delete t.dataSource,u.fn._setEvents.call(e,t),this._instance.applyOptions(t,this._getThemeOptions(t)),this.options=this._instance.options,this._tooltip.setOptions(this.options.tooltip),this._seriesVisibility.setOptions(this.options),this._sourceSeries=null,i&&e.setDataSource(i),e._hasDataSource?e._onDataChanged():(e._bindCategories(),e.redraw()),e._instance.updateMouseMoveHandler()},setDataSource:function(t){var e=this;e.dataSource.unbind(Q,e._dataChangeHandler),e.dataSource=t=d.create(t),e._hasDataSource=!0,e._hasData=!1,t.bind(Q,e._dataChangeHandler),e.options.autoBind&&t.fetch()},destroy:function(){var t=this,e=t.dataSource;t.element.off(i),e&&e.unbind(Q,t._dataChangeHandler),t._instance&&(t._instance.destroy(),delete this._instance),this._tooltip&&(this._tooltip.destroy(),delete this._tooltip),this._destroyCrosshairTooltips(),u.fn.destroy.call(t)},findPaneByName:function(t){for(var e=this._plotArea.panes,i=0;i<e.length;i++)if(e[i].options.name===t)return new vt(this,e[i])},findPaneByIndex:function(t){var e=this._plotArea.panes;if(e[t])return new vt(this,e[t])},findSeries:function(t){for(var e=this._plotArea,i=e.srcSeries||e.series,n=0;n<i.length;n++)if(t(i[n]))return new xt(this,i[n])},findSeriesByName:function(t){return this._createSeries({name:t})},findSeriesByIndex:function(t){return this._createSeries({index:t})},exportVisual:function(t){var e=this._instance;if(e){var i;if(t&&(t.width||t.height)){var n=e.options.chartArea,s=e._originalOptions.chartArea;p(n,t);var r=e._getModel();n.width=s.width,n.height=s.height,r.renderVisual(),function(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}(r._plotArea.panes),i=r.visual}else i=e.exportVisual();return i}},resetDrilldownLevel(t){t=t||0;const e=this._drilldownState;if(!e||t<0||t>e.length-1)return;const i={level:t,sender:this};this.trigger(z,i),this.options.series=this._drilldownState[t],this._drilldownState=this._drilldownState.slice(0,t),this._bindCategories(),this._redraw()},_createSeries:function(t){var e=this._seriesOptions(t);if(e)return new xt(this,e)},_seriesOptions:function(t){var e,i=this._plotArea,n=i.srcSeries||i.series;if(f(t.index))e=n[t.index];else if(f(t.name))for(var s=0;s<n.length;s++)if(n[s].name===t.name){e=n[s];break}return e},_attachEvents:function(){this.element.on(A,this._mouseleave.bind(this))},_mouseleave:function(e){var i=this._instance,n=this._tooltip,s=e.relatedTarget;s&&t(s).closest(n.element).length||!i||i.handlingTap||i.hideElements({keepTooltipOpen:!n.options.autoHide})},_getThemeOptions:function(t){var e=(t||{}).theme;if(e&&-1!==a.SASS_THEMES.indexOf(e.toLowerCase()))return a.autoTheme().chart;if(f(e)){var i=a.ui.themes||{};return(i[e]||i[e.toLowerCase()]||{}).chart||{}}},_initChart:function(){this._createChart(this.options,this._getThemeOptions(this.options)),this.options=this._instance.options,this._seriesVisibility.setOptions(this.options)},_createChart:function(t,e){this._instance=new l(this.element[0],t,e,{observer:new ot(this),sender:this,rtl:this._isRtl()})},_onInit:function(t){this._instance=t.sender},_initDataSource:function(t){var e=this,i=(t||{}).dataSource;e._dataChangeHandler=e._onDataChanged.bind(e),e.dataSource=d.create(i).bind("change",e._dataChangeHandler),e._bindCategories(),i&&(e._hasDataSource=!0),this._initChart(),this._initTooltip(),i&&e.options.autoBind&&e.dataSource.fetch()},_destroyCrosshairTooltips:function(){var t=this._crosshairTooltips;if(t)for(var e in t)t[e].destroy();this._crosshairTooltips={}},_getCrosshairTooltip:function(t,e){var i=this._crosshairTooltips=this._crosshairTooltips||{},n=t+e,s=i[n];return s||(s=i[n]=new gt(this.element)),s},_showTooltip:function(t){t.crosshair?this._getCrosshairTooltip(t.axisName,t.axisIndex).show(t):this._tooltip&&this._tooltip.show(t)},_hideTooltip:function(t){t.crosshair?this._getCrosshairTooltip(t.axisName,t.axisIndex).hide():this._tooltip&&this._tooltip.hide()},_onRender:function(t){this._destroyCrosshairTooltips(),this._copyMembers(t.sender),this._hasDataSource&&!this._hasData&&this.options.autoBind||this.trigger(U)},_copyMembers:function(t){this.options=t.options,this._originalOptions=t._originalOptions,this.surface=t.surface,this._plotArea=t._plotArea,this._model=t._model,this._highlight=t._highlight,this._selections=t._selections,this._pannable=t._pannable,this._zoomSelection=t._zoomSelection,this._mousewheelZoom=t._mousewheelZoom},requiresHandlers:function(t){for(var e=this._events,i=0;i<t.length;i++)if(f(e[t[i]]))return!0},_initTooltip:function(){this._tooltip=this._createTooltip(),this._tooltip.bind(tt,this._tooltipleave.bind(this))},_onLegendItemClick:function(t){this.trigger(k,t)||this._legendItemClick(t.seriesIndex,t.pointIndex)},_legendItemClick:function(e,i){var n=this._instance,s=n._plotArea,r=(s.srcSeries||s.series)[e];if(n._hasInactiveOpacity()&&n._activeChartInstance&&(n._updateSeriesOpacity(null,!0),n._applySeriesOpacity(n._activeChartInstance.children,null,!0),n._activeChartInstance=null),t.inArray(r.type,[it,nt,st])>=0){var o=r.data[i];if(o&&f(o.visible))o.visible=!o.visible;else{var a=r.pointVisibility=r.pointVisibility||{},h=a[i];a[i]=!!f(h)&&!h}}else r.visible=!r.visible,this._seriesVisibility.save(r);n._noTransitionsRedraw()},_createTooltip:function(){return new ft(this.element,_({},this.options.tooltip,{rtl:this._isRtl()}))},_tooltipleave:function(){this._instance&&this._instance.hideElements()},_onDrilldown:function(t){const{series:e,value:i}=t;if(e.drilldownSeriesFactory){const n=e.drilldownSeriesFactory(i);if(!n)return;n instanceof Promise?n.then((e=>this._onDrilldownData(t,e))):this._onDrilldownData(t,n)}else"object"==typeof i&&this._onDrilldownData(t,i)},_onDrilldownData:function(t,e){const i=Object.assign({},t.series,e),n={point:t.point,series:t.series,drilldownSeries:i,sender:this};this.trigger(H,n)||(this._drilldownState.push(this.options.series),this.options.series=[i],this._bindCategories(),this._redraw())},_bindData:function(t){var e,i,n,s=this,r=s.options,o=s._sourceSeries||r.series,a=o.length,h=s.dataSource.view(),l=(s.dataSource.group()||[]).length>0,c=[],u=this._seriesVisibility;for(u.read(),e=0;e<a;e++)i=o[e],s._isBindable(i)&&l?(n=ut(i,h),c=c.concat(n),u.applyByGroup(n,t)):(i=_({},i),c.push(i),u.applyByIndex(i,t));s._sourceSeries=o,r.series=c,this._instance.applySeriesColors(),s._bindSeries(),s._bindCategories(),this._hasData=!0},_onDataChanged:function(t){this._bindData(t),this.trigger(J),this._instance&&this._instance.fontLoaded&&this._redraw()},_bindSeries:function(){var t,e,i,n,s=this,r=s.dataSource.view(),o=s.options.series,a=o.length;for(t=0;t<a;t++)e=o[t],s._isBindable(e)&&(i=e._groupIx,n=f(i)?(r[i]||{}).items:r,!1!==e.autoBind&&(e.data=n))},_bindCategories:function(){var t,e,i=this,n=i.dataSource.view()||[],s=(i.dataSource.group()||[]).length>0,r=n,o=i.options,a=[].concat(o.categoryAxis);for(s&&n.length&&(r=n[0].items),t=0;t<a.length;t++)!1!==(e=a[t]).autoBind&&i._bindCategoryAxis(e,r,t)},_bindCategoryAxis:function(t,e,i){var n,s,r,o=(e||[]).length;if(t.field)for(t.categories=[],n=0;n<o;n++)r=e[n],s=g(t.field,r),0===n?(t.categories=[s],t.dataItems=[r]):(t.categories.push(s),t.dataItems.push(r));else this._instance&&this._instance.bindCategoryAxisFromSeries(t,i)},_isBindable:function(t){var e,i,n=c.current.valueFields(t),s=!0;for(i=0;i<n.length;i++)if((e=n[i])===et?e="field":e+="Field",!f(t[e])){s=!1;break}return s},_isRtl:function(){return n.support.isRtl(this.element)&&"rtl"===this.element.css("direction")}}),ht=["getAxis","findAxisByName","plotArea","toggleHighlight","showTooltip","hideTooltip","_resize","_redraw","_noTransitionsRedraw","_legendItemHover","_eventCoordinates"];function lt(t){at.fn[t]=function(){var e=this._instance;if(e)return e[t].apply(e,arguments)}}for(var ct=0;ct<ht.length;ct++)lt(ht[ct]);function ut(t,i){var s,r,o,a=[],h=t.groupNameTemplate,l=i.length;if(0===l)return(o=p({},t)).visibleInLegend=!1,[o];for(f(h)?(n.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"),h&&(s=b(h))):s=b(t.name||(({group:e})=>`${f(t.name)?e.value+": "+t.name:e.value}`)),r=0;r<l;r++)o=p({},t),n.isFunction(o.color)||(o.color=e),o._groupIx=r,o._groupValue=i[r].value,a.push(o),s&&(o.name=s({series:o,group:i[r]}));return a}a.ExportMixin.extend(at.fn),n.PDFMixin&&n.PDFMixin.extend(at.fn),a.ui.plugin(at);var dt=s.extend({init:function(){this.groups={},this.index={},this.options={}},applyByGroup:function(t,e){if(e&&e.action||this.options.persistSeriesVisibility)for(var i=0;i<t.length;i++)!1===this.groups[t[i]._groupValue]&&(t[i].visible=!1);else this.groups={}},applyByIndex:function(t,e){e&&e.action||this.options.persistSeriesVisibility?!1===this.index[t.index]&&(t.visible=!1):this.index={}},save:function(t){t&&(this.options.persistSeriesVisibility?this.options.series[t.index].visible=t.visible:this.saveState(t))},setOptions:function(t){this.options=t,this.groups={},this.index={}},read:function(){var t=this.options;if(t.persistSeriesVisibility)for(var e=t.series,i=0;i<e.length;i++)this.saveState(e[i])},saveState:function(t){f(t._groupValue)?this.groups[t._groupValue]=t.visible:this.index[t.index]=t.visible}}),pt=n.geometry;var ft=rt.extend({init:function(e,i){var s=this;rt.fn.init.call(s),this.setOptions(i),s.chartElement=e,s.template=ft.template,s.template||(s.template=ft.template=({autoHide:e,rtl:i,font:s,border:r,opacity:o})=>`<div class='k-tooltip ${e?"k-tooltip-closable":""} k-chart-tooltip ${i?"k-rtl":""}' ${n.attr("style-display")}="none" ${n.attr("style-position")}="absolute" ${n.attr("style-font")}="${s}" ${n.attr("style-opacity")}="${o}" `+(r?`${n.attr("style-border")}="${r.width}px solid" `:"")+'><div class="k-tooltip-content"></div>'+(e?"":'<div class="k-tooltip-button">'+n.ui.icon(t('<a href="#" title="Close"></a>'),{icon:"x"})+"</div>")+"</div>"),s.element=t(s.template(s.options)),n.applyStylesFromKendoAttributes(s.element,["display","position","font","border","opacity"]),s.move=s.move.bind(s),s._mouseleave=s._mouseleave.bind(s);var r=n.format("[{0}='content'],[{0}='scroller']",n.attr("role"));s._mobileScroller=e.closest(r).data("kendoMobileScroller"),s.downEvent=n.applyEventMap("down",n.guid()),s._closeTooltipHandler=s._closeTooltip.bind(s)},destroy:function(){this._clearShowTimeout(),K.off(this.downEvent,this._closeTooltipHandler),this.element&&(this.element.off(A).remove(),this.element=null)},setOptions:function(t){this.options=p({},this.options,t)},options:{opacity:1,animation:{duration:150},sharedTemplate:({colspan:t,categoryText:e,points:i,content:s,colorMarker:r,nameColumn:o})=>`<table><th colspan='${t}'>${e}</th>`+function(t,e,i,s){for(var r="",o=0;o<t.length;o++){var a=t[o];r+="<tr>",e&&(r+=`<td><span class='k-chart-shared-tooltip-marker' ${n.attr("style-background-color")}="${w(a.series.color)}"></span></td>`),i&&(r+=`<td> ${a.series.name?a.series.name+":":"&nbsp;"}</td>`),r+=`<td>${s(a)}</td>`,r+="</tr>"}return r}(i,r,o,s)+"</table>",categoryFormat:"{0:d}",autoHide:!0},move:function(){var t,e=this,i=e.options,n=e.element;e.anchor&&e.element&&(t=e._offset(),e.visible||n.css({top:t.top,left:t.left}),e.visible=!0,e._ensureElement(document.body),n.stop(!0,!0).show().animate({left:t.left,top:t.top},i.animation.duration))},_clearShowTimeout:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)},getAnchor:function(t){var e=this.anchor,i=e.point,n=e.align,s=i.left,r=i.top;return"center"===n.horizontal?s-=t.width/2:"right"===n.horizontal&&(s-=t.width),"center"===n.vertical?r-=t.height/2:"bottom"===n.vertical&&(r-=t.height),{x:s,y:r}},_offset:function(){var e=this,i=e._measure(),s=e.getAnchor(i),a=s.y,h=s.x,l=n.support.zoomLevel(),c=t(window),u=window.pageYOffset||document.documentElement.scrollTop||0,d=window.pageXOffset||document.documentElement.scrollLeft||0,p=(this._mobileScroller||{}).movable;if(p&&1!==p.scale){var f=pt.transform().scale(p.scale,p.scale,[p.x,p.y]),g=new pt.Point(h,a).transform(f);h=g.x,a=g.y}else a+=e._fit(a-u,i.height,o(c)/l),h+=e._fit(h-d,i.width,r(c)/l);return{top:a,left:h}},show:function(s){var r=this,o=t("<div></div>");this.anchor=s.anchor,this.element.css(function(t){for(var i in t)t[i]===e&&(t[i]="");return t}(s.style)),this.element.toggleClass("k-chart-tooltip-inverse",!!s.className),this.element.toggleClass("k-chart-shared-tooltip",!!s.shared);var a=s.shared?this._sharedContent(s):this._pointContent(s.point);o.html(a),n.applyStylesFromKendoAttributes(o,["background-color"]),this.element.find(".k-tooltip-content").empty().append(o),r.options.autoHide||(r.element.off("click"+i).on("click"+i,".k-tooltip-button",r._closeTooltipHandler),K.off(r.downEvent,r._closeTooltipHandler).on(r.downEvent,r._closeTooltipHandler)),this._clearShowTimeout(),this.showTimeout=setTimeout(this.move,100)},hide:function(t){var e=this;(e.options.autoHide||t)&&(clearTimeout(e.showTimeout),e._hideElement(),e.visible&&(e.point=null,e.visible=!1,e.index=null,K.off(e.downEvent,e._closeTooltipHandler)))},_closeTooltip:function(e){t(e.target).is(".k-chart-tooltip, .k-tooltip-content")||(e.preventDefault(),this.chartElement.data("kendoChart")._instance.hideElements(),this.hide(!0))},_sharedContent:function(t){var e=t.points,i=a.grep(e,(function(t){return f(t.series.name)})).length,s=t.series.length>1,r=1;return i&&r++,s&&r++,n.template(this.options.sharedTemplate)({points:e,category:t.category,categoryText:t.categoryText,content:this._pointContent.bind(this),colorMarker:s,nameColumn:i,colspan:r})},_measure:function(){return this._ensureElement(),{width:r(this.element),height:o(this.element)}},_ensureElement:function(){this.element&&this.element.appendTo(document.body).on(A,this._mouseleave)},_mouseleave:function(e){var i=e.relatedTarget,n=this.chartElement[0];i&&i!==n&&!t.contains(n,i)&&this.trigger(tt)},_hideElement:function(){var t=this,e=this.element;e&&e.fadeOut({always:function(){t.visible||e.off(A).remove()}})},_pointContent:function(t){var e,i=p({},this.options,t.options.tooltip);return f(t.value)&&(e=t.value.toString()),i.template?e=b(i.template)({value:t.value,category:t.category,series:t.series,dataItem:t.dataItem,percentage:t.percentage,runningTotal:t.runningTotal,total:t.total,low:t.low,high:t.high,xLow:t.xLow,xHigh:t.xHigh,yLow:t.yLow,yHigh:t.yHigh}):i.format&&(e=t.formatValue(i.format)),e},_fit:function(t,e,i){var n=0;return t+e>i&&(n=i-(t+e)),t<0&&(n=-t),n}}),gt=ft.extend({init:function(t,e){ft.fn.init.call(this,t,e),this.element.addClass("k-chart-crosshair-tooltip")},show:function(t){this.element&&(this.anchor=t.anchor,this.element.css(t.style),this.element.html(this.content(t)),this.move())},move:function(){var t=this,e=t.element,i=t._offset();t._ensureElement(),e.css({top:i.top,left:i.left}).show()},content:function(t){var e=t.value,i=t.crosshair.options.tooltip;return i.template&&(e=b(i.template)({value:e})),e},hide:function(){this.element.hide()}}),vt=s.extend({init:function(t,e){this._chart=t,this._pane=e,this.visual=e.visual,this.chartsVisual=e.chartContainer.visual,this.name=e.options.name},series:function(){var t=this._chart,e=t._plotArea.groupSeriesByPane()[this.name||"default"],i=[];if(e)for(var n=0;n<e.length;n++)i.push(new xt(t,e[n]));return i}}),xt=s.extend({init:function(t,e){this._chart=t,this._options=e},points:function(t){var e=this._points;if(!e){var i=this._seriesOptions(),s=this._chart._plotArea;this._points=e=s.pointsBySeriesIndex(i.index)}return n.isFunction(t)&&(e=this._filterPoints(e,t)),e},data:function(t){var e=this._seriesOptions();if(t){var i=this._chart,n=i._plotArea;if(e.data=t,e.categoryField){var s=n.seriesCategoryAxis(e),r=[].concat(i.options.categoryAxis);i._instance.bindCategoryAxisFromSeries(r[s.axisIndex],s.axisIndex)}i._noTransitionsRedraw(),this._clearFields()}return e.data},findPoint:function(t){for(var e=this.points(),i=0;i<e.length;i++)if(t(e[i]))return e[i]},toggleHighlight:function(t,e){e=e?n.isFunction(e)?this.points(e):y(e)?e:[e]:this.points(),this._chart._instance.togglePointsHighlight(t,e)},toggleVisibility:function(t,e){var i=this._chart,s=this._seriesOptions();if(n.isFunction(e))if(x(s.type,[it,nt,st]))for(var r=this._filterData(e),o=0;o<r.length;o++)r[o].visible=t;else s.visible=function(i){return!e(i.dataItem)||t};else s.visible=t,i._seriesVisibility.save(s);i._noTransitionsRedraw(),this._clearFields()},_filterData:function(t){for(var e=this._seriesOptions().data,i=e.length,n=[],s=0;s<i;s++)t(e[s])&&n.push(e[s]);return n},_filterPoints:function(t,e){for(var i=[],n=t.length,s=0;s<n;s++)e(t[s])&&i.push(t[s]);return i},_seriesOptions:function(){var t=this._series;return t||(t=this._series=this._chart._seriesOptions(this._options)),t},_clearFields:function(){delete this._points,delete this._series}});a.Tooltip=ft,a.CrosshairTooltip=gt,a.ChartInstanceObserver=ot,a.ChartPane=vt,a.ChartSeries=xt}(window.kendo.jQuery);return kendo}));
//# sourceMappingURL=kendo.dataviz.chart.min.js.map
